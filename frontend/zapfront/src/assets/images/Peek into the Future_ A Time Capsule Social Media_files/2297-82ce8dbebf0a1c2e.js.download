/*! For license information please see 2297-82ce8dbebf0a1c2e.js.LICENSE.txt */
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2297],{87812:function(e,t,n){"use strict";var i=n(85893),o=(n(67294),n(37887)),r=n(38166);t.Z=e=>{let{id:t,children:n}=e;const{loading:l,error:a,data:s}=(0,o.a)(r.Z,{variables:{id:t},skip:null==t});if(l)return(0,i.jsx)("div",{});if(a)return(0,i.jsxs)(i.Fragment,{children:["`Error! $",a.message,"`"]});const d=s?s.tile:null;return(0,i.jsx)(i.Fragment,{children:n(d)})}},9615:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(59016),l=n(34981),a=n(38452);const s=(0,r.ZP)(a.ZP).withConfig({displayName:"ActionButton__StyledActionButton",componentId:"sc-c54c16b2-0"})`
  min-width: 0;
  padding: 0 8px;
`;t.Z=e=>{const{onClick:t,actionText:n}=e,r=(0,o.useRef)(!1),a=(0,o.useCallback)((e=>{var n;r.current||(r.current=!0,null===(n=t)||void 0===n||n(e),r.current=!1)}),[r,t]);return(0,i.jsx)(s,{"data-testid":"upload_button",onDoubleClick:l.Z,onClick:a,...e,children:n})}},20564:function(e,t,n){"use strict";n.d(t,{Z:function(){return $}});var i=n(85893),o=n(67294),r=n(59016),l=n(77493),a=n(96391),s=n(57645),d=n(18156),c=n(50576),u=n(36409);const p=e=>{let{as:t,onBlur:n,onFocus:r,readOnly:l,...s}=e;const d=(0,a.ui)(),c=(0,o.useRef)(),u=(0,o.useCallback)((()=>{var e;null===(e=n)||void 0===e||e(),c.current=!1;const t=a.F3.toDOMNode(d,d);t.scrollTop=0,t.scrollLeft=0}),[n,d,c]),p=(0,o.useCallback)((e=>{var t;null===(t=r)||void 0===t||t(e),c.current=!0}),[r,c]);return(0,o.useEffect)((()=>{c.current&&l&&u()}),[c,l,u]),(0,o.useEffect)((()=>{l&&(a.F3.blur(d),d.selection&&a.F3.deselect(d))}),[l,d]),(0,i.jsx)(t,{readOnly:l,onBlur:u,onFocus:p,...s})};p.defaultProps={onBlur:void 0};var h=p,f=n(65220),g=n(83305),m=n(88767),v=n(9228),w=n(80826),y=n(5966);var x=e=>{const{insertText:t}=e;return e.insertTextData=e=>{const n=e.getData("text/plain").replace(/\r\n|\r|\n/g," ").trim();return t(n),!0},e};const b=(0,r.ZP)(a.CX).withConfig({displayName:"EditableTextLabel__StyledEditable",componentId:"sc-12eb9e20-0"})`
  width: 100%;
  caret-color: ${e=>{let{theme:t,$error:n}=e;return n?t.colors.errorText:t.colors.uiAccent}};
  ${e=>e.$isEmpty&&e.$emptyStateLength&&`\n    // A hack so that the placeholder displays correctly\n    min-width: ${e.$emptyStateLength}px;\n  `}
  ${e=>!e.$isEmpty&&"\n    text-align: center;\n  "}

  // The following lines are needed for Safari.
  // Safari has user-select as an inheritable (as opposed to spec)
  // we override it for any contentEditable *or* children of contentEditable
  &[contenteditable] {
    * {
      user-select: text;
    }
  }

  &:not(:focus) *,
  &:not([contenteditable]) * {
    // Table tile title is cut off vertically in preview.
    overflow: ${e=>{let{readOnly:t}=e;return t?"visible":"hidden"}};
    text-overflow: ellipsis;
  }

  div {
    user-select: text;
    cursor: ${e=>{let{$selectable:t}=e;return t?"text":"default"}};
  }

  * ::selection {
    background-color: ${e=>e.theme.colors.textSelection};
  }

  ${e=>!e.$wrapText&&f.r}
`,C=r.ZP.div.withConfig({displayName:"EditableTextLabel__StyledNonEditable",componentId:"sc-12eb9e20-1"})`
  width: 100%;
  user-select: none;
  pointer-events: none;
  cursor: default;
  text-align: center;
  overflow-y: visible;
  text-overflow: ellipsis;
  caret-color: ${e=>{let{theme:t}=e;return t.colors.uiAccent}};

  ::selection {
    background: ${e=>e.theme.colors.textSelection};
  }

  ${e=>!e.$wrapText&&f.r}
`,T={disabled:!1,placeholder:"",selectAllOnFocus:!1,shouldSetGlobalState:!1,emptyStateLength:void 0,maxCharacterLimit:void 0,editorInFocusRef:void 0,dataTestId:void 0,keyBindings:{},selectable:!0},I=(0,o.forwardRef)(((e,t)=>{const{labelId:n,plainContent:r,onContentChange:p,onContentChangeDebounce:f,disabled:T=!1,placeholder:I,emptyStateLength:$,maxCharacterLimit:k,editorInFocusRef:E,selectAllOnFocus:R=!1,shouldSetGlobalState:S=!1,dataTestId:P,keyBindings:_,selectable:j=!0,wrapText:L=!1,allowEmptyValue:Z=!0,error:D,style:M,componentLifeCycleStateTracker:N}=e,A=(0,o.useMemo)((()=>x((0,m.Z)(k)((0,a.BU)((0,s.VC)((0,l.Jh)()))))),[k]),z=(0,o.useMemo)((()=>(0,g.Tj)(r)),[r]),B=(0,o.useRef)(z),F=(0,o.useRef)(z),U=(0,o.useRef)(),V=(0,o.useRef)(),[H,O]=(0,o.useState)(0===r.length),W=e=>0===e.length?"":e.map((e=>l.NB.string(e))).join(""),Y=(0,o.useCallback)((()=>{var e,t;null===(e=(t=V).current)||void 0===e||e.call(t),O(0===r.length),B.current=z,F.current=[...z],(0,w.zg)(A,{nodes:z})}),[z,A,r.length]),G=(0,o.useCallback)((e=>{var t,n;null===(t=(n=U).current)||void 0===t||t.call(n),O(0===e.length);const i=(0,g.Tj)(e);B.current=i,F.current=[...i],(0,w.zg)(A,{nodes:i})}),[A]),J=(0,o.useMemo)((()=>{const e=(0,u.Z)((e=>{const t=W(e);var n;Z||0!==t.length?(F.current=[...e],null===(n=p)||void 0===n||n(t)):Y()}),f??500);return U.current=e.flush,V.current=e.cancel,e}),[Z,p,f,Y]),X=(0,o.useCallback)((e=>{(0,c.Z)(e,B.current)||(B.current=e,O(0===W(e).length),J(e))}),[J]);(0,o.useEffect)((()=>{var e;return null===(e=N)||void 0===e||e(!0),()=>{var e;null===(e=N)||void 0===e||e(!1)}}),[N]);const K=(0,o.useRef)((()=>{}));(0,o.useEffect)((()=>{K.current=()=>{S&&(0,v.ii)(!1)}}),[S]),(0,o.useEffect)((()=>()=>{var e,t;K.current(),null===(e=(t=U).current)||void 0===e||e.call(t)}),[]);const q=(0,o.useCallback)((()=>{var e,t;null===(e=(t=U).current)||void 0===e||e.call(t),E&&(E.current=!1),S&&(0,v.ii)(!1)}),[E,S]),Q=(0,o.useCallback)((e=>{for(const t in _)if((0,d.ZP)(t,e)&&_[t](A))return void e.preventDefault();const t=e.currentTarget;["Enter","Escape"].includes(e.key)&&t.blur(),k&&t.textContent&&t.textContent.length>=k?t.style["caret-color"]="red":t.style["caret-color"]=""}),[k,_,A]);(0,o.useEffect)((()=>{r!==W(F.current)&&G(r)}),[r,G]),(0,o.useEffect)((()=>{const e=document.querySelector('[data-slate-editor="true"]');e&&(e.style.minHeight="auto")}),[]);const ee=(0,o.useCallback)((()=>{E&&(E.current=!0),S&&(0,v.ii)(!0),R&&l.YR.select(A,{anchor:l.ML.point(A,[],{edge:"start"}),focus:l.ML.point(A,[],{edge:"end"})})}),[A,E,R,S]),te=(0,o.useCallback)((()=>{l.YR.select(A,{anchor:l.ML.point(A,[],{edge:"end"}),focus:l.ML.point(A,[],{edge:"end"})}),a.F3.focus(A)}),[A]),ne=(0,o.useCallback)((()=>{a.F3.blur(A)}),[A]),ie=(0,o.useCallback)((()=>W(B.current)),[]);if((0,o.useImperativeHandle)(t,(()=>({focus:te,blur:ne,updateContent:G,getContent:ie}))),T){const e=W(z)||" ";return(0,i.jsx)(C,{"data-testid":P,$wrapText:L,style:M,children:e})}return(0,i.jsx)(a.mH,{editor:A,value:z,onChange:X,children:(0,i.jsx)(h,{as:b,"data-testid":P,placeholder:I,renderPlaceholder:y.Z,readOnly:T,onBlur:q,onFocus:ee,onKeyDown:Q,spellCheck:a.F3.isFocused(A),$isEmpty:H,$emptyStateLength:$,$selectable:j,$wrapText:L,$error:D,style:M})})}));I.defaultProps=T;var $=I},24389:function(e,t,n){"use strict";const i=n(59016).vJ`
// A powerful override that is only present when dragging
body, body * {
  cursor: grabbing !important;
  user-select: none !important;
}
`;t.Z=i},30072:function(e,t,n){"use strict";var i=n(85893),o=n(82703),r=n(69336),l=n(89605);t.Z=e=>{let{presentMode:t,skipPresentModeAnimation:n,children:a,transition:s=l.Z2}=e;return(0,i.jsx)(o.M,{children:!t&&(0,i.jsx)(r.E.div,{initial:{opacity:1},animate:{opacity:t?0:1},exit:{opacity:0},transition:n?{type:!1}:s,children:a})})}},9965:function(e,t,n){"use strict";var i=n(67294),o=n(73935);t.Z=e=>{const{children:t,left:n,top:r,zIndex:l,fullscreen:a=!1,passThrough:s=!1}=e,[d,c]=(0,i.useState)(null);return(0,i.useEffect)((()=>{const e=document.createElement("div");return e.style.position="absolute",c(e),document.body.appendChild(e),()=>{document.body.removeChild(e)}}),[]),d?(d.style.top=`${r}px`,d.style.left=`${n}px`,s&&(d.style.pointerEvents="none"),l&&(d.style.zIndex=`${l}`),a&&(d.style.width="100%",d.style.height="100%"),(0,o.createPortal)(t,d)):null}},58421:function(e,t,n){"use strict";var i=n(85893),o=n(59016);const r=o.ZP.div.withConfig({displayName:"UploadProgressCircle__UploadProgressContainer",componentId:"sc-c6eef382-0"})`
  width: ${e=>e.$width}px;
  height: ${e=>e.$height}px;
`,l=o.ZP.div.withConfig({displayName:"UploadProgressCircle__UploadProgressBackingCircle",componentId:"sc-c6eef382-1"})`
  width: 100%;
  height: 100%;
  border: ${e=>e.$circleWidth}px solid
    ${e=>e.$light?e.theme.colors.contrast20:e.theme.colors.uploadCircle};
  border-radius: 100%;
`,a=o.F4`
from {
  transform: rotate(0deg);
}

to {
  transform: rotate(360deg);
}
`,s=o.ZP.div.attrs((e=>{const t=46.75*Math.PI*2;let n=(1-e.$progress)*t;return e.$infinite&&(n=.75*t),{style:{strokeDasharray:t,strokeDashoffset:n}}})).withConfig({displayName:"UploadProgressCircle__UploadProgressCircleContainer",componentId:"sc-c6eef382-2"})`
  width: 100%;
  height: 100%;
  position: relative;
  top: -100%;
  stroke: ${e=>{let{theme:t}=e;return t.colors.uploadCircleStroke}};
  stroke-width: ${e=>{let{$spinnerWidth:t}=e;return t}}px;
  transform: rotate(-90deg);
  animation: ${e=>{let{$infinite:t}=e;return t&&o.iv`
      ${a} 2s linear infinite
    `}};
  stroke-linecap: round;
  fill: none;
`,d=()=>(0,i.jsx)("svg",{style:{position:"absolute"},viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("circle",{cx:"50",cy:"50",r:"46.75"})});t.Z=e=>{let{width:t,height:n,progress:o=0,infinite:a,light:c=!0,circleWidth:u=2,spinnerWidth:p=10}=e;return(0,i.jsxs)(r,{$height:n,$width:t,children:[(0,i.jsx)(l,{$light:c,$circleWidth:u}),(0,i.jsx)(s,{$progress:o,$infinite:a,$spinnerWidth:p,children:(0,i.jsx)(d,{})})]})}},85590:function(e,t,n){"use strict";const i=n(59016).iv`
  color: inherit;
  text-decoration: underline;
  text-decoration-thickness: from-font;
`;t.Z=i},88689:function(e,t,n){"use strict";n.d(t,{CA:function(){return a},JT:function(){return u},cq:function(){return d},rY:function(){return s}});var i=n(85893),o=n(59016),r=n(69336),l=n(51521);const a=(0,o.ZP)(r.E.div).withConfig({displayName:"Tile.styles__FullscreenModalBackground",componentId:"sc-8d79946-0"})`
  background-color: ${e=>{let{theme:t}=e;return t.colors.background}};
  height: 100vh;
  left: 0;
  overflow: hidden;
  position: fixed;
  top: 0;
  width: 100vw;
  z-index: ${l.D2};
`,s=o.ZP.div.withConfig({displayName:"Tile.styles__TileContainer",componentId:"sc-8d79946-1"})`
  position: relative;
  width: 100%;
  height: 100%;
`,d=(0,o.ZP)(r.E.div).withConfig({displayName:"Tile.styles__TileStyles",componentId:"sc-8d79946-2"})`
  min-height: 100%;
  background-color: ${e=>e.theme.colors.transparent};
  width: 100%;
  box-sizing: border-box;
  position: relative;
  outline: none;
  display: flex;
  flex: 1;
  ${e=>!e.$preview&&e.$inFocus&&`\n    z-index: ${e.$expanded?l.D2:1};\n  `}
  pointer-events: ${e=>e.$disablePointer?"none":"unset"};
  font-family: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.name}};
`,c=o.ZP.div.withConfig({displayName:"Tile.styles__TileBackgroundStyles",componentId:"sc-8d79946-3"})`
  // Used to prevent display overflow for tiles that may overflow unexpectedly when resized
  // to small sizes.
  overflow: hidden;
`;function u(e){let{isMobile:t,isExpandedTile:n,expandedTileRef:o,children:r}=e;return(0,i.jsx)(c,{style:{...t?{width:"100%"}:{minWidth:"100%",maxWidth:"100%"}},...n?{ref:o}:{},children:r})}},13542:function(e,t,n){"use strict";n.d(t,{Y:function(){return w},Z:function(){return I}});var i=n(85893),o=n(59016),r=n(67294),l=n(4480),a=n(51521),s=n(52554),d=n(22755),c=n(73406),u=n(93996),p=n(66810),h=n(1922);const f=o.ZP.div.withConfig({displayName:"TilePropertiesTooltip__TooltipContainer",componentId:"sc-11f1fdb3-0"})`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 2px;
  gap: 2px;
`,g=o.ZP.div.withConfig({displayName:"TilePropertiesTooltip__TooltipHeading",componentId:"sc-11f1fdb3-1"})`
  font-size: 13px;
  font-style: normal;
  font-weight: 500;
  color: ${e=>e.theme.colors.tooltipTextColor};
`,m=o.ZP.div.withConfig({displayName:"TilePropertiesTooltip__TooltipBody",componentId:"sc-11f1fdb3-2"})`
  font-size: 13px;
  font-style: normal;
  font-weight: 400;
  color: ${e=>e.theme.colors.tooltipSecondaryTextColor};
  white-space: pre-wrap;
`;var v=e=>{let{hideBody:t=!1}=e;const{t:n}=(0,h.$G)(),o=(0,d.f3)();return(0,i.jsxs)(f,{children:[(0,i.jsx)(g,{children:n(o?"tiles.options.tooltip.header.close":"tiles.options.tooltip.header.open")}),!t&&(0,i.jsx)(m,{children:n("tiles.options.tooltip.body")})]})};const w=o.ZP.div.withConfig({displayName:"TilePropertiesButton__PropertiesButtonContainer",componentId:"sc-99190910-0"})`
  position: absolute;
  top: -8px;
  left: 0;
  right: 0;
  margin: 0 auto;
  width: 30px;
  height: 16px;
  display: ${e=>{let{$hidden:t}=e;return t?"none":"grid"}};
  z-index: ${a.C8};
`,y=o.ZP.div.withConfig({displayName:"TilePropertiesButton__SharedPropertiesButtonStyles",componentId:"sc-99190910-1"})`
  grid-area: 1 / 1 / 2 / 2;
  border-radius: ${e=>e.theme.borderRadius.xxs};
`,x=(0,o.ZP)(y).withConfig({displayName:"TilePropertiesButton__PropertiesButton",componentId:"sc-99190910-2"})`
  display: flex;
  justify-content: center;
  background-color: ${e=>e.$isSecondaryColor?e.theme.colors.tileSecondarySelection:e.theme.colors.transparent};
  &:hover {
    cursor: pointer;
  }
`,b=(0,o.ZP)(y).withConfig({displayName:"TilePropertiesButton__PropertiesButtonBackground",componentId:"sc-99190910-3"})`
  background-color: ${e=>e.$isSecondaryColor?e.theme.colors.page:e.theme.colors.tilePrimarySelection};
`,C=(0,o.ZP)(s.Z).withConfig({displayName:"TilePropertiesButton__ThreeDotIcon",componentId:"sc-99190910-4"})`
  width: 24px;
  height: 24px;
  top: -4px;
  position: absolute;

  fill: ${e=>e.$isSecondaryColor?e.theme.colors.tilePropertiesButtonIconSecondaryColor:e.theme.colors.tilePropertiesButtonIcon};
  opacity: ${e=>e.$isSecondaryColor?.5:1};
`,T=(e,t)=>{let{tileId:n,tileType:o,preview:a=!1}=e;const s=(0,l.sJ)((0,p.i9)({tileId:n,tileType:o})),h=(0,d.t2)(),f=(0,d.xs)(),g=(0,r.useCallback)((()=>{f(c.Z.TILE)?h.closePropertyPanel():h.setPropertyPanel(c.Z.TILE)}),[f,h]),m=(0,l.sJ)((0,p.j6)({tileId:n,supportsSelection:!a})),y=(0,l.sJ)((0,p.Zp)(n));return(0,i.jsx)(u.Z,{content:(0,i.jsx)(v,{hideBody:!m}),placement:"top",delay:0,children:(0,i.jsxs)(w,{ref:t,$hidden:!m||y,children:[(0,i.jsx)(b,{$isSecondaryColor:s},"properties_button_background"),(0,i.jsx)(x,{"data-testid":"tile_properties_button",$isSecondaryColor:s,onClick:g,children:(0,i.jsx)(C,{$isSecondaryColor:s},"three_dot_icon")},"properties_button")]})})};T.displayName="TilePropertiesButton";var I=(0,r.memo)((0,r.forwardRef)(T))},75570:function(e,t,n){"use strict";var i=n(62830),o=n.n(i),r=n(4480),l=n(94232),a=n(96215),s=n(29225),d=n(41350),c=n(66810);t.Z=(e,t,n,i)=>{const{apolloClient:u,clientId:p}=(0,d.bp)(),{exclusiveSelectTiles:h}=(0,c.N4)();return{addBackgroundImageToTextTile:(0,r._8)((r=>{let{set:d}=r;return r=>{var c,f;if(!r.target.files||!r.target.files.length)return;if(!t||!n)return;const[g]=r.target.files;let m,v;if(null===(f=u.cache.readFragment({id:`Page:${t}`,fragment:a.bsn,fragmentName:"PageWithTilesFragment",variables:{fetchFullPage:!0,prefetchPreviewImage:!1}}))||void 0===f||null===(c=f.tiles)||void 0===c||c.forEach((e=>{var t,n;(null===(n=e.compositeTileData)||void 0===n||null===(t=n.tileIds)||void 0===t?void 0:t.includes(i.id))&&(v=e.id,m=e.compositeTileData.tileIds.find((e=>e!==i.id)))})),v&&m)return d((0,l.vw)(m),(0,l.aY)(g)),void h([v]);const w=o()(),y={id:w,type:a.YUT.Image},x=(0,s.L)(u,p,e,t,n,i,y);d((0,l.vw)(w),(0,l.aY)(g)),h(x)}}),[u,p,h,n,t,i,e])}}},5993:function(e,t,n){"use strict";var i=n(67294),o=n(62830),r=n.n(o),l=n(29225),a=n(41350),s=n(66810),d=n(96215);t.Z=(e,t,n,o)=>{const{apolloClient:c,clientId:u}=(0,a.bp)(),{exclusiveSelectTiles:p}=(0,s.N4)();return{addTextToImageTile:(0,i.useCallback)((()=>{if(!t||!n)return;const i=r()(),a={id:i,type:d.YUT.Text};(0,l.L)(c,u,e,t,n,o,a),p([i])}),[c,u,p,n,t,o,e])}}},21441:function(e,t,n){"use strict";var i=n(67294);t.Z=e=>{let{data:t,saveData:n,preview:o=!1,canEdit:r=!0}=e;const l=(0,i.useRef)(null),a=(0,i.useRef)(n);(0,i.useEffect)((()=>{a.current=n}),[n]),(0,i.useEffect)((()=>{!o&&r&&(t&&l.current&&l.current.id===t.id&&!t.__skipSave&&a.current(t),l.current=t)}),[r,t,o])}},7056:function(e,t,n){"use strict";n.d(t,{n:function(){return ts},g:function(){return ls}});var i=n(85893),o=n(67294),r=n(4480),l=n(89605),a=n(9955);function s(e){e&&e.focus({preventScroll:!0})}var d=n(96215),c=n(41350),u=n(37683),p=n(9228),h=n(66810),f=n(86388);var g,m=e=>{let{ref:t,onResize:n,enabled:i,pixelsPerUnit:o,padding:r}=e;(0,f.Z)({ref:t,round:e=>Math.ceil((e+r)/o),onResize:e=>{let{height:t,width:o}=e;i&&(t||o)&&n({height:t,width:o})}})},v=n(60348),w=n(22755);!function(e){e.PIXELS="PIXELS",e.UNITS="UNITS"}(g||(g={}));class y{addPixelsIfAppropriate(e){return this.kind!==g.PIXELS||(this.value+=e),this}toUnits(e){let t;switch(this.kind){case g.UNITS:t=this.value;break;case g.PIXELS:t=this.value/e}return t}toRawPixels(){switch(this.kind){case g.PIXELS:return this.value;case g.UNITS:default:return}}static ofPixels(e){return new y(g.PIXELS,e)}static ofUnits(e){return new y(g.UNITS,e)}constructor(e,t){this.kind=e,this.value=t}}var x=n(67591),b=n(59090),C=n(51672),T=n(82360),I=n(88689),$=n(76163),k=n(13433),E=n(64310),R=n(82703),S=n(69336),P=n(1922),_=n(759),j=n(59016),L=n(2767);var Z=(0,o.forwardRef)(((e,t)=>(0,i.jsxs)(L.Z,{ref:t,viewBox:"0 0 64 64",...e,children:[(0,i.jsx)("path",{d:"M30 28C30 29.1046 29.1046 30 28 30H16C14.8954 30 14 29.1046 14 28C14 26.8954 14.8954 26 16 26H23.1716L12.5858 15.4142C11.8047 14.6332 11.8047 13.3668 12.5858 12.5858C13.3668 11.8047 14.6332 11.8047 15.4142 12.5858L26 23.1716V16C26 14.8954 26.8954 14 28 14C29.1046 14 30 14.8954 30 16V28Z"}),(0,i.jsx)("path",{d:"M40.8284 38L51.4142 48.5858C52.1953 49.3668 52.1953 50.6332 51.4142 51.4142C50.6332 52.1953 49.3668 52.1953 48.5858 51.4142L38 40.8284V48C38 49.1046 37.1046 50 36 50C34.8954 50 34 49.1046 34 48V36C34 34.8954 34.8954 34 36 34H48C49.1046 34 50 34.8954 50 36C50 37.1046 49.1046 38 48 38H40.8284Z"})]})));var D=(0,o.forwardRef)(((e,t)=>(0,i.jsxs)(L.Z,{ref:t,viewBox:"0 0 64 64",...e,children:[(0,i.jsx)("path",{d:"M12 14C12 12.8954 12.8954 12 14 12H26C27.1046 12 28 12.8954 28 14C28 15.1046 27.1046 16 26 16H18.8284L29.4142 26.5858C30.1953 27.3668 30.1953 28.6332 29.4142 29.4142C28.6332 30.1953 27.3668 30.1953 26.5858 29.4142L16 18.8284V26C16 27.1046 15.1046 28 14 28C12.8954 28 12 27.1046 12 26V14Z"}),(0,i.jsx)("path",{d:"M34.5858 34.5858C35.3668 33.8047 36.6332 33.8047 37.4142 34.5858L48 45.1716V38C48 36.8954 48.8954 36 50 36C51.1046 36 52 36.8954 52 38V50C52 51.1046 51.1046 52 50 52H38C36.8954 52 36 51.1046 36 50C36 48.8954 36.8954 48 38 48H45.1716L34.5858 37.4142C33.8047 36.6332 33.8047 35.3668 34.5858 34.5858Z"})]}))),M=n(51521);const N=(0,j.ZP)(S.E.div).withConfig({displayName:"ExpandButton__ExpandButtonBackground",componentId:"sc-5ec9c23c-0"})`
  height: 32px;
  font-size: ${e=>e.theme.fontSizes.sm};
  position: absolute;
  bottom: 16px;
  width: 40px;
  border-radius: 8px;
  background: ${e=>e.theme.colors.overlayButtonGray};
  right: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(100px);
  z-index: ${M.Dl};
  cursor: pointer;
  & ${L.K} {
    fill: ${e=>e.theme.colors.white};
  }
`;var A=(0,o.forwardRef)(((e,t)=>{let{expandedScale:n,toggleExpand:o,tileId:a}=e;const s=(0,r.sJ)((0,p.cr)(a));return(0,i.jsx)(N,{"data-testid":"expand_mode_button","data-tome-bypass-tap-navigation":"ImageTile__ExpandButton",onClick:o,ref:t,animate:{scale:1/n},transition:l.Z2,children:s?(0,i.jsx)(Z,{style:{width:"20px",height:"20px"}}):(0,i.jsx)(D,{style:{width:"20px",height:"20px"}})})})),z=n(58421);const B=(0,j.ZP)(S.E.div).withConfig({displayName:"TileUploadProgress__StatusBackground",componentId:"sc-71fb9850-0"})`
  height: 24px;
  font-size: ${e=>e.theme.fontSizes.sm};
  backdrop-filter: blur(50px);
  position: absolute;
  width: 24px;
  ${e=>e.$bottom?"bottom: 16px":"top: 16px"};
  border-radius: 6px;
  background: ${e=>e.theme.colors.uploadCircle};
  ${e=>e.$right?"right: 16px":"left: 16px"};
  display: flex;
  align-items: center;
  justify-content: center;
`;var F=e=>{let{progress:t=0,infinite:n,bottom:o,right:r}=e;return(0,i.jsx)(B,{"data-testid":"tile_upload_progress",$bottom:o,$right:r,children:(0,i.jsx)(z.Z,{width:16,height:16,progress:Math.min(.9,t),infinite:n})})},U=n(20564),V=n(9965),H=n(50921);function O(e,t){const n=e.right-e.left,i=e.bottom-e.top,o=Math.max(n/t,i),r=o*t,l=e.left+n/2-r/2,a=l+r,s=e.top+i/2-o/2;return{top:s,bottom:s+o,left:l,right:a}}function W(e,t){const n=e.right-e.left,i=e.bottom-e.top,o=Math.min(n/t,i),r=o*t,l=e.left+n/2-r/2,a=l+r,s=e.top+i/2-o/2;return{top:s,bottom:s+o,left:l,right:a}}function Y(e,t,n,i,o,r,l,a){let s;if(a===d.EwX.Fill||a===d.EwX.Fit){if(null===l)return;s=a===d.EwX.Fill?O(t,l):W(t,l)}else s=t;if(!(e.right<s.left||e.left>s.right||e.bottom<s.top||e.top>s.bottom)){const t=e.top>s.top?(e.top-s.top)/(s.bottom-s.top):0,i=e.bottom<s.bottom?(e.bottom-s.top)/(s.bottom-s.top):1;if(r){n((0,H.Qs)(r,t,i))}else(0,H.xV)(o,n,t,i)}else{n((0,H.$i)(i))}}function G(e,t){const{width:n,height:i}=e,o=Math.max(n/t,i);return{width:o*t,height:o}}function J(e,t,n){const{width:i,height:o}=t,r=Math.sqrt(e*o*i/n);return{width:r*n,height:r}}function X(e,t,n){const{posX:i,posY:o,scale:r}=e,{width:l,height:a}=t,{width:s,height:d}=J(r,t,n);return{size:{width:s,height:d},position:{x:l/2-i*s,y:a/2-o*d}}}function K(e,t){const{width:n,height:i}=t,{position:{x:o,y:r},size:{width:l,height:a}}=e;return{posX:(n/2-o)/l,posY:(i/2-r)/a,scale:l*a/(n*i)}}function q(e,t){const{width:n,height:i}=G(e,t),{width:o,height:r}=e;return{posX:.5,posY:.5,scale:n*i/(o*r)}}function Q(e,t){const{width:n,height:i}=function(e,t){const{width:n,height:i}=e,o=Math.min(n/t,i);return{width:o*t,height:o}}(e,t),{width:o,height:r}=e;return{posX:.5,posY:.5,scale:n*i/(o*r)}}function ee(e,t){return Q(e,t)}function te(e,t){return e/t}function ne(e,t){return e*t}function ie(e,t){return e/t}var oe=n(60531),re=n(34981);const le=(0,j.ZP)(S.E.div).withConfig({displayName:"TileCaption__TileCaptionStyles",componentId:"sc-8fe5c4ff-0"})`
  position: absolute;
  ${e=>e.$style===d.ubC.Top&&`\n    top: ${e.$padding}px;\n  `}
  ${e=>e.$style===d.ubC.Bottom&&`\n    bottom: ${e.$padding}px;\n  `}
  left: 50%;
  transform: translate(-50%, 0);
  backdrop-filter: blur(100px);
  font-size: ${e=>e.$fontSize}px;
  line-height: 1.3;
  padding: ${e=>e.$verticalPadding}px
    ${e=>e.$sidePadding}px;
  border-radius: ${e=>e.$radius}px;
  width: max-content;
  max-width: ${e=>e.$maxWidth}px;
  font-family: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.name}};
  font-weight: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.weight}};
  font-style: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.style}};
`;var ae=(0,o.forwardRef)(((e,t)=>{const{children:n,captionStyle:o,maxWidth:r,fontSize:a,padding:s,radius:c,sidePadding:u,verticalPadding:p,additionalBottomPadding:h=0,captionTheme:f,onClick:g,onMouseDown:m}=e,v=(0,j.Fg)();return(0,i.jsx)(le,{ref:t,$style:o,$maxWidth:r,$fontSize:a,$padding:s,$radius:c,$sidePadding:u,$verticalPadding:p,transition:l.Z2,initial:{transform:"translate(-50%, 0)"},animate:{..."bottom"===o?{transform:`translate(-50%, -${h}px)`}:{transform:"translate(-50%, 0)"},backgroundColor:f===d.dbt.Dark?v.colors.captionDarkBackground:v.colors.captionLightBackground,color:f===d.dbt.Dark?v.colors.captionLightText:v.colors.captionDarkText},onMouseDown:m,onClick:g,onDoubleClick:re.Z,"data-testid":"tile_caption",children:n})})),se=n(87582),de=n(50576),ce=n(63520);const ue=j.ZP.div.withConfig({displayName:"Slider.styles__SliderStyles",componentId:"sc-971b07e-0"})`
  position: relative;
  overflow: hidden;
  width: ${e=>{let{$width:t}=e;return t}}px;
  height: 28px;
  border-radius: 8px;
  background-color: ${e=>{let{theme:t}=e;return t.colors.sliderBackground}};
`,pe=j.ZP.div.withConfig({displayName:"Slider.styles__SliderHandle",componentId:"sc-971b07e-1"})`
  // We reduce the width by 1px to account for the border;
  width: ${e=>{let{$width:t}=e;return t-1}}px;
  height: 28px;
  border-radius: 8px;
  background-color: ${e=>{let{theme:t}=e;return t.colors.sliderHandle}};
  border: 1px solid ${e=>{let{theme:t}=e;return t.colors.sliderHandleBorder}};
  position: absolute;
  left: ${e=>{let{$left:t}=e;return t}}px;
  box-shadow: ${e=>{let{theme:t}=e;return t.boxShadow.small}};
`,he=j.ZP.div.withConfig({displayName:"Slider.styles__SliderFill",componentId:"sc-971b07e-2"})`
  height: 100%;
  width: ${e=>{let{$width:t}=e;return t}}px;
  background-color: ${e=>{let{theme:t}=e;return t.colors.sliderFill}};
  position: absolute;
  left: 0;
`;const fe=o.forwardRef(((e,t)=>{const{currentValue:n,segments:r,onDrag:l,onDrop:a,sliderWidth:s,handleWidth:d}=e,c=(0,o.useRef)(0),u=(0,o.useRef)(0),p=(0,o.useRef)(null),h=(0,o.useRef)(null),f=(0,o.useCallback)((e=>{const t=(0,ce.Z)(e,r[0],r[r.length-1]),n=function(e,t){const n=1/(t.length-1);let i=0;for(let o=0;o<t.length-1;o+=1){const r=t[o],l=t[o+1];if(!(e>l)){i+=n*(e-r)/(l-r);break}i+=n}return i}(t,r),i=(s-d)*n;c.current=t,u.current=i,p.current&&h.current&&(p.current.style.left=`${i}px`,h.current.style.width=`${i+d/2}px`)}),[r]);f(n),(0,o.useImperativeHandle)(t,(()=>({updateHandle:f})));const g=(0,se.c0)((e=>{const{down:t,movement:[n]}=e;let i=u.current+n;i=(0,ce.Z)(i,0,s-d),p.current&&(p.current.style.left=`${i}px`),h.current&&(h.current.style.width=`${i+d/2}px`);const o=function(e,t){if(1===e)return t[t.length-1];const n=1/(t.length-1),i=Math.floor(e/n),o=t[i];return o+(e-i*n)/n*(t[i+1]-o)}(i/(s-d),r);l(o),t||(c.current=o,u.current=i,a(o))}));return function(e){return e.length>=2}(r)?(0,i.jsxs)(ue,{$width:s,children:[(0,i.jsx)(he,{ref:h,$width:u.current+d/2}),(0,i.jsx)(pe,{ref:p,$width:d,$left:u.current,...g()})]}):null}));var ge=fe,me=n(38452);var ve=(0,j.ZP)(me.ZP).withConfig({displayName:"HudButton",componentId:"sc-2511024-0"})`
  min-width: auto;
  width: 67.5px;
  padding: 12px;
`;const we=j.ZP.div.withConfig({displayName:"ElementCrop.styles__CropBackground",componentId:"sc-91b09d53-0"})`
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: rgba(0, 0, 0, 0.8);
`,ye=j.ZP.div.withConfig({displayName:"ElementCrop.styles__TileCropper",componentId:"sc-91b09d53-1"})`
  overflow: hidden;
  position: absolute;
  top: ${e=>e.$top}px;
  left: ${e=>e.$left}px;
  width: ${e=>e.$width}px;
  height: ${e=>e.$height}px;
  border-radius: ${e=>e.$radius}px;
  background-color: ${e=>"transparent"===e.$backgroundColor?e.theme.colors.cropModeTileBackground:e.$backgroundColor};
`,xe=j.ZP.div.withConfig({displayName:"ElementCrop.styles__PreviewDiv",componentId:"sc-91b09d53-2"})`
  position: absolute;
  top: 0;
  left: 0;
  transform: translate(${e=>e.$left}px, ${e=>e.$top}px);
  width: ${e=>e.$width}px;
  height: ${e=>e.$height}px;
`,be=j.ZP.div.withConfig({displayName:"ElementCrop.styles__DraftCanvas",componentId:"sc-91b09d53-3"})`
  position: absolute;
  top: ${e=>e.$top}px;
  left: ${e=>e.$left}px;
  ${e=>e.$width&&`\n    width: ${e.$width}px;\n  `}
  ${e=>e.$height&&`\n    height: ${e.$height}px;\n  `}
  ${e=>e.$zIndex&&`\n    z-index: ${e.$zIndex};\n  `}
`,Ce=j.ZP.div.withConfig({displayName:"ElementCrop.styles__DraftDiv",componentId:"sc-91b09d53-4"})`
  position: absolute;
  top: 0;
  left: 0;
  transform: translate(${e=>e.$left}px, ${e=>e.$top}px);
  width: ${e=>e.$width}px;
  height: ${e=>e.$height}px;
  cursor: move;

  img {
    opacity: 0.5;
  }
  video {
    opacity: 0.5;
  }
`,Te=j.ZP.div.withConfig({displayName:"ElementCrop.styles__CropHud",componentId:"sc-91b09d53-5"})`
  position: absolute;
  ${e=>{let{$top:t,$bottom:n}=e;return n+92+20>window.innerHeight?j.iv`
        top: ${window.innerHeight-t-92-20}px;
      `:j.iv`
      top: calc(100% + ${20}px);
    `}}
  width: 378px;
  height: ${92}px;
  left: calc(50% - 189px);
  background-color: ${e=>e.theme.colors.sheetBg};
  box-shadow: ${e=>{let{theme:t}=e;return t.colors.sheetBoxShadow}};
  border-radius: 20px;
  padding: 12px;
  display: flex;
  backdrop-filter: blur(50px);
  flex-direction: column;
  z-index: ${M.y$+3};
`,Ie=j.ZP.div.withConfig({displayName:"ElementCrop.styles__CropHudRow",componentId:"sc-91b09d53-6"})`
  height: 50%;
  width: 100%;
  display: flex;
  align-items: center;
`,$e=(0,j.ZP)(ve).withConfig({displayName:"ElementCrop.styles__CropHudButton",componentId:"sc-91b09d53-7"})`
  margin-left: 8px;
`,ke=j.ZP.div.withConfig({displayName:"ElementCrop.styles__CropHudLabel",componentId:"sc-91b09d53-8"})`
  color: ${e=>e.theme.colors.adjustPanelText};
  font-size: ${e=>e.theme.fontSizes.smmd};
  line-height: 19px;
  font-weight: 700;
  flex: 1;
  margin-left: 4px;
`,Ee=j.ZP.div.withConfig({displayName:"ElementCrop.styles__CropHudScaleLabel",componentId:"sc-91b09d53-9"})`
  height: 28px;
  margin-right: 8px;
  font-size: ${e=>e.theme.fontSizes.sm};
  line-height: 17px;
  color: ${e=>e.theme.colors.contrast40};
  border-radius: 8px;
  background-color: ${e=>e.theme.colors.adjustPanelInputBackground};
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 1;
  padding: 6px 12px;
`,Re=j.ZP.div.withConfig({displayName:"ElementCrop.styles__CropHudScalePercentLabel",componentId:"sc-91b09d53-10"})`
  width: 10px;
`,Se=j.ZP.input.attrs({type:"number"}).withConfig({displayName:"ElementCrop.styles__CropHudScalePercentInput",componentId:"sc-91b09d53-11"})`
  background-color: transparent;
  outline: none;
  border: none;
  color: ${e=>e.theme.colors.adjustPanelInputText};
  width: 30px;
  text-align: end;
  font-size: ${e=>e.theme.fontSizes.sm};
  line-height: 17px;

  -moz-appearance: textfield;
  ::-webkit-outer-spin-button,
  ::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
`,Pe=16,_e=12,je=j.ZP.div.withConfig({displayName:"ElementCrop.styles__CornerDragHandle",componentId:"sc-91b09d53-12"})`
  width: ${Pe}px;
  height: ${Pe}px;
  background-color: ${e=>e.theme.colors.adjustDragHandle};
  border-style: solid;
  border-width: 3px;
  border-radius: 8px;
  border-color: ${e=>e.theme.colors.uiAccent};
  position: absolute;
`,Le=(0,j.ZP)(je).withConfig({displayName:"ElementCrop.styles__BottomRightDragHandle",componentId:"sc-91b09d53-13"})`
  bottom: -${8}px;
  right: -${8}px;
  cursor: nwse-resize;
`,Ze=(0,j.ZP)(je).withConfig({displayName:"ElementCrop.styles__TopLeftDragHandle",componentId:"sc-91b09d53-14"})`
  top: -${8}px;
  left: -${8}px;
  cursor: nwse-resize;
`,De=(0,j.ZP)(je).withConfig({displayName:"ElementCrop.styles__TopRightDragHandle",componentId:"sc-91b09d53-15"})`
  top: -${8}px;
  right: -${8}px;
  cursor: nesw-resize;
`,Me=(0,j.ZP)(je).withConfig({displayName:"ElementCrop.styles__BottomLeftDragHandle",componentId:"sc-91b09d53-16"})`
  bottom: -${8}px;
  left: -${8}px;
  cursor: nesw-resize;
`,Ne=j.ZP.div.withConfig({displayName:"ElementCrop.styles__VerticalDragHandle",componentId:"sc-91b09d53-17"})`
  position: absolute;
  top: 0;
  bottom: 0;
  width: ${_e}px;
  background-color: ${e=>e.theme.colors.transparent};
  cursor: ew-resize;
  display: flex;
  flex-direction: column;
  align-items: center;
`,Ae=j.ZP.div.withConfig({displayName:"ElementCrop.styles__VerticalSide",componentId:"sc-91b09d53-18"})`
  height: 100%;
  width: 3px;
  background-color: ${e=>e.theme.colors.uiAccent};
`,ze=j.ZP.div.withConfig({displayName:"ElementCrop.styles__VerticalHandle",componentId:"sc-91b09d53-19"})`
  height: 38px;
  width: ${_e}px;
  background-color: ${e=>e.theme.colors.adjustDragHandle};
  border-width: 3px;
  border-style: solid;
  border-radius: ${6}px;
  border-color: ${e=>e.theme.colors.uiAccent};
  position: absolute;
  top: calc(50% - 19px);
`,Be=(0,j.ZP)(Ne).withConfig({displayName:"ElementCrop.styles__RightDragHandle",componentId:"sc-91b09d53-20"})`
  right: -${6}px;
`,Fe=(0,j.ZP)(Ne).withConfig({displayName:"ElementCrop.styles__LeftDragHandle",componentId:"sc-91b09d53-21"})`
  left: -${6}px;
`,Ue=j.ZP.div.withConfig({displayName:"ElementCrop.styles__HorizontalDragHandle",componentId:"sc-91b09d53-22"})`
  position: absolute;
  left: 0;
  right: 0;
  height: ${_e}px;
  background-color: ${e=>e.theme.colors.transparent};
  cursor: ns-resize;
  display: flex;
  flex-direction: row;
  align-items: center;
`,Ve=j.ZP.div.withConfig({displayName:"ElementCrop.styles__HorizontalSide",componentId:"sc-91b09d53-23"})`
  width: 100%;
  height: 3px;
  background-color: ${e=>e.theme.colors.uiAccent};
`,He=j.ZP.div.withConfig({displayName:"ElementCrop.styles__HorizontalHandle",componentId:"sc-91b09d53-24"})`
  width: 38px;
  height: ${_e}px;
  background-color: ${e=>e.theme.colors.adjustDragHandle};
  border-width: 3px;
  border-style: solid;
  border-radius: ${6}px;
  border-color: ${e=>e.theme.colors.uiAccent};
  position: absolute;
  left: calc(50% - 19px);
`,Oe=(0,j.ZP)(Ue).withConfig({displayName:"ElementCrop.styles__TopDragHandle",componentId:"sc-91b09d53-25"})`
  top: -${6}px;
`,We=(0,j.ZP)(Ue).withConfig({displayName:"ElementCrop.styles__BottomDragHandle",componentId:"sc-91b09d53-26"})`
  bottom: -${6}px;
`,Ye=j.ZP.div.withConfig({displayName:"ElementCrop.styles__VerticalLine",componentId:"sc-91b09d53-27"})`
  width: 2px;
  height: 100%;
  background-color: ${e=>e.theme.colors.red};
  position: absolute;
  top: 0;
  left: calc(50% - 1px);
  visibility: hidden;
  z-index: ${M.y$+2};
`,Ge=j.ZP.div.withConfig({displayName:"ElementCrop.styles__HorizontalLine",componentId:"sc-91b09d53-28"})`
  height: 2px;
  width: 100%;
  background-color: ${e=>e.theme.colors.red};
  position: absolute;
  top: calc(50% - 1px);
  left: 0;
  visibility: hidden;
  z-index: ${M.y$+2};
`,Je=j.ZP.div.withConfig({displayName:"ElementCrop.styles__TileElementDiv",componentId:"sc-91b09d53-29"})`
  position: relative;
  height: 100%;
  width: 100%;
`,Xe=new Map([["nw",[-1,-1,-1,-1]],["se",[1,1,0,0]],["ne",[1,-1,0,-1]],["sw",[-1,1,-1,0]],["e",[1,0,0,-.5]],["w",[-1,0,-1,-.5]],["n",[0,-1,-.5,-1]],["s",[0,1,-.5,0]]]),Ke=new Map([["nw",[-2,-2,-.5,-.5]],["se",[2,2,-.5,-.5]],["ne",[2,-2,-.5,-.5]],["sw",[-2,2,-.5,-.5]],["e",[2,0,-.5,-.5]],["w",[-2,0,-.5,-.5]],["n",[0,-2,-.5,-.5]],["s",[0,2,-.5,-.5]]]);function qe(e,t){e.current&&(e.current.style.backgroundColor=t.colors.uiAccent)}function Qe(e,t){e.current&&(e.current.style.borderColor=t.colors.uiAccent)}function et(e){e.current&&(e.current.style.visibility="hidden")}function tt(e,t,n){t?function(e,t){e.current&&(e.current.style.backgroundColor=t.colors.red)}(e,n):qe(e,n)}function nt(e,t,n){t?function(e,t){e.current&&(e.current.style.borderColor=t.colors.red)}(e,n):Qe(e,n)}function it(e,t){t?function(e){e.current&&(e.current.style.visibility="visible")}(e):et(e)}var ot=e=>{const{tileX:t,tileY:n,tileWidth:r,tileHeight:l,tileRadius:a,tileBackground:s,element:d,cropData:c,onSave:u,onCancel:p,aspectRatio:h,tileElement:f=null}=e,g=(0,o.useRef)(null),m=(0,o.useRef)(null),v=(0,o.useRef)(null),w=(0,o.useRef)(null),y=(0,o.useRef)(null),x=(0,o.useRef)(null),b=(0,o.useRef)(null),C=(0,o.useRef)(null),T=(0,o.useRef)(null),I=(0,o.useRef)(null),$=(0,o.useRef)(null),k=(0,o.useRef)(null),E=(0,o.useRef)(null),R=(0,o.useRef)(null),S=(0,o.useRef)(null),_=(0,o.useRef)(null),L=(0,o.useRef)(null),Z=(0,o.useRef)(null),D=(0,o.useRef)(!1),N=(0,o.useRef)(!1),A=(0,o.useRef)(!1),z=(0,o.useRef)(null),B=(0,o.useRef)(c.posX),F=(0,o.useRef)(c.posY),U=(0,o.useRef)(c.scale),V=(0,o.useRef)(!1),H=(0,o.useRef)(null),O=(0,o.useRef)(null),W=(0,o.useRef)(null),Y=(0,o.useRef)(!1),G=(0,o.useRef)(null),q=(0,o.useRef)(null),Q=(0,o.useRef)(null),ee=(0,j.Fg)(),{t:te}=(0,P.$G)(),oe=(0,o.useMemo)((()=>({width:r,height:l})),[r,l]),{size:{width:re,height:le},position:{x:ae,y:ce}}=X({posX:B.current,posY:F.current,scale:U.current},oe,h),ue=(0,o.useCallback)((function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];B.current=e,F.current=t,U.current=n;const{size:{width:o,height:r},position:{x:l,y:a}}=X({posX:e,posY:t,scale:n},oe,h);if(g.current&&(g.current.style.height=`${r}px`,g.current.style.width=`${o}px`,g.current.style.transform=`translate(${l}px, ${a}px)`),m.current&&(m.current.style.height=`${r}px`,m.current.style.width=`${o}px`,m.current.style.transform=`translate(${l}px, ${a}px)`),L.current){const e=Math.ceil(100*n);L.current.value=`${e}`}i||Z.current&&Z.current.updateHandle(n)}),[oe,h]),pe=()=>{et(w),et(v),qe(y,ee),qe(x,ee),qe(b,ee),qe(C,ee),Qe(T,ee),Qe(I,ee),Qe($,ee),Qe(k,ee),Qe(E,ee),Qe(R,ee),Qe(S,ee),Qe(_,ee)},he=(0,se.c0)((e=>{let{down:t,movement:[n,i]}=e;V.current||(V.current=!0,H.current=B.current,O.current=F.current),D.current&&null===W.current&&(Math.abs(n)>5||Math.abs(i)>5)&&(Math.abs(n)>Math.abs(i)?W.current="x":Math.abs(n)<Math.abs(i)&&(W.current="y"));const o=U.current,{size:{width:a,height:s},position:{x:d,y:c}}=X({posX:H.current||0,posY:O.current||0,scale:o},oe,h);let u=d+("y"===W.current?0:1)*n,p=c+("x"===W.current?0:1)*i,f=!1,g=!1,m=!1,P=!1,j=!1,L=!1,Z=!1,M=!1;const N=u+a/2,A=p+s/2,z=Math.abs(N-r/2),Y=Math.abs(A-l/2);!Z&&z<8&&(u=r/2-a/2,Z=!0),f=Math.abs(u-(r/2-a/2))<1,!M&&Y<8&&(p=l/2-s/2,M=!0),g=Math.abs(p-(l/2-s/2))<1,!Z&&Math.abs(u)<8&&(u=0,Z=!0),m=Math.abs(u)<1,!Z&&Math.abs(u+a-r)<8&&(u=r-a,Z=!0),P=Math.abs(u+a-r)<1,!M&&Math.abs(p)<8&&(p=0,M=!0),j=Math.abs(p)<1,!M&&Math.abs(p+s-l)<8&&(p=l-s,M=!0),L=Math.abs(p+s-l)<1,it(v,f),it(w,g),tt(y,j,ee),nt(T,j,ee),tt(x,L,ee),nt(I,L,ee),tt(b,m,ee),nt($,m,ee),tt(C,P,ee),nt(k,P,ee),nt(E,j&&m,ee),nt(R,j&&P,ee),nt(S,L&&m,ee),nt(_,L&&P,ee);const{posX:G,posY:J}=K({position:{x:u,y:p},size:{width:a,height:s}},oe);ue(G,J,o),t||(V.current=!1,H.current=null,O.current=null,W.current=null,pe())})),fe=e=>t=>{const{event:n,down:i,movement:[o,a]}=t;n.stopPropagation(),Y.current||(Y.current=!0,G.current=U.current,q.current=B.current,Q.current=F.current);const s=N.current?Ke.get(e):Xe.get(e);if(!s)return;const[d,c,u,p]=s,f=(g=d,m=c,v=u,w=p,e=>{const{dx:t,dy:n,startCoorX:i,startCoorY:o,startWidth:a,startHeight:s}=e;let d=a+g*t,c=s+m*n;d<80&&(d=80),c<80&&(c=80);let u=Math.max(0===g?0:d,0===m?0:ne(c,h)),p=ie(u,h),f=u-a,P=p-s,j=v*f,L=w*P,Z=i+j,D=o+L,M=!1,N=!1,A=!1,z=!1,B=!1;return 0!==j&&!B&&Math.abs(Z)<8&&(Z=0,j=-i,f=j/v,u=f+a,p=ie(u,h),P=p-s,L=w*P,D=o+L,B=!0),M=Math.abs(Z)<1,0!==L&&!B&&Math.abs(D)<8&&(D=0,L=-o,P=L/w,p=P+s,u=ne(p,h),f=u-a,j=v*f,Z=i+j,B=!0),A=Math.abs(D)<1,j+f!==0&&!B&&Math.abs(Z+u-r)<8&&(u=(r-i+v*a)/(v+1),p=ie(u,h),f=u-a,P=p-s,j=v*f,L=w*P,Z=i+j,D=o+L,B=!0),N=Math.abs(Z+u-r)<1,L+P!==0&&!B&&Math.abs(D+p-l)<8&&(p=(l-o+w*s)/(w+1),u=ne(p,h),f=u-a,P=p-s,j=v*f,L=w*P,Z=i+j,D=o+L,B=!0),z=Math.abs(D+p-l)<1,tt(y,A,ee),nt(T,A,ee),tt(x,z,ee),nt(I,z,ee),tt(b,M,ee),nt($,M,ee),tt(C,N,ee),nt(k,N,ee),nt(E,A&&M,ee),nt(R,A&&N,ee),nt(S,z&&M,ee),nt(_,z&&N,ee),{newX:Z,newY:D,newWidth:u,newHeight:p}});var g,m,v,w;const{size:{width:P,height:j},position:{x:L,y:Z}}=X({posX:q.current||0,posY:Q.current||0,scale:G.current||1},oe,h),{newX:D,newY:M,newWidth:A}=f({dx:o,dy:a,startCoorX:L,startCoorY:Z,startWidth:P,startHeight:j}),{posX:z,posY:V,scale:H}=K({position:{x:D,y:M},size:{width:A,height:ie(A,h)}},oe);ue(z,V,H),i||(Y.current=!1,G.current=null,q.current=null,Q.current=null,pe())},me=(0,se.c0)(fe("se")),ve=(0,se.c0)(fe("nw")),Pe=(0,se.c0)(fe("sw")),_e=(0,se.c0)(fe("ne")),je=(0,se.c0)(fe("e")),Ne=(0,se.c0)(fe("w")),Ue=(0,se.c0)(fe("n")),ot=(0,se.c0)(fe("s")),rt=e=>{e.stopPropagation(),e.preventDefault()},lt=(0,o.useCallback)(((e,t)=>{const{size:{width:n,height:i},position:{x:o,y:r}}=X({posX:B.current,posY:F.current,scale:U.current},oe,h),l=e,{width:a,height:s}=J(l,oe,h),d=o+-.5*(a-n),c=r+-.5*(s-i),{posX:u,posY:p}=K({position:{x:d,y:c},size:{width:a,height:ie(a,h)}},oe);ue(u,p,l,t)}),[oe,h,ue]),at=(0,o.useCallback)((e=>lt(e,!0)),[lt]),st=(0,o.useCallback)((()=>{if(A.current&&L.current){const e=parseInt(L.current.value,10);e&&lt(e/100,!1)}let e={posX:B.current,posY:F.current,scale:U.current};(0,de.Z)(e,c)&&(e=null),u(e)}),[lt,u,c]),dt=(0,o.useCallback)((e=>{if(A.current)switch(e.key){case"Enter":case"Tab":if(L.current){const e=parseInt(L.current.value,10);e?lt(e/100,!1):L.current.value=`${z.current}`,L.current.blur()}break;case"Escape":L.current&&(L.current.value=`${z.current}`,L.current.blur())}else switch(e.key){case"Alt":N.current=!0;break;case"Shift":D.current=!0;break;case"Escape":case"Enter":e.stopPropagation(),e.preventDefault(),st()}}),[st,lt]),ct=(0,o.useCallback)((e=>{switch(e.key){case"Alt":N.current=!1;break;case"Shift":D.current=!1}}),[N,D]);return(0,o.useEffect)((()=>(document.addEventListener("keydown",dt),document.addEventListener("keyup",ct),()=>{document.removeEventListener("keydown",dt),document.removeEventListener("keyup",ct)})),[dt,ct]),(0,o.useEffect)((()=>{L.current&&(L.current.value=`${Math.ceil(100*U.current)}`)}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(we,{onClick:st,onMouseDown:rt}),(0,i.jsx)(be,{$top:n,$left:t,$width:r,$height:l,children:(0,i.jsxs)(Te,{$top:n,$bottom:n+l,"data-testid":"element_crop_hud",children:[(0,i.jsx)(Ie,{children:(0,i.jsx)(ke,{children:te("commandPrompt.tiles.crop.adjust")})}),(0,i.jsxs)(Ie,{children:[(0,i.jsxs)(Ee,{children:[(0,i.jsx)(Se,{ref:L,"data-testid":"crop_hud_scale_percent_input",onBlur:()=>{z.current=null,A.current=!0},onFocus:e=>{z.current=parseInt(e.target.value,10),A.current=!0}}),(0,i.jsx)(Re,{children:"%"})]}),(0,i.jsx)(ge,{ref:Z,currentValue:U.current,segments:[.1,5],sliderWidth:130,handleWidth:20,onDrag:at,onDrop:at}),(0,i.jsx)($e,{onClick:p,children:te("commandPrompt.tiles.crop.cancelButton")}),(0,i.jsx)($e,{"data-testid":"crop_hud_button_done",color:"primary",onClick:st,children:te("commandPrompt.tiles.crop.doneButton")})]})]})}),(0,i.jsxs)(ye,{$left:t,$top:n,$width:r,$height:l,$radius:a,$backgroundColor:s,onClick:st,"data-testid":"element_crop_tile_cropper",children:[(0,i.jsx)(xe,{ref:g,$left:ae,$top:ce,$width:re,$height:le,children:d}),(0,i.jsx)(Je,{children:f&&o.cloneElement(f,{style:{zIndex:M.y$+2}})}),(0,i.jsx)(Ye,{ref:v}),(0,i.jsx)(Ge,{ref:w})]}),(0,i.jsx)(be,{$top:n,$left:t,$zIndex:M.y$+1,onMouseDown:rt,children:(0,i.jsxs)(Ce,{ref:m,$left:ae,$top:ce,$width:re,$height:le,"data-testid":"element_crop_draft_div",...he(),children:[d,(0,i.jsxs)(Be,{...je(),children:[(0,i.jsx)(Ae,{ref:C}),(0,i.jsx)(ze,{ref:k})]}),(0,i.jsxs)(Fe,{...Ne(),children:[(0,i.jsx)(Ae,{ref:b}),(0,i.jsx)(ze,{ref:$})]}),(0,i.jsxs)(Oe,{...Ue(),children:[(0,i.jsx)(Ve,{ref:y}),(0,i.jsx)(He,{ref:T})]}),(0,i.jsxs)(We,{...ot(),children:[(0,i.jsx)(Ve,{ref:x}),(0,i.jsx)(He,{ref:I})]}),(0,i.jsx)(Le,{ref:_,...me()}),(0,i.jsx)(Ze,{ref:E,...ve()}),(0,i.jsx)(De,{ref:R,..._e()}),(0,i.jsx)(Me,{ref:S,...Pe()})]})})]})},rt=n(61105),lt=n(10987),at=n(979);const st=j.ZP.div.withConfig({displayName:"CenterTapToExpand__CenterTapToExpandStyles",componentId:"sc-a8b856dc-0"})`
  width: 50vw;
  height: 100%;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
`;var dt=(0,o.forwardRef)(((e,t)=>{let{isMobile:n,...o}=e;const l=(0,at.j)(),a=(0,r.sJ)((0,lt.J)(l));return!n||a?null:(0,i.jsx)(st,{"data-testid":"center_tap_to_expand",...o,ref:t})})),ct=n(12887);var ut=()=>{const e=(0,r.sJ)(T.lk),t=(0,r.sJ)(T.MJ);return e||t},pt=n(45533),ht=n(41697),ft=n(64187),gt=n(89755),mt=n.n(gt),vt=n(46051);const wt=j.ZP.div.withConfig({displayName:"ImageTile.styles__PageEndpointImageDiv",componentId:"sc-e3ac090e-0"})`
  position: absolute;
  background-image: url(${e=>{let{$backgroundImg:t}=e;return t}});
  background-size: ${e=>{let{$width:t}=e;return t}}px ${e=>{let{$height:t}=e;return t}}px;
  background-position: ${e=>{let{$left:t}=e;return t}}px ${e=>{let{$top:t}=e;return t}}px;
  background-repeat: no-repeat;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  pointer-events: none;
`,yt=j.ZP.div.withConfig({displayName:"ImageTile.styles__ImageDiv",componentId:"sc-e3ac090e-1"})`
  position: absolute;
  top: 0;
  left: 0;
  transform: translate(${e=>{let{$left:t}=e;return t}}px, ${e=>{let{$top:t}=e;return t}}px);
  width: ${e=>{let{$width:t}=e;return t}}px;
  height: ${e=>{let{$height:t}=e;return t}}px;
  visibility: ${e=>{let{$inCrop:t}=e;return t?"hidden":"inherit"}};
  ${e=>{let{$canEdit:t,$preview:n,$presentMode:i,$isExpanded:o}=e;return o?"cursor: zoom-out":i?"cursor: zoom-in":t||n?"cursor: auto":"cursor: pointer"}};
`,xt=(0,j.ZP)(mt()).withConfig({displayName:"ImageTile.styles__NextImage",componentId:"sc-e3ac090e-2"})`
  width: 100%;
  height: 100%;
  object-fit: ${e=>{let{$fit:t}=e;return t?"contain":"cover"}};
  opacity: ${e=>{let{$show:t}=e;return t?1:0}};
  pointer-events: none;
`,bt=j.ZP.div.withConfig({displayName:"ImageTile.styles__FillNextImageWrapper",componentId:"sc-e3ac090e-3"})`
  position: relative;
  width: 100%;
  height: 100%;
`,Ct=(0,j.ZP)(S.E.div).withConfig({displayName:"ImageTile.styles__ImageDropArea",componentId:"sc-e3ac090e-4"})`
  ${e=>{let{$presentMode:t,$isExpanded:n}=e;return n?"cursor: zoom-out":t?"cursor: zoom-in":"cursor: auto"}}}
  width: 100%;
  height: 100%;
  outline: none;
  justify-content: center;
  align-items: center;
  display: flex;
  overflow: ${e=>{let{$inCrop:t}=e;return t?"inherit":"hidden"}};
  // Needed in safari for border radius https://gist.github.com/ayamflow/b602ab436ac9f05660d9c15190f4fd7b
  -webkit-mask-image: -webkit-radial-gradient(white, black);
  position: relative;
  background-color: ${e=>{let{$backgroundColor:t,theme:n}=e;return t||n.colors.contrast8}};
`,Tt=j.ZP.div.withConfig({displayName:"ImageTile.styles__ExitExpandedModeButton",componentId:"sc-e3ac090e-5"})`
  align-items: center;
  background-color: ${e=>{let{theme:t}=e;return t.colors.formatBarBackground}};
  display: flex;
  font-size: ${e=>{let{theme:t}=e;return t.fontSizes.md}};
  justify-content: center;
  width: 30px;
  height: 30px;
  position: fixed;
  border-radius: 100%;
  top: ${vt.YZ.padding}px;
  right: ${vt.YZ.padding}px;
  text-align: center;
  overflow: hidden;
`,It=j.ZP.div.withConfig({displayName:"ImageTile.styles__CommandPromptPreviewPlaceholderDiv",componentId:"sc-e3ac090e-6"})`
  display: flex;
  flex: none;
  flex-direction: column;
  height: 100%;
  width: 100%;
  justify-content: center;
  align-items: center;
  border-radius: ${e=>{let{radius:t}=e;return t}}px;
  background-color: ${e=>e.theme.colors.commandPromptPreviewImagePlaceholderBackground};
  gap: 12px;

  // helps when the viewport gets scaled down
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
`;var $t=n(40405),kt=n(30072),Et=n(14252);var Rt=(e,t)=>{const[n,i]=(0,r.FV)((0,h.pt)(e));(0,o.useEffect)((()=>{var e;n&&(null===(e=t.current)||void 0===e||e.focus());return()=>i(!1)}),[]);return{onBlur:()=>{i(!1)},onFocus:()=>{i(!0)},onKeyDown:e=>{var n;"Escape"===e.key&&(t.current&&""!==t.current.value?t.current.value="":null===(n=t.current)||void 0===n||n.blur())}}};const St=j.ZP.div.withConfig({displayName:"NullEmbedTile__EmbedPreviewStyles",componentId:"sc-eb48f33e-0"})`
  display: flex;
  flex: none;
  flex-direction: column;
  height: 100%;
  justify-content: center;
  align-items: center;
  border-radius: ${e=>{let{radius:t}=e;return t}}px;
  background-color: ${e=>{let{presentMode:t,theme:n}=e;return t?n.colors.transparent:n.colors.embedTileBackground}};
  gap: 12px;

  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;

  overflow: hidden;

  & svg {
    fill: ${e=>{let{theme:t}=e;return t.colors.nullEmbedIconFill}};
  }
`,Pt=(0,j.ZP)($t.Z).withConfig({displayName:"NullEmbedTile__UrlInput",componentId:"sc-eb48f33e-1"})`
  height: 28px;
  width: 190px;
  min-height: initial;
  max-width: calc(100% - 24px);
  margin: 0;
  padding: 10px 12px;
  background: ${e=>e.theme.colors.nullEmbedUrlInputBg};
  border: 1px solid ${e=>e.theme.colors.nullEmbedUrlInputBorder};
  flex-basis: 100%;
  color: ${e=>e.theme.colors.nullEmbedUrlInputText};
  text-overflow: ellipsis;

  :hover:not(:focus) {
    background-color: ${e=>e.theme.colors.nullEmbedUrlInputBgHover};
    border: 1px solid
      ${e=>e.theme.colors.nullEmbedUrlInputBorderHover};
  }

  ::placeholder {
    color: ${e=>e.theme.colors.nullEmbedUrlInputPlaceholder};
  }

  :focus {
    border: 1px solid ${e=>e.theme.colors.contentAccent};
  }
`,_t=j.ZP.div.withConfig({displayName:"NullEmbedTile__UrlInputPlaceholder",componentId:"sc-eb48f33e-2"})`
  height: 28px;
  padding: 10px 12px;
  border: 1px solid ${e=>e.theme.colors.transparent};
`;var jt=e=>{let{tileId:t,tileType:n,sizes:l,width:a,height:s,preview:c,updateContentLink:u}=e;var f,g,m,v;const{t:w}=(0,P.$G)(),y=(0,o.useRef)(null),b=(null===(f=(0,r.sJ)(h.X1))||void 0===f?void 0:f.iconSize)||l.embedPreviewIconSize,C=(0,k.l)(p.oG),{onBlur:T,onFocus:I,onKeyDown:E}=Rt(t,y),R=$.YM.filter((e=>e.value===n));if(0===R.length)return null;const S=null===(m=(0,$.An)(n))||void 0===m||null===(g=m[0])||void 0===g?void 0:g.label,_=null===(v=S)||void 0===v?void 0:v.toLowerCase(),j=R[0].icon,L=s<x.dA,Z=S?w("tiles.nullEmbedTileWithServiceNamePlaceholder",{serviceName:S}):w("tiles.nullEmbedTilePlaceholder");return(0,i.jsxs)("div",{"data-testid":`null_embed_tile_${_}`,children:[(0,i.jsx)(kt.Z,{presentMode:C,children:(0,i.jsxs)(St,{radius:l.tileSizes.radius,presentMode:!1,$tileType:n,children:[!(!c&&L)&&(0,i.jsx)(j,{style:{width:Math.min(b,a-l.pageSizes.padding),height:Math.min(b,a-l.pageSizes.padding),opacity:n===d.YUT.Web?.5:1},dataTestId:"null_embed_icon"}),!c&&u&&(0,i.jsx)("form",{onSubmit:e=>{var t;const n=null===(t=y.current)||void 0===t?void 0:t.value;return n&&u(n),e.preventDefault(),!1},style:{textAlign:"center",width:"100%"},children:(0,i.jsx)(Pt,{type:"text",placeholder:Z,onBlur:e=>{e.target.value&&u(e.target.value),T()},onFocus:I,onKeyDown:E,onContextMenuCapture:re.Z,onMouseDownCapture:e=>{(0,Et.d)(e)&&e.stopPropagation()},ref:y})})]})}),(0,i.jsx)(kt.Z,{presentMode:!C,children:(0,i.jsx)(St,{radius:l.tileSizes.radius,presentMode:!0,$tileType:n,children:!L&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j,{style:{width:b,height:b,opacity:n===d.YUT.Web?.5:1}}),(0,i.jsx)(_t,{})]})})})]})},Lt=n(9615),Zt=n(96767),Dt=n(17145),Mt=n(73406),Nt=n(22173),At=n(3266),zt=n(47390),Bt=n(40663);const Ft=`video/*, ${H.lW}`,Ut=j.ZP.div.withConfig({displayName:"NullMediaTile__NullMediaTileStyles",componentId:"sc-dbe6d4a3-0"})`
  display: flex;
  flex: none;
  flex-direction: column;
  height: 100%;
  width: 100%;
  justify-content: center;
  align-items: center;
  border-radius: ${e=>{let{radius:t}=e;return t}}px;
  background-color: ${e=>e.theme.colors.embedTileBackground};
  gap: 12px;

  // helps when the viewport gets scaled down
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
`,Vt=j.ZP.div.withConfig({displayName:"NullMediaTile__Column",componentId:"sc-dbe6d4a3-1"})`
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-height: 17px;
  align-items: center;
`,Ht=j.ZP.div.withConfig({displayName:"NullMediaTile__ButtonRow",componentId:"sc-dbe6d4a3-2"})`
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 8px;
`,Ot={width:"72px",height:"80px"},Wt={width:"22px",height:"22px"},Yt={marginBottom:"6px"},Gt=e=>{let{onClickUpload:t,onClickCreate:n,onClickSearch:o}=e;const{t:r}=(0,P.$G)(),l="8px";return(0,i.jsxs)(Ht,{children:[(0,i.jsx)(Lt.Z,{onClick:n,actionText:r("sidebar.media.create"),disabled:!1,style:Ot,size:"tall",startIcon:(0,i.jsx)(Dt.Z,{style:Wt}),iconStyles:Yt,borderRadius:l}),(0,i.jsx)(Lt.Z,{onClick:t,actionText:r("sidebar.media.upload"),disabled:!1,style:Ot,size:"tall",startIcon:(0,i.jsx)(Zt.Z,{style:Wt}),iconStyles:Yt,borderRadius:l}),(0,i.jsx)(Lt.Z,{onClick:o,actionText:r("sidebar.media.search"),disabled:!1,style:Ot,size:"tall",startIcon:(0,i.jsx)(zt.Z,{style:Wt}),iconStyles:Yt,borderRadius:l})]})},Jt=e=>{let{onClickAddImage:t,tooNarrow:n}=e;const{t:o}=(0,P.$G)(),r=(0,i.jsx)(Lt.Z,{onClick:t,actionText:n?"":o("sidebar.media.addImage"),disabled:!1,style:{width:"100%"},size:"medium",icon:n?(0,i.jsx)(At.Z,{}):null,iconStyles:{width:"16px",height:"16px"}});return(0,i.jsx)(Vt,{children:r})},Xt=e=>{let{onClickUpload:t,onClickCreate:n,onClickSearch:o,onClickAddImage:r,isImageTile:l,placeholderText:a,useSingleButton:s,tooNarrow:d}=e;const{t:c}=(0,P.$G)();return l?s?(0,i.jsx)(Jt,{onClickAddImage:r,tooNarrow:d}):(0,i.jsx)(Gt,{onClickUpload:t,onClickCreate:n,onClickSearch:o,tooNarrow:d}):(0,i.jsx)(Lt.Z,{onClick:t,icon:d&&(0,i.jsx)(Zt.Z,{}),actionText:d?"":c("tiles.uploadText",{placeholderTextType:a.toLowerCase()})})},Kt=e=>{let{nullTileRef:t,radius:n,tooShort:o,narrow:r,tooNarrow:l,iconSize:a,tileWidth:s,sizes:d,isImageTile:c,placeholderText:u,uploadInputRef:p,onUploadChange:h,onClickCreate:f,onClickUpload:g,onClickSearch:m,onClickAddImage:v,Icon:w}=e;const y=o||r,x=!o&&(y||!c);return(0,i.jsxs)(Ut,{ref:t,"data-testid":"null_media_tile",radius:n,children:[x&&(0,i.jsx)(w,{style:{width:Math.min(a,s-d.pageSizes.padding),height:Math.min(a,s-d.pageSizes.padding),opacity:.5}}),(0,i.jsx)(Xt,{isImageTile:c,placeholderText:u,onClickUpload:g,onClickCreate:f,onClickSearch:m,onClickAddImage:v,useSingleButton:y,tooNarrow:l}),(0,i.jsx)("input",{ref:p,type:"file",accept:Ft,onChange:h,style:{display:"none"}})]})},qt=e=>{let{tileShortSide:t}=e;const n=(0,j.Fg)(),o=Math.floor(.15*t),r=Math.ceil(o/30);return(0,i.jsx)(Nt.Z,{size:o,stroke:r,rotationDuration:3,background:n.colors.nullTileSpinnerBackground,foreground:n.colors.nullTileSpinnerForeground})};var Qt=e=>{let{placeholderText:t,icon:n,iconSize:l,onFileDrop:a,radius:s,sizes:d,height:c,tileId:u,tileType:p,isLoading:g=!1}=e;const m=(0,pt.Z)(),v=n,{exclusiveSelectTiles:y}=(0,h.N4)(),[b,C]=(0,r.FV)((0,Bt.A)(u)),T=(0,w.t2)(),I=(0,o.useRef)(null),$=(0,o.useRef)(null),[k,E]=(0,o.useState)(110);(0,f.Z)({ref:$,onResize:e=>{let{width:t}=e;E(t??110)}});const R=c<x.dA,S=k<340,P=k<110,_=(0,o.useCallback)((e=>{e.target.files&&e.target.files.length>0&&a(e.target.files)}),[a]),j=(0,o.useCallback)((()=>{T.setPropertyPanels([Mt.Z.TILE,Mt.Z.IMAGE_CREATE])}),[T]),L=(0,o.useCallback)((()=>{T.setPropertyPanels([Mt.Z.TILE,Mt.Z.IMAGE_SEARCH])}),[T]),Z=(0,o.useCallback)((e=>{e.stopPropagation(),y([u]),j()}),[y,u,j]),D=(0,o.useCallback)((e=>{e.stopPropagation(),y([u]),L()}),[y,u,L]),M=(0,o.useCallback)((()=>{var e;null===(e=I.current)||void 0===e||e.click()}),[]),N=(0,o.useCallback)((()=>{T.setPropertyPanel(Mt.Z.TILE)}),[T]);return(0,o.useEffect)((()=>{if(m&&b.triggered){switch(y([u]),b.action){case Bt.B.CLICK_IMAGE_TILE_CREATE_BUTTON:j();break;case Bt.B.CLICK_IMAGE_TILE_UPLOAD_BUTTON:M();break;case Bt.B.CLICK_IMAGE_TILE_SEARCH_BUTTON:L();case Bt.B.NONE:}C({action:Bt.B.NONE,triggered:!1})}}),[m,M,j,L,y,C,u,b.action,b.triggered]),g?(0,i.jsx)(Ut,{ref:$,"data-testid":"null_image_generative_tile",radius:s,children:(0,i.jsx)(qt,{tileShortSide:Math.min(k,c)})}):(0,i.jsx)(Kt,{nullTileRef:$,radius:s,tooShort:R,tooNarrow:P,narrow:S,iconSize:l,tileWidth:k,sizes:d,isImageTile:(0,H.ck)(p),placeholderText:t,uploadInputRef:I,onUploadChange:_,onClickCreate:Z,onClickUpload:M,onClickSearch:D,onClickAddImage:N,Icon:v})},en=n(94232),tn=n(10158),nn=n(88698),on=n(68164),rn=n(65164);var ln=e=>{let{tileId:t,updateTileData:n}=e;const i=(0,r.sJ)((0,en.vw)(t)),l=function(e,t){const n=(0,at.j)(),i=(0,r.Zl)((0,tn.$)(n)),l=(0,r.Zl)((0,en.vw)(e)),a=(0,r.rb)((0,en.vw)(e)),s=(0,o.useCallback)((e=>{l((e=>({...e,inProgress:!0}))),t((t=>({...t,mediaTileData:{...nn.R,mediaStatus:d.Jpv.UploadInProgress,mediaFillType:d.EwX.Fill},fileUploadTileData:{createdAt:(new Date).toISOString(),uploadId:e},__skipRedo:!0})))}),[l,t]),{t:u}=(0,P.$G)(),p=(0,o.useCallback)((e=>{i({title:u("hooks.uploadToImageFailedTitle"),subtitle:u("hooks.uploadToImageFailedSubtitle")}),a(),t((e=>({...e,mediaTileData:{...e.mediaTileData,aspectRatio:null,backgroundColor:null,mediaStatus:d.Jpv.WaitingForCreation},fileUploadTileData:{...nn.D},__skipUndo:!0})))}),[a,i,t,u]),h=(0,o.useCallback)((e=>{l((t=>e>t.progress?{...t,progress:e}:t))}),[l]),f=(0,o.useCallback)((e=>{t((t=>({...t,contentLink:e.imagePath,imageAttributes:{...e},mediaTileData:{...t.mediaTileData,mediaStatus:d.Jpv.Ready,mediaFillType:d.EwX.Fill},fileUploadTileData:{...nn.D},imageTileData:{...rn.l},__skipUndo:!0}))),a()}),[t,a]),{apolloClient:g}=(0,c.bp)();return(0,o.useCallback)((e=>{let{file:t,uploadId:i}=e;s(i),(0,on.I)({apolloClient:g,tomeId:n,file:t,onUploadComplete:f,onUploadError:p,onUploadProgress:h,uploadId:i}),E.v.addAction("Upload image",{uploadImage:{uploadId:i},file:{name:t.name,type:t.type}})}),[g,f,p,h,s,n])}(t,n);(0,o.useEffect)((()=>{const{uploadId:e,localMediaUrl:t,localFileData:n,inProgress:o}=i;e&&t&&n&&!o&&l({file:n,uploadId:e})}),[i,l]);const a=(0,r._8)((e=>{let{snapshot:n,reset:i}=e;return()=>{const{inProgress:e,uploadId:o,progress:r}=n.getLoadable((0,en.vw)(t)).getValue();e&&E.v.addAction("Unmount while uploading image",{uploadImage:{tileId:t,uploadId:o,progress:r}}),i((0,en.vw)(t))}}),[t]);return(0,o.useEffect)((()=>a),[a]),null};var an=e=>{let{tileData:t,setTileData:n,canEdit:a,selected:s,preview:f,width:g,height:m,sizes:v,toggleExpand:w,isMobile:y,isExpanded:x,isTileEndpoint:C,expandedScale:T,disableExpandButton:I,pageId:j="",pageKind:L}=e;var Z;const{apolloClient:D,clientId:N}=(0,c.bp)(),z=(0,k.l)(p.oG),B=(0,o.useRef)(null),O=(0,o.useRef)(null),W=(0,o.useRef)(null),{imageAttributes:G,mediaTileData:J,imageTileData:K,tomeId:ne,id:ie}=t,{mediaFillType:le,aspectRatio:se,fillCropCenterX:de,fillCropCenterY:ce,fillCropScale:ue,backgroundColor:pe,captionStyle:he,captionText:fe,captionTheme:ge,mediaStatus:me}=J||{},{t:ve}=(0,P.$G)(),we=(0,r.sJ)((0,h.k4)({pageId:j,isTileEndpoint:C,preview:f})),ye=(0,b.ye)(b.TT.CREATE_COMPOSITE_TILE),xe=v.tileSizes.radius,be=v.tileSizes.captionFontSize,Ce=v.tileSizes.captionPadding,Te=v.tileSizes.captionRadius,Ie=v.tileSizes.captionInnerPaddingVertical,$e=v.tileSizes.captionInnerPaddingSide,ke=v.tileSizes.fullWidth,Ee=y?ke:g,Re=(0,o.useRef)(),Se=(0,pt.Z)(),[Pe,_e]=(0,o.useState)(!Se||L===ct.sb.PAGE_ENDPOINT),[je,Le]=(0,r.FV)((0,en.vw)(t.id)),Ze=le||H.AL,[De,Me]=(0,r.FV)(oe.cm),[Ne,Ae]=(0,r.FV)(oe.VJ),ze=a&&s&&!f&&De,Be=y&&x,Fe=ut(),Ue=(0,o.useCallback)((e=>{e&&(n((t=>({...t,mediaTileData:{...t.mediaTileData,mediaFillType:d.EwX.Crop,fillCropCenterX:e.posX,fillCropCenterY:e.posY,fillCropScale:e.scale}}))),ht.ZP.reportImageFillTypeChange({apolloClient:D,tomeId:ne,tileId:ie,fillType:d.EwX.Crop})),Me(!1)}),[n,Me,D,ne,ie]);let Ve=null;ze?Ve=Ne===d.EwX.Fill?q({width:Ee,height:m},se):Ne===d.EwX.Fit?Q({width:Ee,height:m},se):null!=de&&null!=ce&&null!=ue?{posX:de,posY:ce,scale:ue}:ee({width:Ee,height:m},se):Ze===d.EwX.Crop&&se&&null!=de&&null!=ce&&null!=ue&&(Ve={posX:de,posY:ce,scale:ue});const He=je.inProgress||!1,Oe=(0,o.useMemo)((()=>G?(0,_.Jn)(G,je,me,K):null),[G,K,me,je]),[We,Ye]=(0,o.useState)(Oe);(0,o.useEffect)((()=>{Ye(Oe)}),[Oe]);const Ge=(0,r.sJ)(p.GP),Je=pe||H.M2,Xe=H.N3.get(Je)||Je,Ke=he||H.Io,qe=fe||"",Qe=(0,H.Gj)(G,me),et=(0,o.useCallback)((e=>(0,_.$V)(n,e)),[n]),tt=(0,o.useCallback)((e=>{Le((0,en.aY)(e))}),[Le]),{getActiveController:nt}=(0,o.useContext)(u.Z),it=nt(),lt=(0,r._8)((e=>{let{set:t}=e;return e=>{if(a&&e){const n=e[0];if(n.type.startsWith("video")){if(!it)return;const e={type:d.YUT.Video},i=(0,ft.Z)(ie,e,j,it,ne,D,N);t((0,en.vw)(i),(0,en.aY)(n))}else tt(n)}}}),[D,a,N,it,j,tt,ie,ne]),at=(0,o.useCallback)((()=>{z&&w()}),[z,w]),st=(0,o.useRef)(0),gt=(0,o.useCallback)((()=>{if(We&&st.current<=5){const e=We.split("#")[0];Ye(`${e}#${st.current}`),st.current+=1}else if(st.current>5){const e={retries:st.current,imageUrl:We,canUserEdit:a,isPreviewTile:f,isTileSelected:s,userCanEditTome:a,isUserOnline:Ge};E.v.addError(new Error("ImageTile failed to load image after retries. See context object."),e)}}),[a,We,Ge,f,s]),mt=(0,o.useCallback)((e=>{_e(!0),W.current=e.target,f||!a||se||setTimeout((()=>{const t=te(e.target.naturalWidth,e.target.naturalHeight),i=(0,H.Pb)(e.target);n((e=>({...e,mediaTileData:{...e.mediaTileData,aspectRatio:t,...i&&{backgroundColor:i}},__skipUndo:!0})))}),window.safari?1:0)}),[se,f,n,a]),vt=(0,o.useRef)(null),$t=(0,o.useRef)(!1),[kt,Et]=(0,o.useState)(!1),Rt=(0,o.useRef)(!1),St=(0,k.l)(p.VY);(0,o.useEffect)((()=>{!f&&s&&St&&kt&&(vt.current&&vt.current.focus(),(0,p.VY)(!1))}),[St,f,s,kt]);const[Pt,_t]=(0,o.useState)(ge),Lt=(0,o.useCallback)((e=>{_t(e<.65?d.dbt.Dark:d.dbt.Light)}),[_t]),Zt=(0,o.useRef)(null),Dt=(0,o.useRef)(null);(0,o.useEffect)((()=>{if(we&&a&&We&&Pe){let e=null,t=null;Zt.current&&Dt.current&&(e=Zt.current.getBoundingClientRect(),t=Dt.current.getBoundingClientRect()),t&&e&&Y(e,t,Lt,Xe,We,null,se||null,Ze)}}),[we,a,Pe,We,Xe,se,Ze,he,fe,de,ce,ue,Lt]),(0,o.useEffect)((()=>{n((e=>Pt===ge?e:{...e,mediaTileData:{...e.mediaTileData,captionTheme:Pt}}))}),[Pt,n]);const Mt=(0,o.useRef)(),[Nt,At]=(0,o.useState)(!1),zt=(0,o.useCallback)((()=>{At(!1),Mt.current&&(clearTimeout(Mt.current),Mt.current=void 0)}),[]),Bt=(0,o.useCallback)((()=>{At(!0),Mt.current&&clearTimeout(Mt.current),Mt.current=setTimeout((()=>{zt()}),3e3)}),[zt]);(0,o.useEffect)((()=>()=>{Mt.current&&clearTimeout(Mt.current),Re.current&&clearTimeout(Re.current)}),[]);const Ft=(0,o.useCallback)((()=>{x||Qe||s&&!Rt.current&&(Ae(Ze),Me(!0))}),[s,x,Ze,Me,Ae,Qe]),Ut=(0,k.l)(p.k6),Vt=(0,o.useCallback)((e=>(n((t=>({...t,mediaTileData:{...t.mediaTileData,captionText:e}}))),null)),[n]),Ht=(0,o.useCallback)((()=>{var e;null===(e=vt.current)||void 0===e||e.focus()}),[]),Ot=(0,o.useCallback)((e=>{e.stopPropagation(),w()}),[w]);let Wt=null;!f&&We&&Pe&&[d.ubC.Top,d.ubC.Bottom].includes(Ke)&&(null===(Z=qe)||void 0===Z?void 0:Z.length)>0&&(Wt=(0,i.jsx)(ae,{captionStyle:Ke,fontSize:be*Ut,maxWidth:(Ee-2*Ce)*Ut,padding:Ce*Ut,radius:Te*Ut,sidePadding:$e*Ut,verticalPadding:Ie*Ut,captionTheme:Pt,onClick:re.Z,children:(0,i.jsx)(U.Z,{labelId:`tile-caption-${t.id}`,plainContent:qe,disabled:!0,wrapText:!0,onContentChange:()=>null})}));let Yt=null,Gt=!0;if(!We){if(!a||t.type!==d.YUT.Image&&t.type!==d.YUT.ImageGenerative)return t.type===d.YUT.Giphy?(0,i.jsx)(jt,{tileId:t.id,updateContentLink:et,preview:f,height:m,width:Ee,tileType:t.type,sizes:v}):L===ct.sb.COMMAND_PROMPT_PREVIEW?(0,i.jsx)(It,{radius:xe}):null;{const e=(0,$.An)(d.YUT.Image)[0],n=me===d.Jpv.UploadInProgress;return(0,i.jsx)(Qt,{placeholderText:e.label,icon:e.icon,iconSize:v.embedPreviewIconSize,radius:xe,onFileDrop:lt,sizes:v,height:m,tileId:t.id,tileType:t.type,isLoading:n})}}{Gt=!1;const e=(0,i.jsx)(bt,{ref:Dt,children:(0,i.jsx)(xt,{"data-testid":f?void 0:"image_tile_img",src:We,layout:"fill",sizes:f?Ee*window.devicePixelRatio+"px":"(min-width: 1200px) 1200px, 100vw",priority:!0,onLoad:mt,onError:gt,$show:Pe,loader:(0,_.T8)(We),quality:f?50:void 0,draggable:!1,$fit:Ze===d.EwX.Fit})});if(null===Ve)Yt=e;else{const{size:{width:t,height:n},position:{x:o,y:r}}=X(Ve,{width:Ee,height:m},se);let l=0,s=0,d=0,c=0;if(B.current){const e=B.current.getBoundingClientRect();l=e.x,s=e.y,d=e.height,c=e.width}const u=L===ct.sb.PAGE_ENDPOINT?(0,i.jsx)(wt,{$left:o,$top:r,$width:t,$height:n,$backgroundImg:(0,_.BX)(We)}):(0,i.jsx)(yt,{onMouseDown:()=>{Rt.current=$t.current},$left:o,$top:r,$width:t,$height:n,$inCrop:ze,$canEdit:a,$preview:f,$presentMode:z,$isExpanded:x,"data-testid":"image_tile_image_div",children:e});Yt=(0,i.jsxs)(i.Fragment,{children:[u,ze&&(0,i.jsx)(V.Z,{top:0,left:0,zIndex:M.y$,children:(0,i.jsx)(ot,{tileX:l,tileY:s,tileHeight:d,tileWidth:c,tileRadius:xe,tileBackground:Xe,element:e,cropData:Ve,onSave:Ue,onCancel:()=>{Me(!1)},aspectRatio:se,tileElement:Wt})})]})}}const Jt=Gt?null:Xe,Xt=!f&&(He||!Pe),Kt=He?0===je.progress:!Pe,qt=!y&&!f&&!I&&!z&&!Fe&&!x&&We&&Pe&&s,tn=ve("commandPrompt.tiles.imageTileAddCaptionPlaceholder");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(Ct,{ref:B,"data-testid":"image_tile",$backgroundColor:Jt,$inCrop:ze,$isExpanded:x,$presentMode:z,variants:{unexpanded:{borderRadius:`${xe}px`},expanded:{borderRadius:0}},initial:"unexpanded",animate:x?"expanded":"unexpanded",onDoubleClick:Ft,onMouseEnter:y?void 0:Bt,onMouseMove:y?void 0:Bt,onMouseLeave:y?void 0:zt,onPointerDown:y?void 0:Bt,onClick:y?w:at,"data-tome-bypass-tap-navigation":x?"ImageTile__ImageDropArea":void 0,children:[Yt,(0,i.jsx)(dt,{isMobile:y,"data-tome-bypass-tap-navigation":"ImageTile__CenterTapToExpand"}),(0,i.jsx)(R.M,{children:qt&&Nt&&(0,i.jsx)(S.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:l.Z2,children:(0,i.jsx)(A,{"data-tome-bypass-tap-navigation":"ImageTile__ExpandButton",expandedScale:T,toggleExpand:Ot,ref:O,tileId:t.id})},"ExpandButton")})]}),!f&&(0,i.jsx)(ln,{tileId:t.id,updateTileData:n}),Xt&&(0,i.jsx)(F,{bottom:!1,right:!0,infinite:Kt,progress:je.progress}),We&&Pe&&[d.ubC.Top,d.ubC.Bottom].includes(Ke)&&(s&&!f&&!x||qe.length>0)&&!(ye&&0===qe.length)&&(0,i.jsx)(ae,{captionStyle:Ke,maxWidth:Ee-2*Ce,fontSize:be,padding:Ce,radius:Te,sidePadding:$e,verticalPadding:Ie,ref:Zt,captionTheme:Pt,onClick:re.Z,onMouseDown:Ht,children:(0,i.jsx)(U.Z,{labelId:`tile-caption-display-${t.id}`,ref:vt,plainContent:qe,placeholder:tn,emptyStateLength:tn.length/2*be,maxCharacterLimit:160,onContentChange:Vt,editorInFocusRef:$t,wrapText:!0,componentLifeCycleStateTracker:Et})}),Be&&(0,i.jsx)(V.Z,{top:0,left:0,zIndex:M.y$,children:(0,i.jsx)(Tt,{"data-testid":"exit_expand_mode_button",children:(0,i.jsx)(rt.Z,{style:{width:28,height:28}})})})]})},sn=n(67631),dn=n.n(sn),cn=n(42708),un=n(64364),pn=n(17625),hn=n(41243);const fn=(e,t)=>{const{style:n,...o}=e;return(0,i.jsx)(L.Z,{ref:t,style:{...n},viewBox:"0 0 64 64",...o,children:(0,i.jsx)("path",{d:"M20 46.6906V17.3094C20 14.643 22.8944 12.9835 25.1956 14.3305L50.292 29.021C52.5693 30.3541 52.5693 33.6459 50.292 34.979L25.1956 49.6695C22.8944 51.0165 20 49.357 20 46.6906Z"})})};var gn=(0,o.forwardRef)(fn);const mn=(0,n(15045).createFFmpeg)({log:!1});function vn(){const e=(0,k.l)(p.ML),t=(0,k.l)(p.DS),n=(0,o.useCallback)(((e,t)=>{const n={videoData:e,onComplete:t};(0,p.ML)([...(0,p.ML)(),n])}),[]);return(0,o.useEffect)((()=>{const e=(0,p.ML)();if(!(0,p.DS)()&&e.length>0){(0,p.DS)(!0);const e=async()=>{mn.isLoaded()||await mn.load();const{videoData:e,onComplete:t}=(()=>{const e=(0,p.ML)(),t=e[0],n=e.slice(1);return(0,p.ML)([...n]),t})();mn.FS("writeFile","video",e),await mn.run("-i","video","-vframes","1","image.jpeg");const n=mn.FS("readFile","image.jpeg");mn.FS("unlink","video"),mn.FS("unlink","image.jpeg");t(URL.createObjectURL(new Blob([n],{type:"image/jpeg"}))),(0,p.DS)(!1)};e()}}),[e,t]),[n]}function wn(e,t){const n=(0,o.useRef)(),i=(0,o.useRef)(performance.now()),r=(0,o.useRef)(performance.now()),l=()=>{const t=performance.now(),o=(t-r.current)/1e3,a=(t-i.current)/1e3;e({time:o,delta:a}),i.current=t,n.current=requestAnimationFrame(l)};(0,o.useEffect)((()=>(n.current=requestAnimationFrame(l),()=>{n.current&&cancelAnimationFrame(n.current)})),t)}var yn=n(1759),xn=n(81735);var bn=e=>{const{isMobile:t,element:n,hoverElement:i,timeoutSeconds:l,isPageActive:a}=e,[s,d]=(0,o.useState)(!0),[c,u]=(0,o.useState)(!1),h=(0,o.useRef)(-1),f=(0,o.useRef)(-1),g=(0,r.sJ)(p.DH),m=(0,k.l)(p.ii),v=(0,o.useRef)(!1);let w;return(0,o.useEffect)((()=>{v.current=m}),[m]),(0,o.useEffect)((()=>{var e;const i=()=>{w&&clearTimeout(w),w=setTimeout((()=>{d(!0)}),1e3*l)},o=(e,t)=>{if(i(),n.current&&e!==h.current&&t!==f.current){const i=n.current.getBoundingClientRect();e>=i.left&&e<=i.right&&t<=i.bottom&&t>=i.top&&d(!1)}h.current=e,f.current=t},r=e=>{"Space"!==e.code||v.current||(i(),d(!1))},a=()=>{d(!0)};if(i(),t){const e=e=>o(e.touches[0].clientX,e.touches[0].clientY);return document.documentElement.addEventListener("touchstart",e),()=>document.documentElement.removeEventListener("touchstart",e)}const s=e=>o(e.clientX,e.clientY);window.addEventListener("mousemove",s),window.addEventListener("keydown",r);const c=n.current;return null===(e=c)||void 0===e||e.addEventListener("mouseleave",a),()=>{var e;w&&clearTimeout(w),window.removeEventListener("mousemove",s),window.removeEventListener("keydown",r),null===(e=c)||void 0===e||e.removeEventListener("mouseleave",a)}}),[]),(0,o.useEffect)((()=>{const e=()=>{u(!0)},t=()=>{u(!1)},n=i.current;return n&&(n.addEventListener("mouseenter",e),n.addEventListener("mouseleave",t)),()=>{n&&(n.removeEventListener("mouseenter",e),n.removeEventListener("mouseleave",t))}}),[i]),(0,o.useEffect)((()=>{(null!==g&&i.current||i.current&&null===g)&&u(!1)}),[g]),(0,o.useEffect)((()=>{a||d(!0),w&&clearTimeout(w)}),[a]),{isInactive:s&&!c}},Cn=n(111);const Tn=(e,t,n)=>Math.min(Math.max(e,t),n),In=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e-t+(n?t:0)+(n?-i:i)+(n?-1:1)},$n=(e,t,n)=>[(1-e)*n,t*n],kn=j.ZP.div.withConfig({displayName:"VideoTrim.styles__TrimPanel",componentId:"sc-92b1f3ba-0"})`
  width: ${e=>e.width}px;
  height: ${e=>e.height}px;
  background-color: ${e=>e.theme.colors.videoTrimPanelBackground};
  border-radius: 20px;
  border: 1px solid ${e=>e.theme.colors.videoTrimPanelBorder};
  backdrop-filter: blur(50px);
`,En=j.ZP.div.withConfig({displayName:"VideoTrim.styles__FilmstripTrimmer",componentId:"sc-92b1f3ba-1"})`
  margin-left: ${e=>e.marginLeft}px;
  background: ${e=>e.theme.colors.uiAccent};
  width: ${e=>e.width}px;
  height: ${e=>e.height}px;
  clip-path: ${e=>{const[t,n]=$n(e.rightHandlePercentage,e.leftHandlePercentage,e.width);return`inset(0 ${t}px 0 ${n}px)`}};
`,Rn=j.ZP.div.withConfig({displayName:"VideoTrim.styles__FilmstripContainer",componentId:"sc-92b1f3ba-2"})`
  width: 100%;
  height: ${e=>e.height}px;
  position: absolute;
  bottom: 12px;
`,Sn=j.ZP.canvas.withConfig({displayName:"VideoTrim.styles__FilmstripCanvas",componentId:"sc-92b1f3ba-3"})`
  border-radius: 4px;
  position: absolute;
  bottom: 2px;
  margin-left: ${e=>e.offset}px;
`,Pn=j.ZP.div.withConfig({displayName:"VideoTrim.styles__DragHandle",componentId:"sc-92b1f3ba-4"})`
  height: ${e=>e.height}px;
  width: ${e=>e.width}px;
  background: ${e=>e.theme.colors.uiAccent};
  position: absolute;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  left: ${e=>In(e.offset,e.width,e.right,e.percentOffset)}px;
  ${e=>e.right?"border-radius: 0 8px 8px 0;":"border-radius: 8px 0 0 8px;"}
`,_n=j.ZP.div.withConfig({displayName:"VideoTrim.styles__DragHandleNotch",componentId:"sc-92b1f3ba-5"})`
  height: 36%;
  width: 4px;
  border-radius: ${e=>{let{theme:t}=e;return t.borderRadius.sm}};
  background-color: ${e=>e.theme.colors.videoTrimDragHandleNotch};
`,jn=j.ZP.canvas.withConfig({displayName:"VideoTrim.styles__ScreenshotCanvas",componentId:"sc-92b1f3ba-6"})`
  display: none;
`,Ln=j.ZP.video.withConfig({displayName:"VideoTrim.styles__VideoPlayer",componentId:"sc-92b1f3ba-7"})`
  width: ${e=>e.width}px;
  height: ${e=>e.height}px;
  display: none;
`,Zn=j.ZP.div.withConfig({displayName:"VideoTrim.styles__TrimText",componentId:"sc-92b1f3ba-8"})`
  top: 17px;
  left: 16px;
  position: absolute;
  color: ${e=>e.theme.colors.videoTrimPanelText};
  font-size: ${e=>e.theme.fontSizes.smmd};
  font-weight: bold;
`,Dn=j.ZP.div.withConfig({displayName:"VideoTrim.styles__ButtonContainer",componentId:"sc-92b1f3ba-9"})`
  position: absolute;
  top: 12px;
  right: 12px;

  display: flex;
  flex-direction: row;
  gap: 8px;
`;var Mn=e=>{let{uiSizes:t,videoHeight:n,videoWidth:r,videoDuration:l,videoSrc:a,initTrimStart:s,initTrimEnd:d,cancelTrim:c,isLocalVideo:u,mainPlayer:p,setPreviewTrim:h,setTrim:f}=e;const{height:g,width:m,filmstripHeight:v,filmstripWidth:w,trimmerWidth:y,trimmerHeight:x}=t,b=v,C=v*(r/n),T=Math.ceil(w/C)+1,I=l/T,{t:$}=(0,P.$G)(),k=(0,j.Fg)(),R=(0,o.useRef)(null),S=(0,o.useRef)(null),_=(0,o.useRef)(null),L=(0,o.useMemo)((()=>(0,Cn.Z)((e=>{void 0===e||Number.isNaN(e)||(p.currentTime=e)}),400)),[p]),[Z,D]=(0,o.useState)([]),M=(0,o.useRef)(null),N=(0,o.useRef)(null),A=(0,o.useRef)(null),[z,B]=(0,o.useState)(d/l),[F,U]=(0,o.useState)(s/l);(0,o.useEffect)((()=>{const e=R.current;if(e&&!u&&!e.canPlayType("application/vnd.apple.mpegurl")&&dn().isSupported()){const t=new(dn())({startLevel:0,capLevelToPlayerSize:!0,progressive:!0});t.loadSource(a),t.attachMedia(e)}}),[a,u]);const V=(0,o.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F;try{if(S.current&&R.current){const n=S.current.getContext("2d");if(n){n.fillStyle=k.colors.videoTrimFilmstripBackground,n.fillRect(0,0,w,v);for(let e=0;e<Z.length;e++)n.drawImage(Z[e],C*e,0,C,b);n.fillStyle=k.colors.videoTrimFilmstripBackground,n.fillRect(w-(1-e)*w,0,w,v),n.fillRect(0,0,w*t,v)}}}catch(e){E.v.addError(e),console.error("Error drawing filmstrip",e)}}),[z,F,k.colors.videoTrimFilmstripBackground,w,v,Z,C,b]);(0,o.useEffect)((()=>{R.current&&V()}),[R,w,v,V]),(0,o.useEffect)((()=>{if(0===Z.length&&R.current){R.current.play().then((()=>{R.current.currentTime=.1})).catch((()=>!1))}V()}),[R,Z,V]);const H=(y-w)/2,O=(m-w)/2,W=(0,se.c0)((e=>{let{down:t,movement:[n]}=e;let i=z+n/w;i=Tn(i,F,1);const o=In(O+w,H,!0,(1-i)*w);M.current&&(M.current.style.left=`${o}px`);const[r,a]=$n(i,F,w);A.current&&(A.current.style.clipPath=`inset(0 ${r}px 0 ${a}px)`),L(i*l),t||(B(i),h(F*l,i*l)),V(i)})),Y=(0,se.c0)((e=>{let{down:t,movement:[n]}=e;let i=F+n/w;i=Tn(i,0,z);const o=In(O,H,!1,i*w);N.current&&(N.current.style.left=`${o}px`);const[r,a]=$n(z,i,w);A.current&&(A.current.style.clipPath=`inset(0 ${r}px 0 ${a}px)`),L(i*l),t||(U(i),h(i*l,z*l)),V(z,i)}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(kn,{height:g,width:m,children:[(0,i.jsx)(Zn,{children:$("commandPrompt.tiles.videoTile.videoTrim.trimTitle")}),(0,i.jsxs)(Dn,{children:[(0,i.jsx)(ve,{onClick:c,children:$("commandPrompt.tiles.videoTile.videoTrim.cancelTrimButton")}),(0,i.jsx)(ve,{color:"primary",onClick:()=>f(F*l,z*l),children:$("commandPrompt.tiles.videoTile.videoTrim.doneTrimButton")})]}),(0,i.jsxs)(Rn,{height:x,children:[(0,i.jsx)(En,{ref:A,height:x,width:w,marginLeft:(m-w)/2,rightHandlePercentage:z,leftHandlePercentage:F}),(0,i.jsx)(Sn,{height:v,width:w,offset:(m-w)/2,ref:S}),(0,i.jsx)(Pn,{...Y(),"data-disable-drag":!0,"data-testid":"trim_left_handle",ref:N,height:x,width:H,offset:O,percentOffset:F*w,children:(0,i.jsx)(_n,{})}),(0,i.jsx)(Pn,{right:!0,...W(),"data-disable-drag":!0,ref:M,height:x,width:H,offset:O+w,percentOffset:(1-z)*w,children:(0,i.jsx)(_n,{})})]})]}),(0,i.jsx)(Ln,{muted:!0,onSeeked:()=>{var e,t,n;null===(t=null===(e=_.current)||void 0===e?void 0:e.getContext("2d"))||void 0===t||t.drawImage(R.current,0,0,C,b);const i=(null===(n=_.current)||void 0===n?void 0:n.toDataURL("image/jpeg"))||"",o=new Image;if(o.src=i,D([...Z,o]),Z.length<T){const e=R.current.currentTime+I;R.current.currentTime=e}},ref:R,crossOrigin:"anonymous",src:a,width:C,height:b}),(0,i.jsx)(jn,{ref:_,width:C,height:b})]})},Nn=n(25854);const An=j.ZP.div.withConfig({displayName:"ImageWithLoader__LoadingDiv",componentId:"sc-3260caf6-0"})`
  width: 100%;
  height: 100%;
`;var zn=e=>{const{src:t,alt:n,...r}=e,[l,a]=(0,o.useState)(!1),s=(0,o.useRef)();return(0,o.useEffect)((()=>{if(t&&t!==s.current&&(s.current=t,!t.startsWith("blob:"))){const e=new Image;e.src=t,e.onload=()=>a(!1),a(!0)}}),[t]),(0,i.jsx)(i.Fragment,{children:l?(0,i.jsx)(An,{children:(0,i.jsx)(Nn.Z,{shouldCenter:!0})}):(0,i.jsx)("img",{src:t,alt:n,...r})})};const Bn=(0,j.ZP)(S.E.div).withConfig({displayName:"VideoTile.styles__VideoFrame",componentId:"sc-1d616df5-0"})`
  width: 100%;
  height: 100%;
  // show background color of the video tile if we don't show the placeholder background
  ${e=>{let{$showPlaceholderBackground:t,$backgroundColor:n}=e;return!t&&`\n    background-color: ${n};\n  `}}
  display: flex; /* used to center the placeholder label */
  justify-content: center; /* align horizontal */
  align-items: center; /* align vertical */
  position: relative;
  overflow: ${e=>e.$inCrop?"inherit":"hidden"};
  // Needed in safari for vidoe border radius https://gist.github.com/ayamflow/b602ab436ac9f05660d9c15190f4fd7b
  -webkit-mask-image: -webkit-radial-gradient(white, black);
`,Fn=j.ZP.div.withConfig({displayName:"VideoTile.styles__VideoDiv",componentId:"sc-1d616df5-1"})`
  ${e=>{let{$crop:t}=e;return t&&j.iv`
      position: absolute;
      top: 0;
      left: 0;
      transform: translate(
        ${e=>e.$left}px,
        ${e=>e.$top}px
      );
      width: ${e=>e.$width}px;
      height: ${e=>e.$height}px;
    `}};

  ${e=>{let{$crop:t}=e;return!t&&j.iv`
      display: flex;
      width: 100%;
      height: 100%;
    `}};

  visibility: ${e=>e.$inCrop?"hidden":"inherit"};
  z-index: -1; // Layer the video behind the controls
`,Un=j.ZP.video.withConfig({displayName:"VideoTile.styles__VideoPlayer",componentId:"sc-1d616df5-2"})`
  width: 100%;
  height: 100%;
  object-fit: ${e=>{let{$fit:t}=e;return t?"contain":"cover"}};
  position: absolute;
`,Vn=(0,j.ZP)(zn).withConfig({displayName:"VideoTile.styles__ImageWrapper",componentId:"sc-1d616df5-3"})`
  width: 100%;
  height: 100%;
  object-fit: cover;
`,Hn=j.ZP.img.withConfig({displayName:"VideoTile.styles__PreviewImageWrapper",componentId:"sc-1d616df5-4"})`
  ${e=>{let{$crop:t}=e;return t&&j.iv`
      position: absolute;
      top: 0;
      left: 0;
      transform: translate(
        ${e=>e.$left}px,
        ${e=>e.$top}px
      );
      width: ${e=>e.$width}px;
      height: ${e=>e.$height}px;
    `}};

  ${e=>{let{$crop:t}=e;return!t&&j.iv`
      position: absolute;
      min-width: 100%;
      max-width: 100%;
      min-height: 100%;
      max-height: 100%;
    `}};

  object-fit: ${e=>{let{$fit:t}=e;return t?"contain":"cover"}};
`,On=j.ZP.div.withConfig({displayName:"VideoTile.styles__TrimContainer",componentId:"sc-1d616df5-5"})`
  position: absolute;
  left: ${e=>{let{$left:t}=e;return t}}px;
  top: ${e=>{let{$top:t}=e;return t}}px;
`,Wn=(0,j.ZP)(S.E.div).withConfig({displayName:"VideoTile.styles__LargePlayBackground",componentId:"sc-1d616df5-6"})`
  height: 80px;
  width: 80px;
  font-size: 100px;
  backdrop-filter: blur(50px);
  position: absolute;
  border-radius: 100%;
  background: ${e=>{let{theme:t}=e;return t.colors.videoLargePlayBackground}};
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  & ${L.K} {
    fill: ${e=>{let{theme:t}=e;return t.colors.videoLargePlayButton}}};
  }
`,Yn=j.ZP.div.withConfig({displayName:"VideoTile.styles__BufferContainer",componentId:"sc-1d616df5-7"})`
  height: 64px;
  width: 64px;
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
`;var Gn=e=>{let{playerRef:t,tileX:n,tileY:r,trimStart:l,trimEnd:a,setTrimStart:s,setTrimEnd:d,trimPanelSizes:c,pagePadding:u,tileHeight:h,tileWidth:f,useLocal:g,videoSrc:m,trimStartData:v,trimEndData:w,updateTileData:y}=e;const x=u+11;let b=r+h+x;b+c.height>window.innerHeight&&(b=window.innerHeight-c.height-x);const C=(0,o.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]),T=(0,o.useCallback)(((e,t)=>{s(e),d(t)}),[d,s]),{t:I}=(0,P.$G)(),$=(0,o.useCallback)(((e,t)=>{y((n=>({...n,videoTileData:{...n.videoTileData,trimStart:e,trimEnd:t}}))),(0,p.PS)(!1),(0,p.ak)({message:I("commandPrompt.tiles.videoTile.videoUploadHandler.videoTrimSavedMessage"),action:"undo"})}),[y,I]),k=(0,o.useCallback)((()=>{(0,p.PS)(!1),s(v),d(w)}),[d,s,w,v]);return t.current?(0,i.jsx)(V.Z,{top:0,left:0,zIndex:M.y$,children:(0,i.jsx)(On,{$left:n-(c.width-f)/2,$top:b,onMouseDown:C,children:(0,i.jsx)(Mn,{uiSizes:c,isLocalVideo:g,videoWidth:t.current.videoWidth,videoHeight:t.current.videoHeight,videoDuration:t.current.duration,videoSrc:m,initTrimStart:l,initTrimEnd:a||t.current.duration,cancelTrim:k,mainPlayer:t.current,setPreviewTrim:T,setTrim:$})})}):null},Jn=n(91292);const Xn=(e,t)=>{const{style:n,...o}=e;return(0,i.jsx)(L.Z,{ref:t,style:{...n},viewBox:"0 0 16 16",...o,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.2525 12.5051H4.7525V12.5051C4.33829 12.5051 4.0025 12.1693 4.0025 11.7551V4.25513V4.25513C4.0025 3.84091 4.33829 3.50513 4.7525 3.50513H6.2525V3.50513C6.66671 3.50513 7.0025 3.84091 7.0025 4.25513V11.7551V11.7551C7.0025 12.1693 6.66671 12.5051 6.2525 12.5051V12.5051ZM9.7525 12.5051V12.5051C9.33829 12.5051 9.0025 12.1693 9.0025 11.7551V4.25513V4.25513C9.0025 3.84091 9.33829 3.50513 9.7525 3.50513H11.2525V3.50513C11.6667 3.50513 12.0025 3.84091 12.0025 4.25513V11.7551C12.0025 12.1693 11.6667 12.5051 11.2525 12.5051H9.7525Z",fill:"white"})})};var Kn=(0,o.forwardRef)(Xn);var qn=(0,o.forwardRef)(((e,t)=>(0,i.jsx)(L.Z,{ref:t,viewBox:"0 0 20 20",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.9216 15.7355V15.7355C13.6914 15.481 13.711 15.0882 13.9655 14.858C13.9673 14.8563 13.9692 14.8546 13.971 14.853H13.971C16.6477 12.6463 17.0286 8.68748 14.8218 6.01083C14.5661 5.70065 14.2812 5.41574 13.971 5.16002V5.16002C13.7138 4.93283 13.6895 4.54017 13.9167 4.28299C13.9183 4.28115 13.9199 4.27933 13.9216 4.27752V4.27752C14.1535 4.02607 14.5431 4.00415 14.8018 4.22802V4.22802C17.9932 6.89526 18.4181 11.6446 15.7508 14.836C15.4634 15.18 15.1458 15.4976 14.8018 15.7851V15.7851C14.5431 16.0089 14.1535 15.987 13.9216 15.7355V15.7355ZM12.5085 14.3042V14.3042C12.21 14.4717 11.8326 14.3742 11.6525 14.0832V14.0832C11.4746 13.7931 11.5655 13.4137 11.8556 13.2357C11.8614 13.2322 11.8672 13.2287 11.8731 13.2254V13.2254C13.6509 12.2228 14.2793 9.96883 13.2767 8.19101C12.9456 7.60391 12.4602 7.11854 11.8731 6.78744V6.78744C11.5773 6.61916 11.4739 6.24294 11.6422 5.94713C11.6455 5.94124 11.649 5.9354 11.6525 5.92963V5.92963C11.8326 5.63859 12.21 5.54114 12.5085 5.7086V5.7086C14.8821 7.06417 15.7074 10.0873 14.3518 12.4609C13.9131 13.229 13.2766 13.8656 12.5085 14.3042L12.5085 14.3042ZM2.50348 8.13386V8.13381C2.50366 7.61593 2.9236 7.19623 3.44149 7.19636H5.16043V7.19636C5.49193 7.19636 5.80988 7.06478 6.04443 6.83051L8.62324 4.25467V4.25467C8.86765 4.01058 9.26366 4.01085 9.50774 4.25526C9.62478 4.37245 9.69055 4.53127 9.69064 4.69689V15.3188V15.3187C9.69047 15.6643 9.4102 15.9443 9.06464 15.9441C8.89893 15.944 8.74002 15.8782 8.62278 15.7611L6.04657 13.1877V13.1877C5.81201 12.9534 5.49403 12.8219 5.16251 12.8219H3.44145H3.44145C2.92356 12.822 2.50362 12.4023 2.50348 11.8844L2.50348 8.13386Z"})})));var Qn=(0,o.forwardRef)(((e,t)=>(0,i.jsx)(L.Z,{ref:t,viewBox:"0 0 20 20",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1898 4.69197V9.71475V9.71475C12.1896 9.87778 12.0573 10.0098 11.8943 10.0096C11.8161 10.0096 11.7412 9.97847 11.6859 9.92322L8.88662 7.1265V7.1265C8.70806 6.94824 8.70781 6.65898 8.88607 6.48042C8.88633 6.48015 8.8866 6.47989 8.88687 6.47962L11.1219 4.24962V4.24962C11.3665 4.00544 11.7627 4.00577 12.0069 4.25035C12.1239 4.36755 12.1896 4.52636 12.1898 4.69197L12.1898 4.69197ZM5.88975 7.66569L11.8235 13.5941V13.5941C12.058 13.8283 12.1898 14.1461 12.1898 14.4775V15.3087V15.3087C12.1894 15.6545 11.9088 15.9344 11.563 15.934C11.3975 15.9338 11.2387 15.8681 11.1215 15.7511L8.54337 13.1787V13.1787C8.30856 12.9446 7.99044 12.8131 7.65881 12.8131H5.93662V12.8131C5.41855 12.8134 4.99832 12.3937 4.998 11.8756V8.1275V8.12747C4.99789 8.03303 5.01229 7.93914 5.04069 7.84907V7.84907C5.13693 7.58289 5.43072 7.44512 5.69691 7.54135C5.76976 7.56769 5.83569 7.6102 5.88975 7.66568L5.88975 7.66569ZM3.30225 3.31162V3.31162C3.5465 3.06751 3.94237 3.06751 4.18662 3.31162L16.6972 15.8133V15.8133C16.9414 16.0576 16.9412 16.4535 16.697 16.6976C16.4527 16.9417 16.0568 16.9416 15.8127 16.6973L3.30237 4.19575V4.19575C3.05827 3.95194 3.05803 3.55641 3.30184 3.31231C3.30202 3.31213 3.3022 3.31196 3.30237 3.31178L3.30225 3.31162Z"})}))),ei=n(79249);const ti=(0,j.ZP)(S.E.div).withConfig({displayName:"VideoPlayerControls.styles__ControlBackground",componentId:"sc-65e5b591-0"})`
  width: calc(100% - ${32}px);
  max-width: ${346}px;
  height: ${32}px;
  background: ${e=>e.theme.colors.overlayButtonGray};
  position: absolute;
  bottom: ${16}px;
  border-radius: ${e=>{let{theme:t}=e;return t.borderRadius.sm}};
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  font-family: ${e=>{let{theme:t}=e;return t.fonts.ui}};
  // IMPORTANT: On mobile, prevent horizontal swipes from causing
  // the page slider to swipe to the next page.
  touch-action: none;

  @supports ${ei.Gp.safariOnIos} {
    // For iOS: hide the default indicator shown when a user taps.
    &,
    * {
      -webkit-tap-highlight-color: transparent;
    }
  }

  & ${L.K} {
    fill: ${e=>{let{theme:t}=e;return t.colors.videoLargePlayButton}}};
  }
`,ni=(0,j.ZP)(S.E.div).withConfig({displayName:"VideoPlayerControls.styles__ControlPauseWrapper",componentId:"sc-65e5b591-1"})`
  margin-left: ${10}px;
  margin-right: ${12}px;
  margin-top: ${3}px;
`,ii=j.ZP.div.withConfig({displayName:"VideoPlayerControls.styles__ScrubberBackground",componentId:"sc-65e5b591-2"})`
  width: 100%;
  min-width: 10px;
  height: ${2}px;
  background: ${e=>e.theme.colors.contrast20};
  margin-right: ${12}px;
`,oi=j.ZP.div.withConfig({displayName:"VideoPlayerControls.styles__ScrubberBackgroundClickArea",componentId:"sc-65e5b591-3"})`
  width: 100%;
  min-width: 10px;
  height: 28px;
  position: relative;
  top: -41px;
  overflow: hidden;
`,ri=j.ZP.div.attrs((e=>{let{percentageComplete:t}=e;return{style:{clipPath:`inset(0 ${100*(1-t)}% 0 0)`}}})).withConfig({displayName:"VideoPlayerControls.styles__ScrubberForeground",componentId:"sc-65e5b591-4"})`
  width: 100%;
  height: ${2}px;
  background: ${e=>e.theme.colors.videoControls};
`,li=j.ZP.div.withConfig({displayName:"VideoPlayerControls.styles__ScrubberKnob",componentId:"sc-65e5b591-5"})`
  // Make the knob large enough to easily tap on mobile.
  width: ${48}px;
  height: ${48}px;
  position: relative;
  margin-top: -${22}px;
  top: 0;
  left: 0;
  z-index: ${M.Dl};
  cursor: default;
  user-select: none;

  // The actual dot.
  &::before {
    background-color: ${e=>{let{theme:t}=e;return t.colors.videoControls}};
    border-radius: ${e=>{let{theme:t}=e;return t.borderRadius.full}};
    content: '';
    display: block;
    height: ${8}px;
    margin-top: ${1}px;
    pointer-events: none;
    position: absolute;
    transform: scale(1);
    transform-origin: 50% 50%;
    top: ${16}px;
    width: ${8}px;
  }

  // Increase the size of the knob upon mouse hover.
  // Exclude touch-only devices because the 'dragging' state will be in effect anyway.
  // Also, since iOS applies ':hover' styles, the knob can get into a weird state
  // where its size fluctuates based on how it's tapped.
  @media ${ei.be.mouse} {
    &:hover {
      &::before {
        transform: scale(${1.3});
      }
    }
  }

  // Increase the size of the knob even more.
  &.dragging {
    cursor: pointer;
    // On touch-only devices, this will be the size when the knob is being dragged.
    &::before {
      transform: scale(${1.5});
    }

    // Make the knob smaller when it reaches the edges of the timeline
    // (mainly so the knob doesn't touch the timestamp on the right).
    &:not([style])::before,
    &[style*='left: 0%']::before,
    &[style*='left: 100%']::before {
      transform: scale(${1.3});
    }
  }
`,ai=j.ZP.div.withConfig({displayName:"VideoPlayerControls.styles__Timecode",componentId:"sc-65e5b591-6"})`
  font-size: 10px;
  font-weight: 400;
  line-height: 13px;
  height: 13px;
  color: ${e=>e.theme.colors.videoControls};
  margin-right: ${12}px;
  white-space: nowrap;
  cursor: default;
  text-align: right;
  &::before {
    // Prevent the width from jumping when the time changes
    // (e.g., from 0:00 -> 0:01 -> 0:02).
    display: block;
    content: attr(data-placeholder);
    margin-bottom: -13px;
    pointer-events: none;
    user-select: none;
    visibility: hidden;
  }
`,si=(0,j.ZP)(S.E.div).withConfig({displayName:"VideoPlayerControls.styles__ControlVolumeWrapper",componentId:"sc-65e5b591-7"})`
  margin-right: ${12}px;
  margin-top: ${3}px;
`,di=(0,j.ZP)(S.E.div).withConfig({displayName:"VideoPlayerControls.styles__ControlExpandWrapper",componentId:"sc-65e5b591-8"})`
  margin-right: ${10}px;
  margin-top: ${3}px;
  opacity: ${e=>e.$disabled?.25:1};
`,ci=e=>{const t=e/60,n=Math.floor(t),i=n.toString(),o=60*(t-n);return`${i}:${o>=10?o.toString().slice(0,2):`0${o.toString().slice(0,1)}`}`},ui=e=>`${new Array(e).fill("0").join("")}`;var pi=(0,o.forwardRef)(((e,t)=>{var n;const{videoPlayerRef:r,pauseVideo:a,playVideo:s,isPlaying:d,toggleExpand:c,isExpanded:u,disableExpand:p,expandedScale:h,toggleMute:f,isMuted:g,trimStart:m,trimEnd:v}=e,w=(0,o.useRef)(null),y=(0,o.useRef)(null),x=(0,o.useRef)(null),b=(0,o.useRef)(null),C=(0,o.useRef)(!1),T=(0,o.useRef)(0),I=(0,o.useRef)(null),$=(null===(n=I.current)||void 0===n?void 0:n.getBoundingClientRect().width)||200,k=$>=150,E=$>=200,R=$>=100,S=$>=100,P=v-m,_=(e=>{const[t,n]=ci(e||0).split(":"),i=`${t}`.length,o=`${n}`.length,r=[ui(i),ui(o)].join(":");return`${r} / ${r}`})(P),j=Math.max(r.current?r.current.currentTime-m:0,0),L=j/P;wn((()=>{const e=v-m,t=Math.max(r.current?r.current.currentTime-m:0,0),n=t/e,i=`${ci(t)} / ${ci(e)}`;if(w.current&&(w.current.innerHTML=i),y.current&&(y.current.style.clipPath=`inset(0 ${100*(1-n)}% 0 0)`),b.current&&!C.current&&y.current&&(b.current.style.left=100*n+"%"),C.current&&r.current&&b.current){const e=parseFloat(b.current.style.left.slice(0,-1))/100*P+m;Number.isFinite(e)&&(r.current.currentTime=e)}}),[v,m]);const M=(0,se.c0)((e=>{let{event:t,down:n,first:i,movement:[o]}=e;var r;if(null===(r=t)||void 0===r||r.stopPropagation(),b.current&&b.current.classList.toggle("dragging",n),n&&i&&(C.current=!0,b.current&&(T.current=parseFloat(b.current.style.left.slice(0,-1)))),n){if(x.current){const e=o/x.current.getBoundingClientRect().width*100,t=Tn(T.current+e,0,100);b.current&&(b.current.style.left=`${t}%`)}}else C.current=!1,T.current=0})),N=(0,i.jsxs)(ii,{ref:x,children:[(0,i.jsx)(ri,{percentageComplete:L,ref:y}),(0,i.jsx)(li,{ref:b,...M(),onClick:re.Z}),(0,i.jsx)(oi,{onClick:e=>{if(x.current&&r.current){e.stopPropagation();const t=x.current.getBoundingClientRect(),n=t.width,i=e.clientX-t.left,o=Tn(i/n,0,1);r.current.currentTime=o*P+m}}})]}),A=(0,i.jsxs)(ai,{ref:w,"data-placeholder":_,children:[ci(j)," / ",ci(P)]}),z=(0,i.jsx)(si,{onClick:e=>{e.stopPropagation(),f()},whileTap:{scale:.8},children:g?(0,i.jsx)(Qn,{style:{width:"16px",height:"16px"}}):(0,i.jsx)(qn,{style:{width:"16px",height:"16px"}})}),B=(0,i.jsx)(di,{onClick:e=>{e.stopPropagation(),p||c()},whileTap:{scale:p?1:.8},$disabled:p,children:u?(0,i.jsx)(Z,{style:{width:16,height:16}}):(0,i.jsx)(D,{style:{width:16,height:16}})});return(0,i.jsxs)(ti,{"data-tome-bypass-tap-navigation":"VideoTile__VideoPlayerControls",initial:{opacity:0},animate:{opacity:1,scale:1/h},exit:{opacity:0},transition:l.Z2,ref:(0,Jn.l)([t,I]),"data-disable-drag":!0,onMouseDown:re.Z,onClick:re.Z,children:[(0,i.jsx)(ni,{onClick:e=>{e.stopPropagation(),d?a():s()},whileTap:{scale:.8},children:d?(0,i.jsx)(Kn,{style:{width:"16px",height:"16px"}}):(0,i.jsx)(gn,{style:{width:"16px",height:"16px"}})}),k&&N,E&&A,R&&z,S&&B]})}));var hi=e=>{const{videoPlayerRef:t}=e,[n,r]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{var e,n,i;const o=()=>r(!1),l=()=>r(!0),a=t.current;return null===(e=a)||void 0===e||e.addEventListener("playing",o),null===(n=a)||void 0===n||n.addEventListener("pause",o),null===(i=a)||void 0===i||i.addEventListener("waiting",l),()=>{var e,t,n;null===(e=a)||void 0===e||e.removeEventListener("playing",o),null===(t=a)||void 0===t||t.removeEventListener("pause",o),null===(n=a)||void 0===n||n.removeEventListener("waiting",l)}}),[t]),n?(0,i.jsx)(z.Z,{width:64,height:64,infinite:!0,light:!1,circleWidth:4,spinnerWidth:6}):null},fi=n(12128);var gi=n(57602);var mi=e=>{let{tileId:t,videoStatus:n,videoId:i,updateTileData:l,persistedUploadStatus:a}=e;const s=(0,r.sJ)((0,en.vw)(t)),c=(0,r.rb)((0,en.vw)(t)),u=function(e,t){const n=(0,at.j)(),i=(0,gi.Z)({tomeId:n}),l=(0,r.Zl)((0,en.vw)(t)),a=(0,r.Zl)((0,tn.$)(n)),s=(0,o.useCallback)((t=>{l((e=>({...e,inProgress:!0}))),e((e=>({...e,videoTileData:{...e.videoTileData,trimStart:0,trimEnd:null,url:null,thumbnailUrl:null},mediaTileData:{...e.mediaTileData,aspectRatio:null,backgroundColor:null,fillCropCenterX:null,fillCropCenterY:null,fillCropScale:null,mediaFillType:null,mediaStatus:d.Jpv.UploadInProgress},fileUploadTileData:{createdAt:(new Date).toISOString(),uploadId:t},__skipRedo:!0})))}),[l,e]),c=(0,o.useCallback)((e=>{l((t=>({...t,progress:e})))}),[l]),{t:u}=(0,P.$G)(),p=(0,o.useCallback)((()=>{a({title:u("hooks.uploadToVideoFailedTitle"),subtitle:u("hooks.uploadToVideoFailedSubtitle")}),e((e=>({...e,mediaTileData:{...e.mediaTileData,mediaStatus:d.Jpv.WaitingForCreation},fileUploadTileData:{uploadId:null,createdAt:null},__skipUndo:!0})))}),[a,e,u]),h=(0,o.useCallback)((()=>{l((e=>({...e,progress:1})))}),[l]);return(0,o.useCallback)((e=>{let{file:n,localVideoUrl:o,uploadId:r}=e;s(r),i(n,n.name,o,r,t,void 0,c,h,p),E.v.addAction("Upload video",{uploadVideo:{uploadId:r},file:{name:n.name,type:n.type}})}),[h,p,i,s,t,c])}(l,t),h=(0,un.Z)(n);(0,o.useEffect)((()=>{a===d.Jpv.Ready&&c()}),[a,c]),(0,o.useEffect)((()=>{const{uploadId:e,localMediaUrl:t,localFileData:n,inProgress:i}=s;e&&t&&n&&!i&&u({file:n,localVideoUrl:t,uploadId:e})}),[s,u]);const f=(0,r._8)((e=>{let{snapshot:n,reset:i}=e;return()=>{const{inProgress:e,uploadId:o,progress:r}=n.getLoadable((0,en.vw)(t)).getValue();e&&E.v.addAction("Unmount while uploading video",{uploadVideo:{tileId:t,uploadId:o,progress:r}}),i((0,en.vw)(t))}}),[t]);(0,o.useEffect)((()=>f),[f]);const{t:g}=(0,P.$G)();return(0,o.useEffect)((()=>{void 0!==h&&h!==n&&(n===d.Kwn.Errored?(0,p.ak)({message:g("commandPrompt.tiles.videoTile.videoUploadHandler.tomeToastErrorMessage")}):n===d.Kwn.Ready&&E.v.addAction("fileUpload",{uploadVideo:{videoId:i,processed:Date.now()}}))}),[n,h,i,g]),null};let vi;var wi=e=>{let{radius:t,preview:l,selected:a,updateTileData:s,tileData:c,pageId:u="",editMode:f,sizes:g,isMobile:m,isExpanded:v,isTileEndpoint:w,toggleExpand:y,expandedScale:x,width:b,height:C,disableExpand:T,hideVideoControls:I}=e;var S,_,j,L,Z,D,N,A,z,B;const{id:O,tomeId:W,videoTileData:G,mediaTileData:J}=c,{autoplay:K,url:ne,thumbnailUrl:ie,trimStart:re,trimEnd:le,loop:se}=G||{},{aspectRatio:de,fillCropCenterX:ce,fillCropCenterY:ue,fillCropScale:pe,mediaFillType:he,backgroundColor:fe,captionTheme:ge,captionStyle:me,captionText:ve,mediaStatus:we}=J||{},{playerRef:ye,userControls:xe,autoPlayVideo:be,playVideo:Ce,pauseVideo:Te,isPlaying:Ie,setIsPlaying:$e,isMuted:ke,userPaused:Ee}=function(){const[e,t]=(0,o.useState)({paused:void 0,muted:void 0}),n=(0,o.useCallback)((n=>{t({...e,paused:n})}),[e]),i=(0,o.useCallback)((n=>{t({...e,muted:n})}),[e]),l=(0,r.sJ)(p.J$),a=(0,r.Zl)(p.J$),s=(0,fi.d)(),c=(0,o.useRef)(null),[u,f]=(0,o.useState)(!1),[g,m]=(0,o.useState)(!1),[v,w]=(0,o.useState)(!1),[y,x]=(0,o.useState)(!1);(0,o.useEffect)((()=>{var e;const t=c.current,n=()=>{var e;w(!!(null===(e=t)||void 0===e?void 0:e.muted))};return null===(e=t)||void 0===e||e.addEventListener("volumechange",n),()=>{var e;null===(e=t)||void 0===e||e.removeEventListener("volumechange",n)}}),[]);const b=(0,o.useCallback)((()=>{var e;c.current&&(c.current.muted=!0,null===(e=c.current)||void 0===e||e.play().then((()=>{f(!0)})).catch((()=>{f(!1)})),w(!0))}),[c,f]),C=(0,o.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c.current?(c.current.muted=!1,c.current.play().then((()=>{f(!0)})).catch((()=>{e&&b()}))):Promise.resolve(void 0)}),[c,b]),T=(0,o.useCallback)((()=>{var e;(null===(e=c.current)||void 0===e?void 0:e.muted)?b():C()}),[b,C]),I=(0,o.useCallback)((()=>{var e;null===(e=C())||void 0===e||e.then((()=>{n(!1)}))}),[C,n]),$=(0,r._8)((t=>{let{snapshot:n}=t;return t=>{var i,o;if(y)return;const r=null===(i=s)||void 0===i?void 0:i.rowIndex,a=(null===(o=s)||void 0===o?void 0:o.tileIndex)||0,{rowIdx:u,tileIdx:p}=n.getLoadable((0,h.pq)({tileId:t,tileType:d.YUT.Video})).getValue();let f=!1;(void 0===r||void 0===a||r!==u||r===u&&p<=a)&&(f=!0),!0!==e.paused&&(l||!0===e.muted||!1===f?b():(s&&(s.element=c.current,s.rowIndex=u,s.tileIndex=p),document.querySelectorAll("video").forEach((e=>{"isavoverlay"in e.dataset||(e.muted=!0)})),C(!0)),x(!0))}}),[y,s,e.paused,e.muted,l,b,C]),k=(0,o.useCallback)((()=>{f(!1),c.current&&u&&!c.current.paused&&(f(!1),c.current.pause(),s&&(s.element=null,s.rowIndex=null,s.tileIndex=null))}),[c,u,s]),E=(0,o.useCallback)((()=>{k(),n(!0)}),[k,n]),R=(0,o.useCallback)((()=>{c.current&&(document.querySelectorAll("video").forEach((e=>{e.paused||"isavoverlay"in e.dataset||(e.muted=!0)})),c.current.muted=!v,w(!v),a(!v))}),[c,v,a]);return{userControls:{play:I,pause:E,toggleMute:(0,o.useCallback)((()=>{c.current&&(i(!c.current.muted),R())}),[i,R,c])},playerRef:c,autoPlayVideo:$,playVideo:T,pauseVideo:k,isPlaying:u,setIsPlaying:f,isMuted:v,canPlay:g,setCanPlay:m,userPaused:e.paused}}(),Re=(0,r.sJ)((0,h.k4)({pageId:u,isTileEndpoint:w,preview:l})),[Se,Pe]=(0,r.FV)(oe.s5),[_e,je]=(0,r.FV)(oe.VJ),Le=f&&a&&!l&&Se,Ze=K&&!Le,[De,Me]=(0,o.useState)(!0),[Ne,Ae]=(0,o.useState)(!Ze),ze=(0,o.useRef)(null),Be=(0,o.useRef)(null),[Fe,Ue]=(0,r.FV)((0,en.vw)(O)),{localMediaUrl:Ve,localFileData:He,progress:Oe}=Fe,We=(0,k.l)(p.k6),{isInactive:Ye}=bn({timeoutSeconds:3,element:ze,hoverElement:Be,isMobile:m,isPageActive:Re}),Ge=(0,r.sJ)((0,p.cr)(c.id)),Je=(0,k.l)(p.ii),Xe=he||d.EwX.Fit,Ke=(0,un.Z)(Ye);(0,o.useEffect)((()=>{Ke&&!Ye?Me(!1):!Ke&&Ye&&Me(!0)}),[Ye,Me,Ke]);const qe=(0,o.useCallback)((e=>{e&&s((t=>({...t,mediaTileData:{...t.mediaTileData,mediaFillType:d.EwX.Crop,fillCropCenterX:e.posX,fillCropCenterY:e.posY,fillCropScale:e.scale}}))),Pe(!1)}),[s,Pe]),Qe=(0,o.useCallback)((()=>{Pe(!1)}),[Pe]);let et=null;Xe===d.EwX.Crop&&de&&"number"==typeof ce&&"number"==typeof ue&&"number"==typeof pe&&(et={posX:ce,posY:ue,scale:pe});const[tt,nt]=(0,o.useState)(!0),[it,rt]=(0,o.useState)(),lt=!(we!==d.Jpv.UploadInProgress||!Ve),at=!(!lt||!tt),st=we===d.Jpv.Ready,dt=at?`${Ve}#t=0.000001`:ne,ct=dt||"",[ut,pt]=(0,o.useState)(""),ht=ie||ut||"",[ft,gt]=(0,o.useState)(""),mt=(0,o.useRef)(null),vt=we===d.Jpv.UploadInProgress,[wt,yt]=(0,o.useState)(vt),[xt,bt]=(0,r.FV)((0,xn.M)({tileId:c.id,url:ct})),Ct=(0,pn.M)(J,xt),Tt=(0,k.l)(p.PS),[It,$t]=(0,o.useState)("number"==typeof re&&re>0?re:0),[kt,Et]=(0,o.useState)("number"==typeof le&&le>0?le:null),Rt=g.trimPanelSizes(1/We),{tileSizes:St}=g,Pt=fe||H.M2,_t=H.N3.get(Pt)||Pt,[jt,Lt]=(0,o.useState)(ge),Zt=(0,o.useCallback)((e=>{Lt(e<.65?d.dbt.Dark:d.dbt.Light)}),[]),Dt=(0,o.useRef)(null),Mt=(0,o.useCallback)((()=>{if(ye.current&&Re&&f){let e=null,t=null;Dt.current&&ye.current&&(e=Dt.current.getBoundingClientRect(),t=ye.current.getBoundingClientRect()),t&&e&&Y(e,t,Zt,_t,null,ye,de||null,Xe)}}),[ye,Re,f,Zt,_t,de,Xe]);(0,o.useEffect)((()=>{Mt()}),[Re,f,_t,dt,re,le,ce,ue,pe,Xe,de,me,Mt]),(0,o.useEffect)((()=>{jt!==ge&&s((e=>({...e,mediaTileData:{...e.mediaTileData,captionTheme:jt},__skipUndo:!0})))}),[s,jt]),(0,o.useEffect)((()=>{yt(vt)}),[vt]),(0,o.useEffect)((()=>{f||a||(0,p.PS)(!1)}),[f,a]);const Nt=!at&&st&&!(null===(S=ct)||void 0===S?void 0:S.includes(".mp4"))&&dn().isSupported(),At=He&&tt,zt=(0,un.Z)(ct),Bt=(0,o.useRef)();(0,o.useEffect)((()=>{Bt.current=G}),[G]),(0,o.useEffect)((()=>{if(!l&&ct!==zt){const e=ye.current;if(bt(!1),$e(!1),Nt&&e){const t=new(dn());t.on(dn().Events.MEDIA_ATTACHED,(()=>{t.loadSource(ct)})),t.on(dn().Events.BUFFER_CREATED,(()=>{bt(!0)})),t.attachMedia(e)}else if(lt&&e&&!window.Cypress&&At&&""===e.canPlayType('video/mp4; codecs="hvc1"')&&He){const e=new FileReader,t=He;e.readAsArrayBuffer(t),e.onload=()=>{const t=new Uint8Array(e.result);mt.current=t,vi?(0,yn.z)(vi,t,(e=>e?nt(!1):null)):n(3780)().then((e=>{vi=e,(0,yn.z)(vi,t,(e=>e?nt(!1):null))}))}}(0,p.PS)(!1)}}),[lt,O,He,ye,l,zt,bt,$e,At,Nt,ct]);const[Ft]=vn();(0,o.useEffect)((()=>{!l&&lt&&!tt&&mt.current&&(Ft(mt.current,(e=>rt(e))),mt.current=null)}),[lt,tt,l,Ft]);const Ut=(0,o.useCallback)((()=>{ye.current&&(ye.current.currentTime=It)}),[ye,It]);wn((()=>{if(Ie&&ye.current){const e=null!==kt?kt:ye.current.duration;ye.current.currentTime>=e&&(se||Te(),ye.current.currentTime=It)}})),(0,o.useEffect)((()=>{ye.current&&It&&(ye.current.currentTime=It,m&&ye.current.load())}),[m,ye,It]),(0,o.useEffect)((()=>{re&&$t(re),le&&Et(le)}),[re,le]);const Vt=(0,o.useCallback)((()=>{xt&&(Ie?Te():Ce())}),[xt,Ie,Te,Ce]);!Re&&Ie&&Te(),(0,o.useEffect)((()=>{Re||Ne||Ae(!Ze)}),[Re,Ze,Ne]),(0,o.useEffect)((()=>{Re||$e(!1)}),[Re,$e]),(0,o.useEffect)((()=>{Ze&&Ae(!1)}),[Ze]),ye.current&&(ye.current.controls=!1);const Ht=(0,o.useCallback)((e=>{Ue((0,en.aY)(e))}),[Ue]),Ot=(0,o.useCallback)((e=>{const t=e[0];Ht(t)}),[Ht]),{documentVisibility:Wt}=(0,hn.Z)(),Yt=(0,un.Z)(Wt);(0,o.useEffect)((()=>{ye.current&&void 0!==Yt&&Yt!==Wt&&(Wt?Ze&&!Ee&&Ce():(Te(),Nt||(ye.current.currentTime=It)))}),[Wt,Yt,Te,Ce,ye,Ze,Nt,It,Ee]);const Gt=(0,o.useRef)(null),Jt=(0,o.useRef)(!1),[Xt,Kt]=(0,o.useState)(!1),qt=(0,o.useRef)(!1),tn=(0,k.l)(p.VY),{captionFontSize:nn,captionPadding:on,captionRadius:rn,captionInnerPaddingVertical:ln,captionInnerPaddingSide:an,fullWidth:sn}=St,fn=m?sn:b,mn=(0,o.useCallback)((e=>(s((t=>({...t,mediaTileData:{...t.mediaTileData,captionText:e}}))),null)),[s]);(0,o.useEffect)((()=>{!l&&a&&tn&&Xt&&(Gt.current&&Gt.current.focus(),(0,p.VY)(!1))}),[tn,l,a,Xt]);const[Cn,Tn]=(0,o.useState)(null),In=(0,o.useCallback)((()=>{$e(!0)}),[$e]),$n=(0,o.useCallback)((()=>{m&&!Nt&&bt(!0),It&&ye.current&&(ye.current.currentTime=It)}),[m,ye,bt,Nt,It]),kn=(0,o.useCallback)((()=>{It&&ye.current&&(ye.current.currentTime=It)}),[ye,It]),En=(0,o.useCallback)((e=>{var t;const n=e.target;Nt||bt(!0),l||!f||de||(null===(t=Cn)||void 0===t?void 0:t.aspectRatio)||setTimeout((()=>{const e=te(n.videoWidth,n.videoHeight),t=(0,H.Pb)(n);Tn({aspectRatio:e,backgroundColor:t})}),200),!l&&f&&at&&(0,yn.b)(n).then((e=>{e&&pt(URL.createObjectURL(e))}))}),[de,f,null===(_=Cn)||void 0===_?void 0:_.aspectRatio,l,bt,Nt,at]),Rn=(0,o.useCallback)((()=>{qt.current=Jt.current}),[]);(0,o.useEffect)((()=>{var e;!l&&f&&we===d.Jpv.Ready&&(null===(e=Cn)||void 0===e?void 0:e.aspectRatio)&&(s((e=>{var t,n,i;return{...e,mediaTileData:{...e.mediaTileData,aspectRatio:null===(t=Cn)||void 0===t?void 0:t.aspectRatio,...(null===(n=Cn)||void 0===n?void 0:n.backgroundColor)&&{backgroundColor:null===(i=Cn)||void 0===i?void 0:i.backgroundColor}},__skipUndo:!0}})),Tn(null))}),[de,fe,f,null===(j=Cn)||void 0===j?void 0:j.aspectRatio,null===(L=Cn)||void 0===L?void 0:L.backgroundColor,we,l,s]);const Sn=!l&&(at||st),Pn=(0,o.useMemo)((()=>Sn?(0,i.jsx)(Un,{playsInline:!0,ref:ye,"data-testid":"video_tile_video",src:ct,crossOrigin:"anonymous",poster:ht,$fit:Xe===d.EwX.Fit,onPlay:In,onEnded:Ut,onPause:Te,loop:!!se,onLoadedMetadata:$n,onLoadedData:kn,onCanPlayThrough:En,onMouseDown:Rn}):null),[se,Sn,ye,ct,ht,Xe,In,Ut,Te,kn,$n,En,Rn]),_n=(0,o.useCallback)((()=>{Ge||Ct||a&&!qt.current&&(je(Xe),Pe(!0))}),[Ct,Ge,a,Xe,je,Pe]),jn=(0,un.Z)(Le);(0,o.useEffect)((()=>{Le&&Le!==jn&&ye.current&&(at||!ye.current.canPlayType("application/vnd.apple.mpegurl")?(0,yn.b)(ye.current).then((e=>{var t,n;e?gt(URL.createObjectURL(e)):(E.v.addAction("Capture thumbnail did not return an image",{tileId:c.id}),gt((0,pn.j)(ht,(null===(n=ye)||void 0===n||null===(t=n.current)||void 0===t?void 0:t.currentTime)||0)))})):gt((0,pn.j)(ht,ye.current.currentTime)))}),[Le,ye,jn,ht,c.id,at]),(0,o.useEffect)((()=>{Le&&(ye.current&&Ie&&!ye.current.paused&&ye.current.pause(),$e(!1))}),[Le,Ie,ye,$e]);const Ln=(0,r._8)((e=>{let{snapshot:t}=e;return e=>{const n=t.getLoadable((0,h.j1)(c.id)).getValue();"Space"!==e.code||!Re||Jt.current||Je||!a&&(a||n)||(Vt(),Ae(!1))}}),[c.id,Re,Je,a,Vt]);(0,o.useEffect)((()=>(document.addEventListener("keyup",Ln),()=>document.removeEventListener("keyup",Ln))),[Ln]),(0,o.useEffect)((()=>{a||(Jt.current=!1,qt.current=!1)}),[a]);let Zn,Dn,Mn,Nn,An=0,zn=0,On=0,Jn=0;if(ze.current){const e=ze.current.getBoundingClientRect();An=e.x,zn=e.y,Jn=e.height,On=e.width}if(et&&de){const{size:e,position:t}=X(et,{width:fn,height:C},de);Zn=t.x,Dn=t.y,Nn=e.width,Mn=e.height}let Xn=null;l||!at&&!st?l&&st?Xn=(0,i.jsx)(Hn,{$crop:!!et,$left:Zn,$top:Dn,$width:Nn,$height:Mn,src:ht,$fit:Xe===d.EwX.Fit}):at||st||!it||(Xn=(0,i.jsx)(Hn,{$crop:!!et,src:it,$left:Zn,$top:Dn,$width:Nn,$height:Mn,$fit:Xe===d.EwX.Fit})):Xn=(0,i.jsx)(Fn,{$crop:!!et,$left:Zn,$top:Dn,$width:Nn,$height:Mn,$inCrop:Le,"data-testid":"video_tile_video_div",children:Pn});let Kn=null;if(Le&&de){var qn;let e;e=_e===d.EwX.Fill?q({width:fn,height:C},de):_e===d.EwX.Fit?Q({width:fn,height:C},de):null!=ce&&null!=ue&&null!=pe?{posX:ce,posY:ue,scale:pe}:ee({width:fn,height:C},de);let n=null;!l&&(at||st)&&"none"!==me&&ve&&(null===(qn=ve)||void 0===qn?void 0:qn.length)>0&&(n=(0,i.jsx)(ae,{captionStyle:me,fontSize:nn*We,maxWidth:(fn-2*on)*We,padding:on*We,radius:rn*We,sidePadding:an*We,verticalPadding:ln*We,captionTheme:jt,onClick:e=>{Le&&e.stopPropagation()},children:(0,i.jsx)(U.Z,{labelId:`video-caption-crop-mode-${c.id}`,plainContent:ve||"",disabled:!0,wrapText:!0,onContentChange:()=>null})}));const o=(0,i.jsx)(Vn,{src:ft});Kn=(0,i.jsx)(V.Z,{top:0,left:0,zIndex:M.y$,children:(0,i.jsx)(ot,{tileX:An,tileY:zn,tileHeight:Jn,tileWidth:On,tileRadius:t,element:o,tileBackground:_t,cropData:e,onSave:qe,onCancel:Qe,aspectRatio:de,tileElement:n})})}let Qn=null;if(f&&(!we||we===d.Jpv.WaitingForCreation)){const e=(0,$.An)(d.YUT.Video)[0];Qn=(0,i.jsx)(Qt,{placeholderText:e.label,icon:e.icon,iconSize:g.embedPreviewIconSize,onFileDrop:Ot,radius:t,sizes:g,height:C,tileType:c.type,tileId:c.id})}const ei=It||0,ti="number"==typeof kt?kt:(null===(Z=ye.current)||void 0===Z?void 0:Z.duration)||0,ni=re,ii=le,oi=st&&!xt,ri=wt&&(1===Oe||void 0===Ve)||oi,li=!l&&(wt||oi);(0,o.useEffect)((()=>{!li||!ri||Sn&&""!==ct||E.v.addError(new Error("Video tile showing no video with infinite spinner"),{tileId:O,tomeId:W,videoTileData:G})}),[li,ri,Sn,ct,O,W,G]);const ai=Re&&(at||st)&&!Ne&&(!Ye&&(!m||!De)||!Ie)&&!Le&&!I,si=!(Ne||Ye&&Ie)?48:0,{t:di}=(0,P.$G)(),ci=di("commandPrompt.tiles.videoTile.addCaptionPlaceholder");return(0,i.jsxs)(cn.df,{threshold:[.5,.9],delay:200,skip:l,initialInView:!!l,onChange:(e,t)=>{var n,i;t.intersectionRatio>=.9&&(null===(n=ye.current)||void 0===n?void 0:n.paused)&&Ze&&xt&&be(O),t.intersectionRatio<=.5&&!(null===(i=ye.current)||void 0===i?void 0:i.paused)&&Te()},style:{height:"100%",width:"100%"},children:[(0,i.jsxs)(Bn,{ref:ze,"data-tome-bypass-tap-navigation":v||Ie?"VideoTile__VideoFrame":void 0,$showPlaceholderBackground:!lt&&!st&&f,$backgroundColor:_t,$inCrop:Le,onClick:m?()=>{Ye||Me((e=>!e))}:void 0,onDoubleClick:_n,variants:{unexpanded:{borderRadius:`${t}px`},expanded:{borderRadius:0}},initial:"unexpanded",animate:v?"expanded":"unexpanded",children:[Qn,Xn,!l&&(at||st)&&Kn,(at||st)&&!Le&&me&&"none"!==me&&(a&&!l||ve&&(null===(D=ve)||void 0===D?void 0:D.length)>0)&&(0,i.jsx)(ae,{captionStyle:me,maxWidth:fn-2*on,fontSize:nn,padding:on,radius:rn,sidePadding:an,verticalPadding:ln,ref:Dt,captionTheme:jt,additionalBottomPadding:si,children:(0,i.jsx)(U.Z,{labelId:`video-caption-${c.id}`,ref:Gt,plainContent:ve||"",disabled:!a||Ct,placeholder:ci,emptyStateLength:ci.length/2*nn,maxCharacterLimit:160,onContentChange:mn,editorInFocusRef:Jt,componentLifeCycleStateTracker:Kt,wrapText:!0})}),li&&(0,i.jsx)(F,{progress:Oe,infinite:ri,bottom:!1,right:!0}),!Qn&&(0,i.jsx)(Yn,{children:(0,i.jsx)(hi,{videoPlayerRef:ye})}),(0,i.jsx)(R.M,{children:ai&&ye.current&&(0,i.jsx)(pi,{videoPlayerRef:ye,ref:Be,pauseVideo:xe.pause,playVideo:xe.play,toggleMute:xe.toggleMute,isMuted:ke,isPlaying:Ie,toggleExpand:y,isExpanded:Ge,disableExpand:T,expandedScale:x,trimStart:ei,trimEnd:ti})}),(0,i.jsx)(R.M,{children:!l&&(at||st)&&Ne&&xt&&!Ze&&!I&&(0,i.jsx)(Wn,{"data-testid":"large_play_button","data-tome-bypass-tap-navigation":"VideoTile__LargePlayBackground",onClick:e=>{Vt(),Ae(!1),e.stopPropagation()},initial:{opacity:1,scale:1},exit:{opacity:0,scale:1.2},transition:{duration:.2},whileTap:{scale:.9},children:(0,i.jsx)(gn,{style:{width:"48px"}})})})]}),f&&Tt&&!l&&xt&&a&&dt&&(st||at)&&(0,i.jsx)(Gn,{playerRef:ye,tileX:An,tileY:zn,trimStart:ei,trimEnd:ti,setTrimStart:$t,setTrimEnd:Et,trimPanelSizes:Rt,pagePadding:g.pageSizes.padding,tileHeight:Jn,tileWidth:On,useLocal:at,videoSrc:dt,updateTileData:s,trimStartData:ni,trimEndData:ii}),!l&&(0,i.jsx)(mi,{tileId:O,videoStatus:null===(A=c)||void 0===A||null===(N=A.videoTileData)||void 0===N?void 0:N.status,videoId:null===(B=c)||void 0===B||null===(z=B.videoTileData)||void 0===z?void 0:z.videoId,updateTileData:s,persistedUploadStatus:we})]})},yi=n(47201);const xi=e=>{let{children:t,resizeRef:n,style:o}=e;return(0,i.jsx)("div",{style:o,"data-tile-resize-observer":!0,ref:n,children:t})};var bi=(0,o.memo)(xi),Ci=n(25935),Ti=n(51203),Ii=n(85590),$i=n(89250);const ki=j.ZP.div.withConfig({displayName:"RichTweet.styles__StyledRichTweet",componentId:"sc-b93f66bf-0"})`
  display: flex;
  flex-direction: column;
  height: 100%;
  font-size: ${e=>{let{$fontSize:t}=e;return t}}px;
`,Ei=j.ZP.div.withConfig({displayName:"RichTweet.styles__StyledBlockQuote",componentId:"sc-b93f66bf-1"})`
  color: ${e=>e.theme.colors.twitterText};
  font-weight: 300;
  font-size: 1em;
  line-height: 1.4;
  padding: 16px 0;
  white-space: pre-line;

  a {
    ${Ii.Z}
  }
`,Ri=j.ZP.div.withConfig({displayName:"RichTweet.styles__UserProfile",componentId:"sc-b93f66bf-2"})`
  display: flex;
`,Si=j.ZP.div.withConfig({displayName:"RichTweet.styles__UserProfileImage",componentId:"sc-b93f66bf-3"})`
  background-image: url('${e=>{let{$imageUrl:t}=e;return t}}');
  border-radius: 9999px;
  height: 48px;
  width: 48px;
  background-size: cover;
  min-width: 48px;
  align-self: center;
`,Pi=j.ZP.div.withConfig({displayName:"RichTweet.styles__UserInfo",componentId:"sc-b93f66bf-4"})`
  flex: 1;
  padding: 4px 16px;
  font-size: 1em;
  line-height: 1.25;
`,_i=(0,j.ZP)($i.Z).withConfig({displayName:"RichTweet.styles__StyledTwitterTileIcon",componentId:"sc-b93f66bf-5"})`
  fill: ${e=>e.theme.colors.twitterIconFill};
`,ji=j.ZP.div.withConfig({displayName:"RichTweet.styles__UserName",componentId:"sc-b93f66bf-6"})`
  color: ${e=>e.theme.colors.twitterTitle};
  font-weight: 700;
`,Li=j.ZP.a.withConfig({displayName:"RichTweet.styles__UserHandle",componentId:"sc-b93f66bf-7"})`
  color: ${e=>e.theme.colors.twitterText};
`,Zi=j.ZP.div.withConfig({displayName:"RichTweet.styles__TweetMetadata",componentId:"sc-b93f66bf-8"})`
  color: ${e=>e.theme.colors.twitterText};
  font-size: 0.7em;
  line-height: 1.14;
  a {
    ${Ii.Z}
    padding: 0px 2px;
  }
`,Di=j.ZP.div.withConfig({displayName:"RichTweet.styles__TweetEngagement",componentId:"sc-b93f66bf-9"})`
  color: ${e=>e.theme.colors.twitterText};
  font-size: 0.7em;
  margin: 0.7em 0;
  line-height: 1.14;
`,Mi=e=>{let{url:t,tweetId:n,fontSize:r}=e;var l,a,s,c,u,p,h,f,g,m,v,w;const{loading:y,error:x,data:b}=(0,d.ABU)({variables:{tweetId:n}}),{t:C}=(0,P.$G)(),{user:T}=(0,o.useContext)(Ti.Z);if(y||x)return null;const I=new Date(b.getTweetStatus.createdAt),$="undefined"!=typeof navigator?navigator.language:"en-US",k=(null===(a=T)||void 0===a||null===(l=a.preferences)||void 0===l?void 0:l.language)??$,E=new Intl.DateTimeFormat(k,{timeStyle:"short"}).format(I),R=new Intl.DateTimeFormat(k,{dateStyle:"medium"}).format(I),{favoriteCount:S,retweetCount:_,user:j,entities:L}=b.getTweetStatus,Z=new Intl.NumberFormat(k,{minimumFractionDigits:0,maximumFractionDigits:2,notation:"compact"}),D=`${Z.format(_)} ${C("commandPrompt.tiles.twitter.richTweet.retweet_with_count",{count:_})}`,M=`${Z.format(S)} ${C("commandPrompt.tiles.twitter.richTweet.like_with_count",{count:S})}`;let N=(null===(c=b)||void 0===c||null===(s=c.getTweetStatus)||void 0===s?void 0:s.fullText)||"";var A,z,B,F;(null===(u=L)||void 0===u?void 0:u.urls)&&(null===(A=L)||void 0===A||A.urls.forEach((e=>{N=N.replace(e.url,`<a href="${e.expanded_url}" target="_blank" rel="noreferrer">${e.display_url}</a>`)})));(null===(p=L)||void 0===p?void 0:p.user_mentions)&&(null===(z=L)||void 0===z||z.user_mentions.forEach((e=>{const t=new RegExp(`@${e.screen_name}`,"ig");N=N.replace(t,`<a href="https://twitter.com/${e.screen_name}" target="_blank" rel="noreferrer">@${e.screen_name}</a>`)})));(null===(h=L)||void 0===h?void 0:h.hashtags)&&(null===(B=L)||void 0===B||B.hashtags.forEach((e=>{N=N.replace(`#${e.text}`,`<a href="https://twitter.com/hashtag/${e.text}" target="_blank" rel="noreferrer">#${e.text}</a>`)})));(null===(f=L)||void 0===f?void 0:f.media)&&(null===(F=L)||void 0===F||F.media.forEach((e=>{N=N.replace(e.url,"")})));return(0,i.jsxs)(ki,{$fontSize:r,children:[(0,i.jsxs)(Ri,{children:[j&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Si,{$imageUrl:null===(g=j)||void 0===g?void 0:g.profileImageUrlHttps.replace("normal","200x200")}),(0,i.jsxs)(Pi,{children:[(0,i.jsx)(ji,{children:null===(m=j)||void 0===m?void 0:m.name}),(0,i.jsxs)(Li,{href:`https://twitter.com/${null===(v=j)||void 0===v?void 0:v.screenName}`,children:["@",null===(w=j)||void 0===w?void 0:w.screenName]})]})]}),(0,i.jsx)(_i,{style:{width:18,height:22,marginLeft:"auto"}})]}),(0,i.jsx)(Ei,{children:(0,Ci.ZP)(N)}),(0,i.jsxs)(Zi,{children:[[E,R].join(" · ")," ·",(0,i.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:C("commandPrompt.tiles.twitter.richTweet.linkToViewTweetOnTwitter")})]}),(0,i.jsx)(Di,{children:[D,M].join(" · ")})]})};var Ni=(0,o.memo)(Mi);const Ai=j.ZP.div.withConfig({displayName:"TwitterTile__StyledTweet",componentId:"sc-43569405-0"})`
  height: 100%;
  padding: 10px;
  width: 100%;

  ${yi.qc}
`;var zi=e=>{let t,n,{tileId:o,url:r,preview:l,updateContentLink:a,height:s,width:c,sizes:u,resizeRef:p}=e;if(r&&r.length>0)try{var h,f,g,m;const e=new URL(r);n=null===(h=e)||void 0===h?void 0:h.href,t=null===(m=e)||void 0===m||null===(g=m.pathname)||void 0===g||null===(f=g.split("/"))||void 0===f?void 0:f[3]}catch(e){t=null}return l||!t||t.length<1?(0,i.jsx)(jt,{tileId:o,updateContentLink:a,preview:l,height:s,width:c,sizes:u,tileType:d.YUT.Twitter}):(0,i.jsx)(bi,{resizeRef:p,children:(0,i.jsx)(Ai,{children:(0,i.jsx)(Ni,{tweetId:t,url:n,fontSize:u.tileSizes.bodyFontSize})})})},Bi=n(74215),Fi=n(30359);const Ui=j.ZP.div.withConfig({displayName:"BlankTile__EmptyPageContainer",componentId:"sc-5d5da000-0"})`
  background-color: ${e=>e.theme.colors.toastBackground};
  border-radius: ${e=>e.$radius}px;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
`,Vi=(0,j.ZP)((0,S.E)(Bi.Z)).withConfig({displayName:"BlankTile__AddTileButton",componentId:"sc-5d5da000-1"})`
  cursor: pointer;
  border-radius: 8px;
  padding: 19px;
  &:hover {
    background-color: ${e=>e.theme.colors.contrast8};
  }
`;var Hi=e=>{let{canEdit:t,preview:n,tileSizes:o}=e;const r=(0,w.t2)();return!t||n?null:(0,i.jsx)(Ui,{$radius:o.radius,children:(0,i.jsx)(Vi,{initial:"default",whileTap:"active",variants:Fi.km,animate:"default",onClick:()=>{r.setPropertyPanel(Mt.Z.ADD_TILE)},children:(0,i.jsx)(At.Z,{style:{width:64,height:64,opacity:"0.4"}})})})},Oi=n(69282),Wi=n.n(Oi),Yi=n(79521),Gi=n(39554),Ji=n(28665),Xi=n(84823);const Ki=j.ZP.div.withConfig({displayName:"TableTile.styles__TableTileStyles",componentId:"sc-7b66d03f-0"})`
  position: relative;
  width: 100%;
  height: 100%;
  border-radius: ${e=>e.$radius}px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  // Isolate z-indices within TableTile
  isolation: isolate;
  // Needed in safari for border radius https://gist.github.com/ayamflow/b602ab436ac9f05660d9c15190f4fd7b
  -webkit-mask-image: -webkit-radial-gradient(white, black);
  // Disable iOS text size scaling for embedded table tile
  -webkit-text-size-adjust: none;

  ${e=>e.$isTextSelectable&&"div { user-select: text; }"};
`,qi=j.ZP.div.withConfig({displayName:"TableTile.styles__TableStyles",componentId:"sc-7b66d03f-1"})`
  ${e=>e.$readonly&&!e.$preview&&!e.$isMobile&&"\n    padding-left: 20px;\n  "}
  ${e=>e.$preview&&`\n    padding-left: ${e.$tableInnerPadding}px;\n    padding-top: ${e.$tableInnerPadding}px;\n  `}
  
  overflow: ${e=>e.$preview?"hidden":"unset"};
  display: inline-block;
  border-spacing: 0;
  border: none;
  // These make the table be left aligned, scale based on the size of the table,
  // and won't exceed the parent's width.
  // See: https://stackoverflow.com/questions/40141163/make-flex-items-take-content-width-not-width-of-parent-container
  align-self: flex-start;
  max-width: 100%;

  @supports ${ei.be.mouse} {
    ${Ji.Z}
  }
`,Qi=j.ZP.div.withConfig({displayName:"TableTile.styles__DraggingWrapperStyles",componentId:"sc-7b66d03f-2"})`
  border-radius: ${Xi.vT}px;
  overflow: hidden;
  filter: ${e=>{let{theme:t}=e;return t.colors.tableColumnDragDropShadow}};

  // this is rendered at root, so we need to scale it accordingly
  // with current page scale.
  transform: scale(${e=>e.$scale});
  // make sure all transforms are applied based on top-left corner.
  transform-origin: top left;
`,eo=j.ZP.div.withConfig({displayName:"TableTile.styles__SelectedGlow",componentId:"sc-7b66d03f-3"})`
  border-radius: 3px;
  box-shadow: ${e=>`0px 0px 0px 2px ${e.theme.colors.tableActiveCellBorder}${e.$isFocused?`, 0px 0px 7px 3px ${e.theme.colors.tableGlow}`:""}`};
  position: absolute;
  left: ${Xi.YF}px;
  top: ${Xi.YF}px;
  right: ${Xi.YF}px;
  bottom: ${Xi.YF}px;

  // Disable click events to allow these to hit the cell itself.
  // This is needed so the cell know when it is clicked on directly
  // as opposed to it's children.
  pointer-events: none;
`,to=(0,j.ZP)(S.E.div).withConfig({displayName:"TableTile.styles__TableScrim",componentId:"sc-7b66d03f-4"})`
  z-index: 100000;
  background: ${e=>e.theme.gradients.tableScrim};
  width: ${e=>{let{$isPreview:t}=e;return t?"20px":"60px"}};
  height: ${e=>{let{$isPreview:t}=e;return t?"100%":"calc(100% - 20px)"}};
  position: absolute;
  right: 0;
  // top must be the same as ColumnEditorTools's height
  top: ${e=>{let{$isPreview:t}=e;return t?"0px":"20px"}};
  pointer-events: none;
`;var no=n(94754),io=n(36409),oo=n(32490);const ro={init:"init"},lo={Cell:e=>{let{value:t=""}=e;return t},width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function ao(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>{const{style:n,className:i,...o}=t;return e={...e,...o},n&&(e.style=e.style?{...e.style||{},...n||{}}:n),i&&(e.className=e.className?e.className+" "+i:i),""===e.className&&delete e.className,e}),{})}function so(e,t,n){return"function"==typeof t?so({},t(e,n)):Array.isArray(t)?ao(e,...t):ao(e,t)}const co=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[...e,n].reduce(((e,i)=>so(e,i,{...t,userProps:n})),{})}};function uo(e){const t=o.useRef();return t.current=e,o.useCallback((()=>t.current),[])}new Map;let po=null;lo.canResize=!0,ro.columnStartResizing="columnStartResizing",ro.columnResizing="columnResizing",ro.columnDoneResizing="columnDoneResizing",ro.resetResize="resetResize";const ho=e=>{e.getResizerProps=[fo],e.getHeaderProps.push({style:{position:"relative"}}),e.stateReducers.push(go),e.useInstance.push(vo),e.useInstanceBeforeDimensions.push(mo)},fo=(e,t)=>{let{instance:n,header:i}=t;const{dispatch:o}=n,r=(e,t)=>{e.stopPropagation();let n=!1;if("touchstart"===e.type){if(e.touches&&e.touches.length>1)return;n=!0}const i=function(e){const t=[],n=e=>{e.columns&&e.columns.length&&e.columns.map(n),t.push(e)};return n(e),t}(t),r=i.map((e=>[e.id,e.totalWidth])),l=n?Math.round(e.touches[0].clientX):e.clientX,a=e=>{o({type:ro.columnResizing,clientX:e})},s=()=>o({type:ro.columnDoneResizing}),d={mouse:{moveEvent:"mousemove",moveHandler:(0,io.Z)((e=>{e.stopPropagation(),a(e.clientX)}),10),upEvent:"mouseup",upHandler:e=>{document.removeEventListener("mousemove",d.mouse.moveHandler),document.removeEventListener("mouseup",d.mouse.upHandler),s()}},touch:{moveEvent:"touchmove",moveHandler:(0,io.Z)((e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),a(e.touches[0].clientX),!1)),10),upEvent:"touchend",upHandler:e=>{document.removeEventListener(d.touch.moveEvent,d.touch.moveHandler),document.removeEventListener(d.touch.upEvent,d.touch.moveHandler),s()}}},c=n?d.touch:d.mouse,u=!!function(){if("boolean"==typeof po)return po;let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return po=e,po}()&&{passive:!1};document.addEventListener(c.moveEvent,c.moveHandler,u),document.addEventListener(c.upEvent,c.upHandler,u),o({type:ro.columnStartResizing,columnId:t.id,columnWidth:t.totalWidth,headerIdWidths:r,clientX:l})};return[e,{onMouseDown:e=>e.persist()||r(e,i),onTouchStart:e=>e.persist()||r(e,i),style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function go(e,t){if(t.type===ro.init)return{columnResizing:{columnWidths:{}},...e};if(t.type===ro.resetResize)return{...e,columnResizing:{columnWidths:{}}};if(t.type===ro.columnStartResizing){const{clientX:n,columnId:i,columnWidth:o,headerIdWidths:r}=t;return{...e,columnResizing:{...e.columnResizing,startX:n,headerIdWidths:r,columnWidth:o,isResizingColumn:i}}}if(t.type===ro.columnResizing){const{clientX:n}=t,{startX:i,columnWidth:o,headerIdWidths:r=[]}=e.columnResizing,l=(n-i)/o,a={};return r.forEach((e=>{let[t,n]=e;a[t]=Math.max(n+n*l,0)})),{...e,columnResizing:{...e.columnResizing,columnWidths:{...e.columnResizing.columnWidths,...a}}}}return t.type===ro.columnDoneResizing?{...e,columnResizing:{...e.columnResizing,startX:null,isResizingColumn:null}}:void 0}ho.pluginName="useResizeColumnsBlocking";const mo=e=>{const{flatHeaders:t,disableResizing:n,getHooks:i,state:{columnResizing:o}}=e,r=uo(e);t.forEach((e=>{const t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e=0;e<t.length;e+=1)if(void 0!==t[e])return t[e]}(!0!==e.disableResizing&&void 0,!0!==n&&void 0,!0);e.canResize=t,e.width=Math.max(e.minWidth,o.columnWidths[e.id]||e.originalWidth||e.width),e.isResizing=o.isResizingColumn===e.id,t&&(e.getResizerProps=co(i().getResizerProps,{instance:r(),header:e}))}))};function vo(e){const{plugins:t,dispatch:n,autoResetResize:i=!0,columns:r}=e;!function(e,t,n,i){e.findIndex((e=>e.pluginName===n)),t.forEach((t=>{e.findIndex((e=>e.pluginName===t))}))}(t,["useAbsoluteLayout"],"useResizeColumnsBlocking");const l=uo(i);(0,oo.v)((()=>{l()&&n({type:ro.resetResize})}),[r]);const a=o.useCallback((()=>n({type:ro.resetResize})),[n]);Object.assign(e,{resetResizing:a})}var wo=n(15948),yo=n(73935);var xo=n(48329),bo=n(33471),Co=n(47486),To=n(46820);var Io=o.createContext(null),$o=n(80389),ko=n(6131),Eo=n(31561),Ro=n(79699),So=n(36680),Po=n(85252);function _o(e,t,n){return[...Array(e)].map((()=>Array(t).fill(n)))}function jo(e,t,n){const i=[...t].sort(Po.uR),o=[...n].sort(Po.uR),r=[];for(const t of i){const n=e[t],i=[];for(const e of o)i.push(n[e]);r.push(i)}return r}function Lo(e,t,n,i,o){const r=[];for(let e=t;e<=n;e++)r.push(e);const l=[];for(let e=i;e<=o;e++)l.push(e);return jo(e,r,l)}function Zo(e,t){return e.data.findIndex((e=>e.id===t))}function Do(e,t){return e.columns.findIndex((e=>e.accessor===t))}function Mo(e,t,n){const i=t.data.length,o=t.columns.length,r=_o(i,o);for(let e=0;e<i;e++)for(let i=0;i<o;i++){const o=t.columns[i].accessor;r[e][i]={serializedData:t.data[e][o],id:{rowId:t.data[e].id,colId:o,tileId:n},selected:!1}}for(const n of e){const e=Zo(t,n.rowId),i=Do(t,n.colId);r[e][i].selected=!0}return r}function No(e){const t=[];for(let n=0;n<e.length;n++){e[n].map((e=>e.selected)).includes(!0)&&t.push(n)}const n=[];for(let t=0;t<e[0].length;t++)for(const i of e)if(i[t].selected){n.push(t);break}return Lo(e,Math.min(...t),Math.max(...t),Math.min(...n),Math.max(...n))}var Ao=n(18428);var zo=(0,o.forwardRef)(((e,t)=>(0,i.jsx)(L.Z,{ref:t,viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{d:"M32 10C33.1046 10 34 10.8954 34 12V47.1716L45.5858 35.5858C46.3668 34.8047 47.6332 34.8047 48.4142 35.5858C49.1953 36.3668 49.1953 37.6332 48.4142 38.4142L33.4142 53.4142C32.6332 54.1953 31.3668 54.1953 30.5858 53.4142L15.5858 38.4142C14.8047 37.6332 14.8047 36.3668 15.5858 35.5858C16.3668 34.8047 17.6332 34.8047 18.4142 35.5858L30 47.1716V12C30 10.8954 30.8954 10 32 10Z"})}))),Bo=n(11293),Fo=n(51961);var Uo=(0,o.forwardRef)(((e,t)=>(0,i.jsx)(L.Z,{ref:t,viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{d:"M30.5858 10.5858C31.3668 9.80474 32.6332 9.80474 33.4142 10.5858L48.4142 25.5858C49.1953 26.3668 49.1953 27.6332 48.4142 28.4142C47.6332 29.1953 46.3668 29.1953 45.5858 28.4142L34 16.8284V52C34 53.1046 33.1046 54 32 54C30.8954 54 30 53.1046 30 52V16.8284L18.4142 28.4142C17.6332 29.1953 16.3668 29.1953 15.5858 28.4142C14.8047 27.6332 14.8047 26.3668 15.5858 25.5858L30.5858 10.5858Z"})})));var Vo=(0,o.forwardRef)(((e,t)=>(0,i.jsx)(L.Z,{ref:t,viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{d:"M8.07117 16.1778L26.4178 34.4889L17.7778 53.3334H26.6667L32.4978 40.6045L48.8178 56.8889L53.3334 52.3734L12.6223 11.6267L8.07117 16.1778ZM20.6934 10.6667L27.8045 17.7778H34.0623L32.1067 22.08L38.1867 28.16L42.9512 17.7778H56.8889V10.6667H20.6934Z"})})));var Ho=(0,o.forwardRef)(((e,t)=>{const{backgroundFill:n,...o}=e;return(0,i.jsxs)(L.Z,{ref:t,viewBox:"0 0 64 64",...o,children:[(0,i.jsx)("path",{d:"M32 60C47.464 60 60 47.464 60 32C60 16.536 47.464 4 32 4C16.536 4 4 16.536 4 32C4 47.464 16.536 60 32 60ZM32 64C49.6731 64 64 49.6731 64 32C64 14.3269 49.6731 0 32 0C14.3269 0 0 14.3269 0 32C0 49.6731 14.3269 64 32 64Z",fill:n}),(0,i.jsx)("path",{d:"M22.8146 46L25.7521 37.5312H38.2521L41.174 46H46.299L34.7833 14H29.2052L17.6896 46H22.8146ZM27.1583 33.4688L31.8771 19.8125H32.1271L36.8458 33.4688H27.1583Z"})]})}));const Oo={height:16,width:16,marginRight:Xi.tn},Wo=e=>{let{disabled:t,rowId:n,colId:l,setMenuIsOpen:a,currentColor:s,children:d,onOpenDropdown:c,tileId:u,showRowOperations:p,showColumnOperations:h,dropdownRef:f}=e;const{insertRow:g,insertColumn:m,deleteRowsByIdx:v,deleteColumnsByIdx:w,activateCell:y,activateFirstCellInColumn:x,activateFirstCellInRow:b,applyToSelectedCells:C,rowIds:T,colIds:I,tableDataRef:$}=(0,o.useContext)(Io),k=(0,r.Zl)(xo.wK),E=(0,o.useCallback)((e=>{const t=g(e);l?y(t,l):b(t)}),[g,l,y,b]),R=(0,o.useCallback)(((e,t,n)=>{const i=t[0].length-e.length;e.sort(Po.uR);const o=e[e.length-1]===t[0].length-1?1:0,r=Lo(t,0,t.length-1,o,o+i-1).flatMap(((e,t)=>e.map(((e,n)=>({rowIdx:t,colIdx:n,isSelected:e.selected}))).filter((e=>e.isSelected)))),l=jo(t,[...t.keys()],[...t[0].keys()].filter((t=>!e.includes(t)))),a=n.rowIdx,s=Math.min(n.colIdx,i-1),d=l[a][s].id;y(d.rowId,d.colId),k(r.map((e=>{let{rowIdx:t,colIdx:n}=e;return l[t][n].id})))}),[y,k]),S=(0,o.useCallback)(((e,t,n)=>{v(e);const i=function(e){const t=_o(e[0].length,e.length);for(let n=0;n<e.length;n++)for(let i=0;i<e[0].length;i++)t[i][n]=e[n][i];return t}(t);R(e,i,{rowIdx:n.colIdx,colIdx:n.rowIdx})}),[R,v]),_=(0,o.useCallback)((e=>{const t=m(So.Hr.string,e);n?y(n,t):x(t)}),[m,n,y,x]),L=(0,o.useCallback)(((e,t,n)=>{w(e),R(e,t,n)}),[R,w]),Z=(0,o.useCallback)((e=>C((t=>(0,Ro.vk)(t,e)))),[C]),D=(0,j.Fg)(),M=(0,o.useMemo)((()=>[Ro.l2.None,Ro.l2.Gray,Ro.l2.Blue,Ro.l2.Yellow,Ro.l2.Green,Ro.l2.Red].map((e=>{const t=Ro.mR.fromCellColor(e);return{text:t.userText,action:()=>Z(e),image:(0,i.jsx)(Ho,{style:{...Oo,fill:t.getTextColor(D)},backgroundFill:t.getBackgroundColor(D)}),checked:s===e}}))),[s,Z,D]),{t:N}=(0,P.$G)(),A=(0,o.useMemo)((()=>({text:N("commandPrompt.tiles.table.tableMenu.clearFormatting"),action:()=>Z(Ro.l2.None),image:(0,i.jsx)(Vo,{style:Oo})})),[Z,N]),{undo:z,redo:B}=(0,$o.C5)(),{hasUndoEdits:F,hasRedoEdits:U}=(0,$o.j0)(),V=(0,o.useMemo)((()=>[{type:"separator"},{text:N("commandPrompt.tiles.table.tableMenu.undo"),action:()=>z(),disabled:!F,image:(0,i.jsx)(ko.Z,{style:Oo})},{text:N("commandPrompt.tiles.table.tableMenu.redo"),action:()=>B(),disabled:!U,image:(0,i.jsx)(Eo.Z,{style:Oo})}]),[U,F,B,N,z]),H=(0,o.useCallback)(((e,t,n)=>{const o=new Set(e.map((e=>e.rowId))),r=new Set(e.map((e=>e.colId))),l=Array.from(o.values(),(e=>Zo($.current,e))).sort(Po.uR),a=Array.from(r.values(),(e=>Do($.current,e))).sort(Po.uR),s=[{text:N("commandPrompt.tiles.table.tableMenu.addRowAbove"),action:()=>E(l[0]),image:(0,i.jsx)(Uo,{style:Oo})},{text:N("commandPrompt.tiles.table.tableMenu.addRowBelow"),action:()=>E(l[l.length-1]+1),image:(0,i.jsx)(zo,{style:Oo})}],d=[{text:N("commandPrompt.tiles.table.tableMenu.addColumnLeft"),action:()=>_(a[0]),image:(0,i.jsx)(Bo.Z,{style:Oo})},{text:N("commandPrompt.tiles.table.tableMenu.addColumnRight"),action:()=>_(a[a.length-1]+1),image:(0,i.jsx)(Fo.Z,{style:Oo})}];return[...p?s:[],...h?d:[],{type:"separator"},...M,{type:"separator"},A,{type:"separator"},...p?[{text:`${N("commandPrompt.tiles.table.tableMenu.deleteRow_with_count",{count:l.length})}`,action:()=>S(l,t,n),disabled:T().length===l.length}]:[],...h?[{text:`${N("commandPrompt.tiles.table.tableMenu.deleteCol_with_count",{count:a.length})}`,action:()=>L(a,t,n),disabled:I().length===a.length}]:[],...V]}),[A,I,M,L,S,_,E,T,$,p,h,N,V]),O=(0,o.useMemo)((()=>[...M,{type:"separator"},A,...V]),[A,M,V]),W=(0,r._8)((e=>{let{snapshot:t}=e;return()=>{const e=t.getLoadable(xo.sO).getValue(),n=t.getLoadable(xo.SI).getValue(),i=Mo(e,$.current,u),o=function(e){return e.every((e=>e.every((e=>e.selected))))}(No(i));if(o&&n){const t={rowIdx:Zo($.current,n.rowId),colIdx:Do($.current,n.colId)};return H(e,i,t)}return O}}),[H,O,$,u]);return(0,i.jsx)(Ao.Z,{disabled:t,menuAlign:"click",rightClickActivated:!0,menuWidth:166,styles:{display:"flex"},setOpenState:a,itemsOrFn:W,onOpenDropdown:c,ref:f,children:d})};var Yo=(0,o.memo)(Wo),Go=o.createContext(null);var Jo=e=>{var t,n,l,a;const{children:s,i:d,displayWidth:c,readonly:u,provided:p,isAnyRowBeingDragged:h,isThisRowBeingDragged:f,preview:g,enableRowDrag:m=!0,tileId:v,rowId:w,...y}=e,{selectRow:x,appendSelectRow:b,selectRowsFromRowToActive:C,tableRef:T,activeCellRef:I}=(0,o.useContext)(Io),$=(0,o.useRef)(null),k=(0,o.useRef)(),{reorderingColumnIdRef:E}=(0,o.useContext)(Go),R=(0,o.useMemo)((()=>({rowId:w,tileId:v})),[w,v]),S=(0,r.Zl)((0,xo.Tc)(R));(0,o.useEffect)((()=>{if(!g&&$.current&&!E.current){const e=parseFloat(window.getComputedStyle($.current).height);S((t=>e&&t!==e?e:t))}}));const P=(0,o.useMemo)((()=>{var e,t;return f?null===(t=T.current)||void 0===t||null===(e=t.offsetParent)||void 0===e?void 0:e.getBoundingClientRect().left:0}),[T,f]),_=(0,o.useMemo)((()=>{var e,t;return f?null===(t=T.current)||void 0===t||null===(e=t.offsetParent)||void 0===e?void 0:e.scrollLeft:0}),[T,f]),j=(0,o.useCallback)((e=>{var t;null===(t=I.current)||void 0===t||t.blurEditorAndRetainFocus(),(0,bo.ZP)(e)?b(w):e.shiftKey?C(w):x(w),k.current.controlOpen((e=>!e),{x:e.clientX,y:e.clientY})}),[b,w,C,x,I]),L=(0,o.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]),Z=(0,o.useMemo)((()=>{var e;return{...null===(e=p)||void 0===e?void 0:e.draggableProps.style,...f?{maxWidth:`${c}px`,overflow:"hidden",left:P,marginLeft:Co.QG}:{}}}),[c,f,null===(t=p)||void 0===t?void 0:t.draggableProps.style,P]);return(0,i.jsxs)(To.Z,{innerRef:null===(n=p)||void 0===n?void 0:n.innerRef,preview:g,tableScrollLeft:_,isThisRowBeingDragged:f,...null===(l=p)||void 0===l?void 0:l.draggableProps,style:Z,children:[!u&&(0,i.jsx)(Yo,{disabled:u||h,rowId:w,currentColor:null,tileId:v,dropdownRef:k,showRowOperations:!0,showColumnOperations:!1,children:(0,i.jsx)(Co.t_,{onMouseDown:L,onClick:j,onContextMenu:j,"data-testid":"table_row_tool",children:m&&(0,i.jsx)(Co.bC,{...null===(a=p)||void 0===a?void 0:a.dragHandleProps,$readonly:u,"data-disable-drag":!0,children:!f&&(0,i.jsx)(Co.RH,{})})})}),(0,i.jsx)(Co.N0,{"data-testid":"table_row",ref:$,...y,children:s})]})},Xo=n(12064),Ko=n(80530),qo=n(69219),Qo=n(74877),er=n(77493);const tr=(e,t)=>(Array.isArray(e)?e:e.children).every((e=>er.xv.isText(e)?!!e[t]:tr(e,t))),nr=(e,t,n)=>{const i=Array.isArray(e)?e:e.children;return i.forEach((e=>{er.xv.isText(e)?n?e[t]=n:delete e[t]:nr(e,t,n)})),i},ir="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789`-=~!@#$%^&*()_+[]\\;',./{}|:\"<>?".split("");var or=o.createContext(null);var rr=j.ZP.div.withConfig({displayName:"CommonTableCell.styles__CommonTableCellStyles",componentId:"sc-c33af6a8-0"})`
  font-size: ${e=>e.$fontSize}px;
  line-height: 1.3;
  color: ${e=>e.$textColor};
  caret-color: ${e=>e.theme.colors.contentAccent};
  font-family: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.name}};
  font-weight: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.weight}};
  font-style: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.style}};

  ${yi.qc}

  border-radius: ${e=>e.$preview?"1":Xi.vT}px;
  background-color: ${e=>e.$backgroundColor};

  // While we really care about the overflow:hidden in our no wrap scenario, we adopt it
  // here so that height calculation is consistent in both places. overflow:hidden +
  // display:inline-block changing to display:block can change the height
  & > div {
    overflow: hidden !important;
  }

  & > [contenteditable] {
    -webkit-user-select: auto;
    user-select: auto;
  }

  // Remove margin-block for cell content
  & ul,
  ol {
    margin-block: 0;
  }

  ol {
    padding-inline-start: 1em;
  }

  ul {
    padding-inline-start: 0.8em;
  }

  p {
    margin: 0;
  }
`;const lr="table_cell",ar=j.ZP.div.withConfig({displayName:"TableCell__TableCellWrapper",componentId:"sc-5c87b6f1-0"})`
  position: relative;
  height: 100%;
  margin: 0;

  margin-right: ${e=>e.$marginRight}px;
`,sr=(0,j.ZP)(rr).withConfig({displayName:"TableCell__TableCellStyles",componentId:"sc-5c87b6f1-1"})`
  ${e=>!e.$preview&&`\n    // A border width padding is needed here to prevent text content\n    // bleeds into border of the cell when border is present (when cell\n    // is selected). This is only needed for non-preview mode because\n    // cell will not in selected mode in preview so we push all the padding\n    // to the underlying text editor in preview mode.\n    padding: ${Xi.YF}px;\n  `};
  height: 100%;

  // If the tile is active and a cell is clicked this prevents the focus from going directly
  // to the slate editor and instead just selects the cell itself. Also allow pointer-events
  // if the text needs to be selectable.
  & * {
    pointer-events: ${e=>e.$isActive||e.$isTextSelectable?"auto":"none"};
  }

  // Override the above pointer-events block so links can be clickable.
  & a {
    pointer-events: auto;
  }
`,dr=j.ZP.div.withConfig({displayName:"TableCell__TableCellSpaceHolder",componentId:"sc-5c87b6f1-2"})`
  width: 100%;
  height: 100%;
  display: inline-block;
`,cr=(e,t)=>e||(0,bo.ZP)(t)||t.shiftKey,ur=(0,o.forwardRef)(((e,t)=>{let{cell:n,readonly:s=!0,tableContentPadding:d,tileId:c,isDragAndDrop:u,wrapText:p,preview:h,editMode:f,fontSize:g,rowId:m,colId:w,rowIdx:y,colIdx:x,tileSelected:b,isAnyRowBeingDragged:C,canTableCutCopyPaste:T}=e;const[I,$]=(0,r.FV)((0,xo.YS)({rowId:m,colId:w,tileId:c})),[k,E]=(0,r.FV)((0,xo.Ao)({rowId:m,colId:w,tileId:c})),R=(0,r.Zl)(xo.wK),S=I&&!s,[P,_]=(0,o.useState)(!1),L=(0,o.useRef)(null),Z=(0,o.useRef)(null),D=(0,o.useRef)(null),{insertRow:M,activateCell:N,focusOnTable:A,applyToSelectedCells:z,deselectAllCells:B,removeCellFromSelection:F,activateNeighborCell:U,isFirstCellInTable:V,tableRef:H,titleRef:O,activeCellRef:W,selectFromToActive:Y}=(0,o.useContext)(Io);(0,o.useEffect)((()=>{var e;P&&(W.current=null===(e=t)||void 0===e?void 0:e.current)}),[W,P,t]);const G=(0,qo.vB)(n.value),J=Ro.mR.fromCellColor(G.color),{floatingCellProps:X,setFloatingCellProps:K}=(0,o.useContext)(or),q=(0,o.useRef)(null),Q=(0,o.useCallback)((()=>{var e;null===(e=q.current)||void 0===e||e.focus()}),[]),ee=(0,o.useCallback)((()=>{var e;null===(e=D.current)||void 0===e||e.blurEditor(),Q()}),[Q]);(0,o.useImperativeHandle)(t,(()=>({blurEditorAndRetainFocus:ee})));const te=!p&&S&&null!==X,ne=(0,o.useMemo)((()=>({colId:w,tileId:c})),[w,c]),ie=(0,r.Zl)((0,xo.$A)(ne)),oe=(0,o.useCallback)((()=>C||ie(!0)),[ie,C]),re=(0,o.useCallback)((()=>ie(!1)),[ie]);(0,o.useEffect)((()=>{C&&ie(!1)}),[C,ie]);const le=(0,o.useCallback)((e=>{K({rowId:m,colId:w,serializedCellData:e,cellRef:Z,domFocusCellKeybindings:Q})}),[m,w,Q,K]),ae=(0,o.useCallback)(((e,t)=>{if(R([{rowId:m,colId:w,tileId:c}]),p){var n,i;if(t)null===(i=D.current)||void 0===i||i.replaceText(t);null===(n=D.current)||void 0===n||n.focusEditor()}else{let n;n=void 0!==t?(0,qo.qC)((0,Ro.gF)((0,qo.vB)(e),(0,Qo.Tj)(t))):e,le(n)}}),[R,m,w,c,p,le]),se=(0,o.useCallback)(((e,t)=>{if(s)return void A();const i=(0,Et.p)(t),o=(0,Et.d)(t);if(i||o&&!k){var r;if(!t.nativeEvent.composedPath().some((e=>{var t;return"A"===(null===(t=e)||void 0===t?void 0:t.tagName)})))if((0,bo.ZP)(t)||t.shiftKey||B(),t.shiftKey)null===(r=W.current)||void 0===r||r.blurEditorAndRetainFocus(),Y(m,w),t.preventDefault();else i&&(0,bo.ZP)(t)&&k?(F(m,w),t.preventDefault()):($(!0),E(!0))}i&&(!S||p||cr(e,t)||ae(n.value,void 0),t.stopPropagation())}),[s,k,A,B,W,Y,m,w,F,$,E,S,p,ae,n.value]),de=(0,r._8)((e=>{let{snapshot:t}=e;return e=>{const n=t.getLoadable(xo.sO).getValue().length>1;S&&(0,Et.p)(e)&&cr(n,e)&&(e.stopPropagation(),e.preventDefault(),se(n,e))}}),[se,S]),ce=(0,r._8)((e=>{let{snapshot:t}=e;return e=>{const n=t.getLoadable(xo.sO).getValue().length>1;se(n,e)}}),[se]),ue=(0,o.useCallback)((e=>{P||e.preventDefault()}),[P]),{reorderingColumnIdRef:pe}=(0,o.useContext)(Go),he=pe.current===n.column.id&&!h&&!u,fe=n.getCellProps(),ge=(0,o.useMemo)((()=>({rowId:m,tileId:c})),[m,c]),me=(0,r._8)((e=>{let{snapshot:t}=e;return()=>t.getLoadable((0,xo.Tc)(ge)).getValue()}),[ge]),ve={...fe.style,...pe.current&&{height:me()},...he?{display:"none",width:"0",padding:"0",marginRight:"0"}:{}},we=(0,o.useCallback)((function(){const e=M(y+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1));N(e,w)}),[M,y,w,N]),ye=(0,o.useCallback)((()=>z((e=>(0,Ro.gF)(e,Qo.yS)))),[z]),xe=(0,o.useCallback)((e=>{z((t=>(0,Ro.gF)(t,((e,t)=>{const n=!tr(e,t);return nr(e,t,n)})(t.slateData,e))))}),[z]),be=(0,o.useCallback)((()=>{B(),A()}),[B,A]),Ce=(0,o.useCallback)((e=>{let t;switch(e.code){case"ArrowLeft":t=Ko.N.Left;break;case"ArrowRight":t=Ko.N.Right;break;case"ArrowUp":t=Ko.N.Up;break;case"ArrowDown":t=Ko.N.Down;break;case"Tab":if(e.shiftKey){if(t=Ko.N.Previous,V(m,w)&&O.current)return B(),setTimeout((()=>{O.current.focus()}),0),void e.preventDefault()}else t=Ko.N.Next;break;default:return}U(m,w,t),e.preventDefault()}),[U,m,w,V,O,B]),Te=(0,o.useMemo)((()=>{const e=new Map;return e.set("enter",(e=>{ae(n.value,void 0),e.preventDefault()})),e.set("shift+enter",(()=>we())),e.set(ir,(e=>{ae(n.value,e.key),e.preventDefault()})),e.set(["del","backspace"],ye),e.set("esc",be),e.set(["left","right","up","down","tab","shift+tab"],Ce),T&&(e.set("mod+x",v.Z),e.set("mod+c",v.Z),e.set("mod+v",v.Z)),e.set("mod+b",(()=>xe("bold"))),e.set("mod+u",(()=>xe("underlined"))),e.set("mod+i",(()=>xe("italic"))),e}),[ye,be,Ce,T,xe,ae,n.value,we]);(0,o.useEffect)((()=>{if(I&&!h){var e;const t=null===(e=H.current)||void 0===e?void 0:e.offsetParent;if(H.current&&t&&L.current){const e=t.getBoundingClientRect(),n=L.current.getBoundingClientRect(),{scrollLeft:i,scrollTop:o}=(0,Gi.VL)(e,n,y,x,{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop},Co.QG);(0,Xo.j)(t.scrollLeft,i,{...l.yh,onUpdate:e=>{H.current&&(t.scrollLeft=e)}}),(0,Xo.j)(t.scrollTop,o,{...l.yh,onUpdate:e=>{H.current&&(t.scrollTop=e)}}),Q()}}}),[I,Q,H,L,y,x,h]);const Ie=(0,o.useCallback)((()=>{var e;null===(e=D.current)||void 0===e||e.blurEditor()}),[D]),[$e,ke]=(0,o.useState)(!1),Ee=(0,j.Fg)();return(0,i.jsx)(Yo,{disabled:!b||s,rowId:m,colId:w,tileSelected:b,setMenuIsOpen:ke,currentColor:G.color,editableCellRef:D,onOpenDropdown:Ie,tileId:c,showRowOperations:!0,showColumnOperations:!0,children:(0,i.jsx)(a.G,{bindings:Te,ref:q,disabled:$e||!I||h,children:(0,i.jsx)(ar,{...fe,style:ve,ref:Z,$marginRight:(0,Gi.pP)(h,u,s),onMouseEnter:oe,onMouseLeave:re,onMouseMove:ue,children:te?(0,i.jsxs)(dr,{"data-testid":lr,children:[(0,i.jsx)("div",{"data-testid":"cell_focused"}),(0,i.jsx)("div",{"data-testid":"cell_active"}),(0,i.jsx)("div",{"data-testid":"cell_selected"})]}):(0,i.jsxs)(sr,{$backgroundColor:J.getBackgroundColor(Ee),$textColor:J.getTextColor(Ee),$isActive:I,$isTextSelectable:!f&&!h,$isReordering:he,$preview:h,$fontSize:g,"data-testid":h?null:lr,onMouseDown:ce,onMouseDownCapture:de,ref:L,children:[k&&!h&&(0,i.jsx)(eo,{"data-testid":"cell_selected",$isFocused:P}),P&&(0,i.jsx)("div",{"data-testid":"cell_focused"}),S&&(0,i.jsx)("div",{"data-testid":"cell_active"}),n.render("Cell",{ref:D,isEditable:S,wrapText:p,rowId:m,colId:w,setIsFocused:_,domFocusCellKeybindings:Q,padding:d-(h?0:Xi.YF)})]})})})})}));function pr(e,t){if(e.cell.value!==t.cell.value)return!1;if(e.cell.column.isResizing||t.cell.column.isResizing)return!1;if(e.cell.column.width||t.cell.column.width)return!1;const n={...e},i={...t};return delete n.cell,delete i.cell,(0,de.Z)(n,i)}var hr=(0,o.memo)(ur,pr),fr=n(9284),gr=n(96989);var mr=e=>{let{children:t}=e;const n=(0,r.sJ)(gr.hL),o=(0,r.sJ)(gr.zA),l=(0,r.sJ)(xo.yg),a=n||o||l?{cursor:"default"}:{};return(0,i.jsx)("div",{style:a,children:t})};function vr(e,t,n){const i=e===t;return{width:`${i?n:0}px`,marginRight:(i?4:0)+"px"}}const wr=e=>{let{prepareRow:t,getTableBodyProps:n,rows:r,displayWidth:a,readonly:s,tileId:d,tableContentPadding:c,wrapText:u,preview:p,fontSize:h,tileSelected:f,editMode:g,canTableCutCopyPaste:m}=e;var v;const{reorderingColumnIdRef:w,reorderingColumnIdxRef:y,dropPositionIdx:x}=(0,o.useContext)(Go),b=function(){const e=(0,o.useRef)({}).current;return(0,o.useEffect)((()=>{const t=document.createElement("div");return t.style.position="absolute",t.style.pointerEvents="none",t.style.top="0",t.style.width="100%",t.style.height="100%",e.elt=t,document.body.appendChild(t),()=>{document.body.removeChild(t)}}),[e]),t=>function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];const l=t(n,...o);return"fixed"===n.draggableProps.style.position?(0,yo.createPortal)(l,e.elt):l}}(),[C,T]=(0,o.useState)(!1),{moveRow:I,deselectAllCells:$,focusOnTable:k}=(0,o.useContext)(Io),E=(0,o.useCallback)((()=>{T(!0),$()}),[T,$]),R=(0,o.useCallback)((e=>{T(!1),e.destination&&(I(e.source.index,e.destination.index),k())}),[I,T,k]);if(p)return(0,i.jsx)("div",{...n(),style:{fontSize:0},children:r.map(((e,n)=>{const o=e.id;t(e);const r=e.getRowProps();return(0,i.jsx)(Jo,{...r,displayWidth:a,i:n,readonly:s,provided:void 0,isAnyRowBeingDragged:!1,isThisRowBeingDragged:!1,preview:p,tileId:d,rowId:o,children:e.cells.map(((e,t)=>(0,i.jsx)(hr,{cell:e,readonly:s,tileId:d,tableContentPadding:c,isDragAndDrop:!1,wrapText:u,preview:p,editMode:g,fontSize:h,rowId:o,colId:e.column.id,rowIdx:n,colIdx:t,tileSelected:f,isAnyRowBeingDragged:!1,canTableCutCopyPaste:!1},`${o}-${e.column.id}`)))})}))});let P;var _,j;r.length>0&&(null===(v=r[0])||void 0===v?void 0:v.getRowProps)&&(P=null===(j=r[0].getRowProps())||void 0===j||null===(_=j.style)||void 0===_?void 0:_.width);const L=(0,o.createRef)();return(0,i.jsx)(mr,{children:(0,i.jsx)(wo.Z5,{onDragStart:E,onDragEnd:R,children:(0,i.jsx)("div",{...n(),children:(0,i.jsx)(wo.bK,{droppableId:`table-${d}`,children:e=>(0,i.jsxs)("div",{...e.droppableProps,ref:e.innerRef,style:{width:P},children:[r.map(((e,n)=>{const o=e.id;t(e);const r=e.getRowProps();return(0,i.jsx)(wo._l,{draggableId:`row-${d}-${o}`,index:n,isDragDisabled:s,children:b(((t,v)=>(0,i.jsx)(Jo,{...r,displayWidth:a,i:n,readonly:s,provided:t,isAnyRowBeingDragged:C,isThisRowBeingDragged:v.isDragging,preview:p,tileId:d,rowId:o,children:e.cells.map(((e,t)=>(0,i.jsxs)("div",{style:{display:"flex"},children:[w.current&&t<=(y.current||0)&&(0,i.jsx)(S.E.div,{transition:l.Z2,initial:vr(x,t,e.column.width),animate:vr(x,t,e.column.width)}),(0,i.jsx)(hr,{cell:e,readonly:s,tileId:d,tableContentPadding:c,isDragAndDrop:!1,wrapText:u,preview:p,editMode:g,fontSize:h,rowId:o,colId:e.column.id,rowIdx:n,colIdx:t,tileSelected:f,isAnyRowBeingDragged:C,canTableCutCopyPaste:m,ref:L}),!p&&!s&&(0,i.jsx)(fr.Z,{column:e.column,tileId:d}),w.current&&t>(y.current||0)&&(0,i.jsx)(S.E.div,{transition:l.Z2,initial:vr(x,t,e.column.width),animate:vr(x,t,e.column.width)})]},`${o}-${e.column.id}`)))})))},`row-${d}-${o}`)})),e.placeholder]})})})})})};var yr=(0,o.memo)(wr);const xr=j.ZP.div.withConfig({displayName:"TableTitle__TitleWrapper",componentId:"sc-dec03a82-0"})`
  padding: ${e=>e.$padding}px;
  padding-bottom: 0;
  div {
    text-align: left;
  }
  font-family: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.heading.name}};
  font-weight: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.heading.weight}};
  font-style: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.heading.style}};
  font-size: ${e=>e.$tableTitleFontSize}px;
  color: ${e=>e.theme.colors.editorHeading};
  line-height: 1.4;
`;var br=(0,o.forwardRef)(((e,t)=>{let{tileId:n,title:r,updateTableTitle:l,tableTitleFontSize:a,tableInnerPadding:s,readonly:d,preview:c,selected:u}=e;const{t:p}=(0,P.$G)(),h=(0,o.useRef)(null),f=(0,o.useRef)(null),{activateFirstCellInTable:g}=(0,o.useContext)(Io),m=(0,o.useMemo)((()=>({tab:()=>(g(),!0)})),[g]),v=(0,o.useCallback)((()=>{h.current&&h.current.focus()}),[h]),w=(0,o.useCallback)((()=>f.current?f.current.getBoundingClientRect():null),[f]);return(0,o.useImperativeHandle)(t,(()=>({focus:v,getBoundingClientRect:w}))),(0,i.jsx)(xr,{$tableTitleFontSize:a,$padding:s,ref:f,"data-disable-drag":!!u||void 0,children:(0,i.jsx)(U.Z,{labelId:`table-title-${n}`,ref:h,plainContent:r,placeholder:p("commandPrompt.tiles.table.tableTitlePlaceholder"),onContentChange:e=>(l(e),null),disabled:d,dataTestId:c?void 0:"table_tile_title",keyBindings:m,selectable:u})})}));const Cr=j.ZP.div.withConfig({displayName:"Scrollbar.styles__BrowserScrollbarArea",componentId:"sc-c4df1b30-0"})`
  height: 100%;
  overflow-y: hidden;
  overflow-x: scroll;
  width: 100%;
  -webkit-overflow-scrolling: auto !important;

  // Workaround to get scrollbar to be white on a dark background in Safari for iOS.
  filter: invert(1);
  > div {
    filter: invert(1);
  }

  // Show scrollbars for mobile touchscreen devices.
  /* Chrome, Safari and Opera */
  ::-webkit-scrollbar {
    display: revert;
  }
  /* Firefox */
  scrollbar-width: revert;
`;var Tr=e=>{const{onScroll:t,children:n,preview:r}=e,l=(0,o.useRef)(null);return(0,o.useEffect)((()=>{if(!l.current)return;const e=l.current;return e&&e.addEventListener("scroll",t),()=>{e&&e.removeEventListener("scroll",t)}}),[t]),r?(0,i.jsx)(i.Fragment,{children:n}):(0,i.jsx)(Cr,{ref:l,"data-testid":"browser_scrollbar_area",children:n})},Ir=n(24389);const $r=j.ZP.div.withConfig({displayName:"DraggingColumn__DraggingColumnRow",componentId:"sc-17deb374-0"})`
  display: flex;
  margin-bottom: 4px;
`;var kr=e=>{let{headers:t,rows:n,columnId:r,prepareRow:l,tileId:a,wrapText:s,getTableScrolledTop:d,tableContentPadding:c,tableInnerPadding:u,fontSize:p}=e;const h=(0,o.useRef)(null),f=t.find((e=>e.id===r));return(0,o.useEffect)((()=>{f&&(h.current.scrollTop=d())}),[f,d]),f?(0,i.jsxs)(Ki,{$radius:0,$isTextSelectable:!1,children:[(0,i.jsx)(Ir.Z,{}),(0,i.jsx)(qi,{$preview:!1,$isMobile:!1,$tableInnerPadding:u,ref:h,style:{padding:"0",borderRadius:"0",overflowY:"scroll"},children:n.map(((e,t)=>{l(e);const o=t+1===n.length?{marginBottom:0}:{};return(0,i.jsx)($r,{style:o,children:e.cells.filter((e=>e.column.id===r)).map(((e,o)=>(0,i.jsx)(hr,{key:`${e.row.id}-${e.column.id}`,cell:e,tileId:a,readonly:!0,tableContentPadding:c,isDragAndDrop:!0,wrapText:s,preview:!1,editMode:!1,fontSize:p,rowId:e.row.id,colId:e.column.id,rowIdx:t,colIdx:o,tileSelected:!1,rowCount:n.length,colCount:1,isAnyRowBeingDragged:!1,canTableCutCopyPaste:!1})))},e.id)}))})]}):null};var Er=e=>{let{children:t,disabled:n,innerRef:r}=e;const{activateFirstCellInTable:l,titleRef:s}=(0,o.useContext)(Io),d=(0,o.useCallback)((e=>{s.current?s.current.focus():l(),e.preventDefault()}),[s,l]),c=(0,o.useMemo)((()=>{const e=new Map;return e.set("enter",d),e}),[d]);return(0,i.jsx)(a.G,{"data-testid":"table_hotkeys",ref:r,bindings:c,disabled:n,children:t})},Rr=n(83575),Sr=n(62830),Pr=n.n(Sr),_r=n(97762),jr=n(83305),Lr=n(61867),Zr=n(40375),Dr=n(65220);var Mr=e=>{let{placeholder:t,tag:n,className:o,...r}=e;if(!n)return null;const l=n;return""===t.trim()?null:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"slate-placeholder","data-placeholder":t,...r,children:(0,i.jsx)(l,{className:o,children:(0,i.jsx)("span",{children:t})})})})};const Nr=j.ZP.div.withConfig({displayName:"SlateAsHtml__StyledWrapper",componentId:"sc-51b795f0-0"})`
  white-space: pre-wrap;
  overflow-wrap: break-word;
  -webkit-nbsp-mode: space;
  ${Dr.Z}
`,Ar=e=>{let{value:t,wrapText:n}=e;if(er.W_.isElementList(t))return(0,i.jsx)(i.Fragment,{children:t.map(((e,t)=>(0,i.jsx)(Ar,{value:e,wrapText:n},t)))});if(!er.W_.isElement(t)){const e=t,{text:n,...o}=e||{},r=""===n?"\ufeff":n;return(0,i.jsx)(Zr.Z,{text:n,leaf:o,children:r})}const{attributes:o={},children:r=[],...l}=t;return(0,i.jsx)(Lr.ZP,{attributes:o,element:t,...l,wrapText:n,children:r.map(((e,t)=>(0,i.jsx)(Ar,{value:e,wrapText:n},t)))})};var zr=e=>{let{slateData:t,style:n={},wrapText:o,placeholder:r,textSelectionColor:l}=e;const a=""!==r.trim(),s=Qo.cZ(t);return(0,i.jsx)(Nr,{className:"slate-editor",style:n,$wrapText:o,$textSelectionColor:l,children:a?(0,i.jsx)(Mr,{placeholder:r,tag:s.tag,className:s.className}):(0,i.jsx)(Ar,{value:t,wrapText:o})})},Br=n(49312);const Fr="data-tome-table-cell-content";function Ur(e){const t={};let n={};try{n=JSON.parse(e.getAttribute(Fr)||"{}")}catch{}finally{t.slateData=n.slateData||(0,jr.Tj)(e.innerText||e.innerHTML),t.color=n.color||Ro.l2.None}return t}function Vr(e,t,n,i,r,l){var a,s;let d=e;if(0===e.length)return d;const c=Mo(e,i,l),u=No(c),p=function(e){for(const t of e)if(new Set(t.map((e=>e.selected))).size>1)return!1;return!0}(u),h=function(e){for(let t=0;t<e[0].length;t++){const n=new Set;for(const i of e)n.add(i[t].selected);if(n.size>1)return!1}return!0}(u);let f;if(p&&h)f=u;else if(p){const e=[...Array(u[0].length).keys()],t=u.map(((e,t)=>e[0].selected?t:null)).filter((e=>null!==e));f=jo(u,t,e)}else if(h){const e=[...Array(u.length).keys()],t=u[0].map(((e,t)=>e.selected?t:null)).filter((e=>null!==e));f=jo(u,e,t)}else{const e=t.getLoadable(xo.SI).getValue();if(null===e)return d;n(xo.wK,[e]),d=[e],f=jo(c,[Zo(i,e.rowId)],[Do(i,e.colId)])}const g=function(e){return e.map((e=>e.map((e=>(0,Br.Q)((0,qo.vB)(e.serializedData).slateData))).join("\t"))).join("\n")}(f),m=function(e){const t=document.createElement("html"),n=document.createElement("body");t.appendChild(n);const i=document.createElement("table");n.appendChild(i);const r=document.createElement("tbody");return i.appendChild(r),e.forEach((e=>{const t=document.createElement("tr");r.appendChild(t),e.forEach((e=>{const n=document.createElement("td"),i=(0,_r.uS)((0,o.createElement)(Ar,{value:(0,qo.vB)(e.serializedData).slateData,wrapText:!1}));n.innerHTML=i,n.setAttribute(Fr,e.serializedData),t.appendChild(n)}))})),t.outerHTML}(f);return null===(a=r.clipboardData)||void 0===a||a.setData("text/plain",g),null===(s=r.clipboardData)||void 0===s||s.setData("text/html",m),r.preventDefault(),d}function Hr(e,t,n){const i=(0,r.Zl)(xo.wK),l=(0,r._8)((t=>{let{snapshot:i,set:o}=t;return t=>{Vr(i.getLoadable(xo.sO).getValue(),i,o,e.current,t,n)}}),[e,n]),a=(0,r._8)((i=>{let{snapshot:o,set:r}=i;return i=>{const l=Vr(o.getLoadable(xo.sO).getValue(),o,r,e.current,i,n).map((e=>(0,no.hT)(e.rowId,e.colId,Ro.uJ)));t(l)}}),[t,e,n]),s=(0,r._8)((o=>{let{snapshot:r}=o;return o=>{var l,a;const s=r.getLoadable(xo.SI).getValue();if(!s)return;const d=e.current.data.map((e=>e.id)),c=e.current.columns.map((e=>e.accessor)),u=d.indexOf(s.rowId),p=c.indexOf(s.colId),h=(null===(l=o.clipboardData)||void 0===l?void 0:l.getData("text/plain"))||"",f=(null===(a=o.clipboardData)||void 0===a?void 0:a.getData("text/html"))||"",g=h.split("\n").map((e=>e.split("\t").map((e=>({slateData:(0,jr.Tj)(e),color:Ro.l2.None})))));const m=function(e){const t=(new DOMParser).parseFromString(e,"text/html"),n=t.getElementsByTagName("table")[0];if(!n)return[[{slateData:(0,jr.Tj)(t.body.textContent||""),color:Ro.l2.None}]];const i=[],o=n.getElementsByTagName("tr");for(let e=0;e<o.length;e++){const t=o[e].getElementsByTagName("td");for(let n=0;n<t.length;n++){const o=t[n];i[e]||(i[e]=[]),i[e][n]=Ur(o)}}return i}(f),v=m.length>=g.length?m:g,w=v[0].length;for(const e of v)e.length=w;const{tableUpdates:y,newRowIds:x,newColIds:b}=function(e){let{numTableRows:t,numTableCols:n,numPasteRows:i,numPasteCols:o,activeRowIdx:r,activeColIdx:l}=e;const a=r+i-t,s=l+o-n,d=[],c=[],u=[];for(let e=0;e<a;e++){const e=Pr()();c.push(e),d.push((0,no.Gq)(e))}for(let e=0;e<s;e++){const e=Pr()();u.push(e),d.push((0,no.El)(So.Hr.string,e))}return{tableUpdates:d,newRowIds:c,newColIds:u}}({numTableRows:d.length,numTableCols:c.length,numPasteRows:v.length,numPasteCols:w,activeRowIdx:u,activeColIdx:p}),C=d.concat(x),T=c.concat(b),I=[];v.forEach(((e,t)=>{e.forEach(((e,i)=>{const o=u+t,r=p+i,l=C[o],a=T[r];y.push((0,no.Gb)(o,r,e)),I.push({rowId:l,colId:a,tileId:n})}))})),y.length>0&&t(y),i(I)}}),[t,i,e,n]);return(0,o.useMemo)((()=>({cutSelectedCells:a,copySelectedCells:l,pasteSelectedCells:s})),[l,a,s])}var Or=e=>{var t,n,i,r,l;const a=(0,o.useRef)(null===(t=e)||void 0===t?void 0:t.reorderingColumnId),s=(0,o.useRef)(null===(n=e)||void 0===n?void 0:n.reorderingColumnIdx),[d,c]=(0,o.useState)((null===(i=e)||void 0===i?void 0:i.dropPositionIdx)||null),u=(0,o.useRef)(null),p=(0,o.useRef)(null===(r=e)||void 0===r?void 0:r.draggingColumnIntialX),h=(0,o.useRef)(null===(l=e)||void 0===l?void 0:l.draggingColumnIntialY),f=(0,o.useRef)(null),g=(0,o.useCallback)((e=>{a.current=e}),[a]),m=(0,o.useCallback)((e=>{s.current=e}),[s]),v=(0,o.useCallback)((e=>{u.current=e}),[u]),w=(0,o.useCallback)((e=>{f.current=e}),[f]),y=(0,o.useCallback)((e=>{p.current=e}),[p]),x=(0,o.useCallback)((e=>{h.current=e}),[h]);return(0,o.useMemo)((()=>({reorderingColumnIdRef:a,reorderingColumnIdxRef:s,dropPositionIdx:d,setDropPositionIdx:c,draggingColumnRef:u,draggingColumnIntialXRef:p,draggingColumnIntialYRef:h,scrollableContainerRef:f,setReorderingColumnId:g,setReorderingColumnIdx:m,setDraggingColumnElement:v,setDraggingColumnIntialX:y,setDraggingColumnIntialY:x,setScrollableContainerElement:w})),[d,v,y,x,g,m,w])};const Wr=j.ZP.div.withConfig({displayName:"TableHeaderRow__HeaderRowWrapper",componentId:"sc-b93a0121-0"})`
  display: flex;
  position: sticky;
  z-index: 4;
  top: 0;
`,Yr=j.ZP.div.withConfig({displayName:"TableHeaderRow__HeaderRow",componentId:"sc-b93a0121-1"})`
  ${Co.Y8}
  background-clip: padding-box;
  padding-bottom: '0';
  // For the last cell in a row, add some extra margin to the ResizeHandle to
  // account for the scrollbar
  & div:last-of-style {
    margin-right: 20px;
  }
`,Gr=j.ZP.div.withConfig({displayName:"TableHeaderRow__HeaderCellContainer",componentId:"sc-b93a0121-2"})`
  display: flex;
  position: relative;
`;function Jr(e,t,n){const i=e===t;return{width:`${i?n:0}px`,marginRight:(i?4:0)+"px"}}var Xr=e=>{let{headerGroup:t,tileId:n,anyColumnResizing:r,readonly:a,preview:s}=e;var d,c;const{getHeaderGroupProps:u,headers:p}=t,{reorderingColumnIdRef:h,reorderingColumnIdxRef:f,dropPositionIdx:g}=(0,o.useContext)(Go),m=u(),{width:v}=(null===(d=m)||void 0===d?void 0:d.style)||{};return(0,i.jsxs)(Wr,{style:{minWidth:parseInt(v,10)},children:[!a&&(0,i.jsx)(Co.t_,{}),(0,i.jsx)(Yr,{...m,style:{...null===(c=m)||void 0===c?void 0:c.style,width:"fit-content"},$preview:s,children:p.map(((e,t)=>(0,i.jsxs)(Gr,{children:[h.current&&t<=(f.current||0)&&(0,i.jsx)(S.E.div,{transition:l.Z2,initial:Jr(g,t,e.width),animate:Jr(g,t,e.width)}),e.render("Header",{columnIdx:t,isStatic:!1,tileId:n,readonly:a,preview:s,anyColumnResizing:r}),!(s||a||h.current&&t===(f.current||0))&&(0,i.jsx)(fr.Z,{column:e,tileId:n}),h.current&&t>(f.current||0)&&(0,i.jsx)(S.E.div,{transition:l.Z2,initial:Jr(g,t,e.width),animate:Jr(g,t,e.width)})]},`columnHeader-${e.id}`)))})]})},Kr=n(87473),qr=n(20569);const Qr=(e,t)=>{let{editable:n,placeholder:o,...r}=e;const{wrapText:l,value:a,textSelectionColor:s,contentEditableStyles:d}=r;return n?(0,i.jsx)(qr.Z,{ref:t,placeholder:o,...r}):(0,i.jsx)(zr,{wrapText:l,slateData:a,style:d,placeholder:o,textSelectionColor:s})};var el=(0,o.memo)((0,o.forwardRef)(Qr)),tl=n(97332),nl=n(40419),il=n(78137);var ol=(e,t,n,i,r)=>{const{activateNeighborCell:l,activateCell:a,isLastRow:s,focusOnTable:d,applyMultipleUpdates:c}=(0,o.useContext)(Io),u=(0,o.useCallback)((()=>{if(s(e)){i.current=!0;const o=Pr()();c([(0,no.hT)(e,t,n.current),(0,no.Gq)(o)]),a(o,t)}else l(e,t,Ko.N.Down);return d(),!0}),[s,e,d,i,c,t,n,a,l]),p=(0,o.useMemo)((()=>({"mod+b":e=>((0,il.h4)(e,"bold"),!0),"mod+i":e=>((0,il.h4)(e,"italic"),!0),"mod+u":e=>((0,il.h4)(e,"underlined"),!0),"mod+z":(e,t)=>(t.stopPropagation(),e.undo(),!0),"mod+shift+z":(e,t)=>(t.stopPropagation(),e.redo(),!0),esc:e=>((0,nl.tCj)(e),r(),!0),enter:u,tab:()=>(l(e,t,Ko.N.Right),r(),!0),"shift+tab":()=>(l(e,t,Ko.N.Left),r(),!0)})),[u,r,l,e,t]);return p};function rl(e){const t=(0,o.useRef)(e),n=(0,o.useCallback)((e=>{t.current=e}),[]),i=(0,o.useCallback)((e=>{const n=t.current,i=(0,Ro.vk)(n,e);t.current=i}),[]),r=(0,o.useCallback)((e=>{const n=t.current,i=(0,Ro.gF)(n,e);t.current=i}),[]);return{cellDataRef:t,setCellData:n,setCellColor:i,setSlateData:r}}const ll=(0,j.ZP)(rr).withConfig({displayName:"FloatingCellEditor__Positioner",componentId:"sc-ef694764-0"})`
  position: absolute;
  left: ${e=>e.$left}px;
  top: ${e=>e.$top}px;
  height: auto;
  width: ${e=>e.$width}px;
`;var al=e=>{let{tileRef:t,tableContentPadding:n,fontSize:r}=e;var l,a,s,d;const{floatingCellProps:c,cleanUpStates:u}=(0,o.useContext)(or),{rowId:h,colId:f,serializedCellData:g,cellRef:m,domFocusCellKeybindings:v}=c,w=(0,k.l)(p.k6),{left:y=0,top:x=0}=(null===(a=t)||void 0===a||null===(l=a.current)||void 0===l?void 0:l.getBoundingClientRect())||{},{left:b=0,top:C=0,width:T=0}=(null===(d=m)||void 0===d||null===(s=d.current)||void 0===s?void 0:s.getBoundingClientRect())||{},I=(b-y)/w,$=(C-x)/w,E=T/w,R=(0,o.useRef)(null),{cellDataRef:S,setSlateData:P}=rl((0,qo.vB)(g)),_=(0,o.useRef)(!1),{updateCell:L}=(0,o.useContext)(Io),Z=(0,o.useCallback)((()=>{_.current||L(h,f,S.current),u()}),[u,L,h,f,S]),D=ol(h,f,S,_,v),M=Ro.mR.fromCellColor(S.current.color),N=(0,j.Fg)();return(0,i.jsx)(ll,{$left:I,$top:$,$width:E,$fontSize:r,"data-testid":"table_floating_cell_editor",$preview:!1,$backgroundColor:M.getBackgroundColor(N),$textColor:M.getTextColor(N),children:(0,i.jsxs)(tl.Z,{onClick:()=>Z(),listenerOptions:{capture:!0},children:[(0,i.jsx)(eo,{$isFocused:!0}),(0,i.jsx)(el,{editorId:`floatingcell-${h}-${f}`,ref:R,value:S.current.slateData,setValue:P,placeholder:" ",onFocus:()=>{},onBlur:Z,autoFocus:!0,keyBindings:D,editable:!0,wrapText:!0,textSelectionColor:M.getTextSelectionColor(N),contentEditableStyles:{padding:`${n}px`},features:[Kr.Ar.MARKS,Kr.Ar.REWRITE,Kr.Ar.LINKS,Kr.Ar.LISTS,Kr.Ar.REFERENCES]})]})})};var sl=()=>{const[e,t]=(0,o.useState)(null),n=(0,o.useCallback)((()=>{t(null)}),[t]);return(0,o.useMemo)((()=>({floatingCellProps:e,setFloatingCellProps:t,cleanUpStates:n})),[e,n])};const dl=(e,t)=>{let{value:n,isEditable:r,wrapText:l,rowId:a,colId:s,setIsFocused:d,domFocusCellKeybindings:c,padding:u}=e;const{updateCell:p}=(0,o.useContext)(Io),{cellDataRef:h,setCellData:f,setSlateData:g}=rl((0,qo.vB)(n)),m=(0,o.useRef)(!1);(0,o.useEffect)((()=>f((0,qo.vB)(n))),[n,f]);const v=(0,o.useCallback)((()=>{m.current||p(a,s,h.current),d(!1)}),[d,p,a,s,h]),w=(0,o.useCallback)((()=>{d(!0),m.current=!1}),[d]),y=ol(a,s,h,m,c),x=(0,o.useMemo)((()=>({padding:`${u}px`})),[u]),b=Ro.mR.fromCellColor(h.current.color),C=(0,j.Fg)();return(0,i.jsx)(el,{editorId:`editablecell-${a}-${s}`,ref:t,value:h.current.slateData,setValue:g,onBlur:v,onFocus:w,placeholder:" ",editable:r&&l,disableHistory:!1,keyBindings:y,wrapText:l,contentEditableStyles:x,textSelectionColor:b.getTextSelectionColor(C),features:[Kr.Ar.MARKS,Kr.Ar.REWRITE,Kr.Ar.LINKS,Kr.Ar.LISTS,Kr.Ar.REFERENCES]})};var cl=(0,o.memo)((0,o.forwardRef)(dl));const ul=j.ZP.div.withConfig({displayName:"TableHeader.styles__ColumnEditorTools",componentId:"sc-fb50e271-0"})`
  height: 20px;
  z-index: 2;
`,pl=j.ZP.div.withConfig({displayName:"TableHeader.styles__HeaderDiv",componentId:"sc-fb50e271-1"})`
  height: 100%;
  position: relative;
  font-weight: 600;
  border-radius: 3px;
  margin: 0;
  margin-right: ${e=>e.$marginRight}px;
`,hl=j.ZP.div.withConfig({displayName:"TableHeader.styles__ColumnDragHandle",componentId:"sc-fb50e271-2"})`
  width: 20px;
  height: 3px;
  border-radius: 3px;
  background-color: ${e=>e.theme.colors.contrast16};
  opacity: ${e=>e.$visible?1:0};
`,fl=j.ZP.div.withConfig({displayName:"TableHeader.styles__ColumnDragHover",componentId:"sc-fb50e271-3"})`
  height: 15px;
  position: absolute;
  top: 4px;
  left: 8px;
  cursor: grab;
  display: flex;
  align-items: center;
  justify-content: center;

  &:hover ${hl} {
    background-color: ${e=>e.theme.colors.contrast};
    opacity: 1;
  }
`;var gl=(e,t,n,i,r,l,a,s)=>{const{reorderingColumnIdRef:d,dropPositionIdx:c,setDropPositionIdx:u,draggingColumnRef:h,setReorderingColumnId:f,setReorderingColumnIdx:g,setDraggingColumnIntialX:m,setDraggingColumnIntialY:v,scrollableContainerRef:w}=(0,o.useContext)(Go),y=(0,k.l)(p.k6),x=w.current,b=(0,o.useCallback)((e=>{const i=[...n];i.splice(t+1);const o=i.reduce(((e,t)=>e+parseFloat((t.width||"0").toString())+2*Xi.YF),Co.QG)-parseFloat((n[t].width||"0").toString())/2;if(x){return e-(o+x.getBoundingClientRect().left-x.scrollLeft)}return 0}),[t,n,x]),C=(0,o.useCallback)((e=>{const i=b(e);if(i>0){let e,o=0;for(e=t+1;e<n.length;e++){const t=n[e].width;if(i<o+t/2){u(e-1);break}o+=t}e===n.length&&u(e-1)}else{let e,o=0;for(e=t-1;e>=0;e--){const t=n[e].width;if(-i<o+t/2){u(e+1);break}o+=t}e<0&&u(0)}}),[t,n,b,u]),T=(0,o.useCallback)((()=>{if(h.current){const e=h.current.getBoundingClientRect(),t=e.width/2+e.left;C(t)}}),[h,C]),I=(0,o.useCallback)((()=>{if(x&&h.current){const e=x.getBoundingClientRect(),t=h.current.getBoundingClientRect(),n=x.scrollWidth>e.width,i=x.scrollWidth-e.width;if(!n)return;((e,t)=>{const n=t.width-.9*t.width;return e>=t.right-n})(t.right,e)&&x.scrollLeft<i?(x.scrollLeft+=1,requestAnimationFrame(I)):((e,t)=>{const n=t.width-.9*t.width;return e<=t.left+n})(t.left,e)&&x.scrollLeft>0&&(x.scrollLeft-=1,requestAnimationFrame(I))}}),[h,x]);return{bindDrag:(0,se.c0)((n=>{let{down:o,movement:[p,w],tap:b,event:$,xy:[k]}=n;if(b)a($);else{if(s($),!d.current){var E,R,S,P;const n=null===(E=i)||void 0===E?void 0:E.getBoundingClientRect();m(null===(R=n)||void 0===R?void 0:R.left),v(null===(S=n)||void 0===S?void 0:S.bottom),null===(P=x)||void 0===P||P.addEventListener("scroll",T),f(e.id),g(t),u(t),l()}var _;if(h.current&&(h.current.style.transform=`scale(${y}) translate(${p}px, ${w}px)`),C(k),I(),!o)r(d.current,c),f(null),g(null),u(null),m(null),v(null),null===(_=x)||void 0===_||_.removeEventListener("scroll",T)}}),{filterTaps:!0})}};const ml=e=>{let{colId:t,tileId:n,columnWidth:l,bindDrag:a}=e;const s=(0,o.useMemo)((()=>({colId:t,tileId:n})),[t,n]),d=(0,r.sJ)((0,xo.$A)(s)),c=l?parseInt(l.toString(),10)-16-4:l;return(0,i.jsx)(fl,{"data-testid":"table_column_tool_drag_controls","data-disable-drag":!0,...a(),style:{width:c},children:(0,i.jsx)(hl,{$visible:d})})};var vl=e=>{let{column:t,columns:n,columnIdx:r,isDragAndDrop:l,tileId:a,anyColumnResizing:s,readonly:d,preview:c}=e;const{id:u,getHeaderProps:p}=t,{moveColumn:h,deselectAllCells:f,selectColumn:g,appendSelectColumn:m,selectColsFromColToActive:v}=(0,o.useContext)(Io),[w,y]=(0,o.useState)(null),x=(0,o.useRef)(),b=(0,o.useCallback)((e=>{(0,bo.ZP)(e)?m(u):e.shiftKey?v(u):g(u),x.current.controlOpen((e=>!e),{x:e.clientX,y:e.clientY})}),[m,u,v,g]),C=(0,o.useCallback)((()=>{x.current.controlOpen(!1)}),[]),{bindDrag:T}=gl(t,r,n,w,h,f,b,C),{reorderingColumnIdRef:I}=(0,o.useContext)(Go),$=I.current===u&&!l,k=p(),E=(0,o.useMemo)((()=>({...k.style,...$?{opacity:"0",width:"0",marginRight:"0"}:{}})),[k.style,$]),R=(0,o.useCallback)((e=>{(e.shiftKey||(0,bo.ZP)(e))&&e.preventDefault(),e.stopPropagation()}),[]);return(0,i.jsx)(Yo,{disabled:d||s,colId:t.id,currentColor:null,tileId:a,dropdownRef:x,showRowOperations:!1,showColumnOperations:!0,children:(0,i.jsx)(pl,{"data-testid":"table_column",ref:y,...k,style:E,$marginRight:(0,Gi.pP)(c,l,d),children:!c&&(0,i.jsx)(ul,{"data-testid":"table_column_tool",onMouseDown:R,children:!d&&!s&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ml,{colId:t.id,tileId:a,columnWidth:t.width,bindDrag:T})})})})})};var wl=(0,o.forwardRef)(((e,t)=>{let{getContainerBoundingClientRect:n,tableRef:r,scale:l,children:a}=e;const[s,d]=(0,o.useState)({height:1}),c=(0,o.useCallback)((e=>{if(e){var i;const t=n(),o=null===(i=r.current)||void 0===i?void 0:i.getBoundingClientRect(),a=(t.height-(e.getBoundingClientRect().top-t.top))/l;o&&o.bottom>t.bottom?d({height:a}):d({maxHeight:a})}t(e)}),[n,t,l,r]);return(0,i.jsx)(Qi,{ref:c,$scale:l,style:s,children:a})})),yl=n(97732);function xl(e){var t;return"INPUT"===(null===(t=e.target)||void 0===t?void 0:t.tagName)||(0,Br.V)(e.target)}var bl=(0,o.memo)((e=>{const{cutSelectedCells:t,copySelectedCells:n,pasteSelectedCells:r}=e,l=(0,o.useCallback)((e=>{xl(e)||t(e)}),[t]),a=(0,o.useCallback)((e=>{xl(e)||n(e)}),[n]),s=(0,o.useCallback)((e=>{xl(e)||r(e)}),[r]);return(0,yl.Z)({onCut:l,onCopy:a,onPaste:s}),(0,i.jsx)(i.Fragment,{})}));const Cl={Cell:cl,Header:vl,width:175,minWidth:50},Tl={...Cl,minWidth:10},Il=e=>{let{tileData:t,updateTileData:n,radius:l,preview:a,width:d,isTileEndpoint:c=!1,isMobile:h=!1,tableContentFontSize:f,tableContentPadding:g,innerTilePadding:m,tableTitleFontSize:v,readonly:w=!0,editMode:y,selected:x,initialColumnReorderingState:b,resizeRef:C,keyBindingsRef:T,pageId:I="",pageKind:$}=e;var E,S,P,_,j,L,Z,D,M,N;const A=(0,r.Zl)(p.uz),{id:z}=t,B=(0,k.l)(p.k6),{getController:F}=(0,o.useContext)(u.Z),U=(null===(E=F?F($,I):void 0)||void 0===E?void 0:E.isSingleTileRow(z))||!1,H=(0,Gi.JA)({width:d,isMobile:h,preview:a,isSingleTileRow:U}),O=(0,Gi.nd)(t,H),{showTitle:W,wrapText:Y}=t.tableTileData,G=!a&&x&&y,J=null==Y||Y,X=(0,o.useCallback)((e=>(0,Gi.Sd)(n,e)),[n]),K=(0,o.useCallback)((e=>(0,Gi.Mj)(n,e)),[n]),q=(0,o.useRef)(O);(0,o.useEffect)((()=>{q.current=O}),[O]);const Q=(0,Rr.Z)(q,z),ee=Q.deselectAllCells,te=(0,no.ZP)(X,ee),ne=Hr(q,te.applyMultipleUpdates,z),ie=(0,o.useRef)(null),oe=(0,o.useRef)(null),re=(0,o.useRef)(null),le=(0,o.useRef)(null),ae=(0,o.useCallback)((()=>{var e;return null===(e=oe.current)||void 0===e?void 0:e.getBoundingClientRect()}),[]),se=Or(b),{reorderingColumnIdRef:de,draggingColumnIntialXRef:ce,draggingColumnIntialYRef:ue,setDraggingColumnElement:pe,setScrollableContainerElement:he}=se,fe=w||!!de.current,ge=sl(),me=!!ge.floatingCellProps,ve=(0,o.useCallback)(((e,t)=>e.id||`${t}`),[]),we=(0,o.useCallback)((()=>{T.current&&s(T.current)}),[T]),ye=(0,o.useCallback)((()=>{ee(),we()}),[ee,we]);(0,o.useEffect)((()=>{x&&(A((()=>ye)),we())}),[x,we,A,ye]);const xe=(0,o.useMemo)((()=>a?Tl:Cl),[a]),{getTableProps:be,getTableBodyProps:Ce,headerGroups:Te,headers:Ie,rows:$e,prepareRow:ke,columns:Ee,state:Re}=(0,Yi.useTable)((0,o.useMemo)((()=>({...O,defaultColumn:xe,getRowId:ve})),[xe,ve,O]),Yi.useBlockLayout,ho),Se=(0,o.useRef)(null);(0,o.useEffect)((()=>{he(oe.current)}),[he]),(0,o.useEffect)((()=>{var e,t;Se.current&&!(null===(e=Re.columnResizing)||void 0===e?void 0:e.isResizingColumn)&&(0,Gi.Io)(Ee,q.current.columns,H,n),Se.current=null===(t=Re.columnResizing)||void 0===t?void 0:t.isResizingColumn}),[null===(S=Re.columnResizing)||void 0===S?void 0:S.isResizingColumn]),(0,o.useInsertionEffect)((()=>{var e;return(null===(e=Re.columnResizing)||void 0===e?void 0:e.isResizingColumn)?document.body.style.cursor="col-resize":document.body.style.cursor="",()=>{document.body.style.cursor=""}}),[null===(P=Re.columnResizing)||void 0===P?void 0:P.isResizingColumn]),Wi()(Te.length<=1,"table has more than 1 header group!");const Pe=Te[0];(0,o.useEffect)((()=>{w&&ee()}),[w,ee]);const _e=(0,o.useCallback)((()=>{ee()}),[ee]),je=(0,o.useCallback)((()=>{var e,t,n;return(null===(e=oe)||void 0===e?void 0:e.current)&&(null===(n=oe)||void 0===n||null===(t=n.current)||void 0===t?void 0:t.scrollTop)||0}),[]),Le=(0,o.useMemo)((()=>O.columns.reduce(((e,t)=>t.width&&Number(t.width)?e+Number(t.width):e),0)),[O.columns]),[Ze,De]=(0,o.useState)(Le>d),[Me,Ne]=(0,o.useState)(!0),Ae=(0,o.useCallback)((e=>{const t=e.target,n=t.scrollLeft>=t.scrollWidth-t.clientWidth;n&&Me?Ne(!1):n||Me||Ne(!0)}),[Me]);(0,o.useEffect)((()=>{oe.current?De(oe.current.scrollWidth>oe.current.clientWidth):De(Le>d)}),[null===(_=oe.current)||void 0===_?void 0:_.scrollWidth,null===(j=oe.current)||void 0===j?void 0:j.clientWidth,Le,d]);const ze=(0,o.useMemo)((()=>({...te,...Q,focusOnTable:we,tableRef:oe,titleRef:re,tableDataRef:q,activeCellRef:le})),[we,te,Q]),Be=(0,o.useMemo)((()=>c?vt.WX:m),[m,c]);return(0,i.jsx)(Go.Provider,{value:se,children:(0,i.jsx)(or.Provider,{value:ge,children:(0,i.jsx)(Io.Provider,{value:ze,children:(0,i.jsxs)(Er,{innerRef:T,disabled:h||a||!x,children:[(0,i.jsx)(bi,{resizeRef:C,children:(0,i.jsxs)(Ki,{$radius:l,$isTextSelectable:!y&&!a,onMouseDown:_e,ref:ie,children:[W&&(0,i.jsx)(br,{ref:re,tileId:t.id,title:(null===(Z=t)||void 0===Z||null===(L=Z.tableTileData)||void 0===L?void 0:L.title)||"",updateTableTitle:K,tableTitleFontSize:v,tableInnerPadding:Be,readonly:w,preview:a,selected:x}),(0,i.jsx)(Tr,{onScroll:Ae,preview:a,children:(0,i.jsxs)(qi,{ref:oe,$preview:a,$readonly:fe,$isMobile:h,$tableInnerPadding:Be,...be(),"data-disable-drag":!!x||void 0,children:[Pe&&(0,i.jsx)(Xr,{headerGroup:Pe,readonly:fe,preview:a,tileId:z,anyColumnResizing:!!(null===(D=Re.columnResizing)||void 0===D?void 0:D.isResizingColumn)}),G&&(0,i.jsx)(bl,{...ne}),(0,i.jsx)(yr,{prepareRow:ke,getTableBodyProps:Ce,rows:$e,displayWidth:d-m,readonly:fe,tileId:z,tableContentPadding:g,wrapText:J,preview:a,fontSize:f,editMode:y,tileSelected:x,canTableCutCopyPaste:G})]})}),(0,i.jsx)(R.M,{children:Ze&&Me&&(0,i.jsx)(to,{"data-testid":"table_tile_scrim",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},$isPreview:a})})]})}),de.current&&(0,i.jsx)(V.Z,{left:(null===(M=ce)||void 0===M?void 0:M.current)||0,top:(null===(N=ue)||void 0===N?void 0:N.current)||0,children:(0,i.jsx)(wl,{ref:pe,tableRef:oe,getContainerBoundingClientRect:ae,scale:B,children:(0,i.jsx)(kr,{headers:Ie,rows:$e,columnId:de.current,prepareRow:ke,tileId:z,wrapText:J,tableContentPadding:g,tableInnerPadding:Be,fontSize:f,getTableScrolledTop:je})})}),me&&(0,i.jsx)(al,{tileRef:ie,tableContentPadding:g,fontSize:f})]})})})})};var $l=(0,o.memo)(Il);const kl=j.ZP.iframe.withConfig({displayName:"EmbedIframe__StyledIFrame",componentId:"sc-69f35f35-0"})`
  border-width: 0px;
  border-radius: ${e=>e.radius}px;
  height: 100%;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  width: 100%;
  pointer-events: ${e=>e.pointerEventsEnabled?"auto":"none"};
`,El=j.ZP.div.withConfig({displayName:"EmbedIframe__Shimmer",componentId:"sc-69f35f35-1"})`
  height: 100%;
  width: 100%;
  animation: ${Rl="60vw",j.F4`
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: ${Rl} 0;
  }
`};
  position: relative;

  ${e=>{let{showLoadingShimmer:t,theme:n}=e;return t&&`\n    background-image: linear-gradient(to right, ${n.colors.page} 0%, ${n.colors.loadingShimmer} 20%, ${n.colors.page} 40%, ${n.colors.page} 100%)};\n    background-size: 100% 100%;\n    animation-duration: 5s;\n    animation-fill-mode: forwards;\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n    border-radius: 13px;\n  `}};
`;var Rl;var Sl=e=>{let{src:t,alwaysRender:n=!0,canEdit:l,tileId:a,tileType:s,activeDragInProgress:c=!1,isMobile:u,isTileEndpoint:f,...g}=e;const[m,v]=(0,o.useState)(!1),[w,y]=(0,o.useState)(!!t);(0,o.useEffect)((()=>{const e=setTimeout((()=>{y(!1)}),1e4);return()=>{clearTimeout(e)}}),[]);const x=(0,r.sJ)((0,h.j6)({tileId:a})),b=(0,k.l)(p.oG);let C=t,T=!c&&(x||b||f||!l);u&&!f&&(T=!1);const{ref:I,inView:$}=(0,cn.YD)({});$||m||n||(C=""),!$||m||n||v(!0);const E=e=>{"INITIAL_LOAD"===e.data.type&&"https://www.figma.com"===e.origin&&(document.activeElement&&"IFRAME"===document.activeElement.tagName&&document.activeElement.blur(),window.removeEventListener("message",E))},R=s===d.YUT.Looker?"allow-top-navigation":"";return(0,i.jsx)(El,{showLoadingShimmer:w,children:(0,i.jsx)(kl,{referrerPolicy:"no-referrer",sandbox:`allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts ${R}`,ref:I,...g,src:C,pointerEventsEnabled:T,onLoad:()=>{var e,t,n,i;null===(i=window)||void 0===i||null===(n=i.webkit)||void 0===n||null===(t=n.messageHandlers)||void 0===t||null===(e=t.frameHandler)||void 0===e||e.postMessage(!0),y(!1),C&&C.startsWith("https://www.figma.com/embed")&&window.addEventListener("message",E)}})})};var Pl=j.ZP.div.withConfig({displayName:"EmbedStyles",componentId:"sc-1cc7564f-0"})`
  background-color: ${e=>{let{theme:t}=e;return t.colors.transparent}};
  border-radius: ${e=>{let{radius:t}=e;return t}}px;
  overflow: hidden;
  height: 100%;
  position: relative;
  width: 100%;
`,_l=n(85626),jl=n(72988);function Ll(e,t,n){return e&&t?(0,i.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:n}):n}const Zl=e=>{let{tileId:t,tileType:n,pageId:l="",url:a,preview:s,canEdit:c,isMobile:u,isTileEndpoint:p,updateTileData:f,updateContentLink:g,height:m,width:v,sizes:w}=e;var y,x,b;const C=(0,r.sJ)(h.X1),T=ut(),I=!!(0,jl.WI)(),$=(0,r.sJ)((0,h.k4)({pageId:l,isTileEndpoint:p,preview:s})),k=(null===(y=C)||void 0===y?void 0:y.showIcon)&&!(null===(b=C)||void 0===b||null===(x=b.excludeTileTypes)||void 0===x?void 0:x.includes(n));if((0,o.useEffect)((()=>{const{tileType:e}=(0,_l.Q)(a??"");e&&e!==n&&f((t=>({...t,type:e})))}),[n,f,a]),s||k||!a){return Ll(u,a,(0,i.jsx)(jt,{tileId:t,tileType:n,sizes:w,updateContentLink:g,preview:s,width:v,height:m}))}const{url:E}=(0,_l.Q)(a);if(!E)return null;const R=n===d.YUT.Figma,S=n===d.YUT.Web&&E.includes("typeform.com"),P=R||S;return(0,i.jsxs)(Pl,{"data-testid":"web_embed_tile",radius:w.tileSizes.radius,children:[Ll(u,a,(0,i.jsx)(dt,{isMobile:u,"data-tome-bypass-tap-navigation":"EmbedTile__EmbedStyles",style:{zIndex:1}})),(0,i.jsx)(Sl,{radius:w.tileSizes.radius,src:$?E:"",alwaysRender:!P,allowFullScreen:!0,canEdit:c,tileId:t,isMobile:u,isTileEndpoint:p,tileType:n,activeDragInProgress:T||I})]})};var Dl=(0,o.memo)(Zl),Ml=n(18814),Nl=n(40304),Al=n(86090),zl=n(18579);var Bl=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!((e,t)=>{if(!t||e.length>1)return!1;const n=e[0];return(n.type===Kr.JB||n.type===Kr.uX||n.type===Kr.Oo)&&1===n.children.length&&""===n.children[0].text})(e,t))return"";const i=(e=>{if(1!==e.length)return Kr.l$.DEFAULT;const[t]=e;return t.type===Kr.uX&&t.placeholder||Kr.l$.DEFAULT})(e);return i!==Kr.l$.DEFAULT?(e=>{switch(e){case Kr.l$.UNTITLED:return Al.ZP.t("utils.slate.untitledPlaceholder");case Kr.l$.DEFAULT:default:return zl.QT}})(i):(e=>{if(1!==e.length)return!1;const[t]=e;return t.type===Kr.uX&&1===t.children.length&&(1===t.level||0===t.level)&&""===t.children[0].text})(e)?Al.ZP.t("utils.slate.titlePlaceholder"):(e=>{if(1!==e.length)return!1;const[t]=e;return t.type===Kr.uX&&1===t.children.length&&(2===t.level||3===t.level)&&""===t.children[0].text})(e)?Al.ZP.t("utils.slate.headingPlaceholder"):n?zl.sC:zl.QT},Fl=n(70203),Ul=n(97712),Vl=n(33824);const Hl=j.ZP.div.withConfig({displayName:"SlateTextTile__ClickTargetFlexBoxWrapper",componentId:"sc-44125b8a-0"})`
  width: 100%;
  height: 100%;
  min-height: ${e=>{let{$isMobileSingleTile:t}=e;return t?"calc(100vh - 62px - 24px - 160px)":"inherit"}};
  display: flex;
  flex-direction: column;
  justify-content: ${e=>{let{$verticalAlignment:t}=e;return t}};
  text-align: ${e=>{let{$horizontalAlignment:t}=e;return t}};
  pointer-events: ${e=>{let{$disablePointerEvents:t}=e;return t?"none":"null"}};
`;var Ol=e=>{let{tileId:t,tomeId:n,pageId:l="",pageKind:p,updateTileData:f,preview:g,editMode:m,selected:v,bodyFontSize:w,innerTilePadding:y,resizeRef:b,textTileData:C,isMobile:T,theme:I=null,keyBindingsRef:$,onEditorChange:k=(()=>{}),onEditorFocus:E=(()=>{}),onEditorBlur:R=(()=>{}),onEditorEscape:S=(()=>{}),setEditorHandle:P=(()=>{})}=e;var _,j,L,Z,D,M,N,A,z;const B=(0,pt.Z)(),F=(0,r.sJ)((0,Ul.w)(t)),U=(0,r.sJ)(oe.cm),V=(0,r.sJ)(oe.s5),H=U||V,{getController:O}=(0,o.useContext)(u.Z),W=O?O(p,l):void 0,[Y,G]=(0,o.useState)(T&&!!(null===(_=W)||void 0===_?void 0:_.isSingleTilePage(t)));(0,o.useEffect)((()=>{W&&G(T&&W.isSingleTilePage(t))}),[T,W,null===(j=W)||void 0===j?void 0:j.frontendPageLayout,t]);const J=(0,o.useCallback)((e=>{B&&f((t=>({...t,textTileData:{...t.textTileData,content:e}})))}),[B,f]),{setActiveEditor:X,notifyOfActiveEditorChange:K}=(0,o.useContext)(Ml.f),q=(0,r._8)((e=>{let{snapshot:n}=e;return()=>{const e=n.getLoadable((0,h.c)({pageId:l,tileId:t})).getValue();return(0,jr.j8)(e)}}),[l,t]),Q=!g&&m,ee=Q&&v,te=(0,o.useRef)(),ne=(0,o.useRef)(),ie=(0,r.sJ)((0,Vl.a)(null===(L=I)||void 0===L?void 0:L.id)),re=!!I,le=(0,o.useCallback)((e=>{if(!e)return;te.current=e,P(e);const t=e.getEditor();X(t),k()}),[k,X,P]),{apolloClient:ae,clientId:se}=(0,c.bp)(),[ce,ue]=(0,o.useState)((()=>{var e,t;return(null===(e=C)||void 0===e?void 0:e.content)&&(null===(t=C)||void 0===t?void 0:t.content.length)>0?JSON.parse(C.content):q()})),pe=(0,o.useRef)(),he=(0,o.useRef)(ce),fe=(0,o.useMemo)((()=>{var e;return((null===(e=W)||void 0===e?void 0:e.getTileWidthInUnits(t))||0)<x.w4/2-1}),[W,null===(Z=W)||void 0===Z?void 0:Z.frontendPageLayout,t]),[ge,me]=(0,o.useState)(Bl(ce,Q,fe)),ve=(0,o.useCallback)((e=>{me((t=>{const n=Bl(e||he.current,Q,fe);return t!==n?n:t}))}),[Q,fe]);(0,o.useEffect)((()=>{ve(ce)}),[ce,ve]),(0,o.useEffect)((()=>{ve()}),[ve]);const we=(0,r._8)((e=>{let{snapshot:i}=e;return()=>{if(i.getLoadable((0,h.c)({pageId:l,tileId:t})).getValue()){const e=(0,Br.Q)([he.current[0]]);e&&(0,Nl.NW)(n,e,ae,se,!0)}}}),[l,t,n,ae,se]),ye=(0,o.useMemo)((()=>{const e=(0,io.Z)((e=>{const t=JSON.stringify(e);J(t),pe.current=e}),500);return ne.current=e.flush,e}),[J]),xe=(0,o.useCallback)((e=>{he.current=e,ve(),e!==ce&&ye(e)}),[ce,ye,ve]);(0,o.useEffect)((()=>{var e,t,n;const i=(null===(e=C)||void 0===e?void 0:e.content)&&(null===(t=C)||void 0===t?void 0:t.content.length)>0?JSON.parse(null===(n=C)||void 0===n?void 0:n.content):q();(0,de.Z)(pe.current,i)||ue(i)}),[q,null===(D=C)||void 0===D?void 0:D.content]);const be=(0,o.useCallback)((e=>{var t;null===(t=te.current)||void 0===t||t.focusEditor(),e.preventDefault()}),[]),Ce=(0,o.useCallback)((e=>{var t,n;null===(t=te.current)||void 0===t||t.focusEditor(),null===(n=te.current)||void 0===n||n.appendText(e.key),e.preventDefault()}),[]),Te=(0,o.useCallback)((()=>{$.current&&ee&&s($.current)}),[ee,$]);(0,o.useEffect)((()=>{Te()}),[Te]);const Ie=(0,o.useMemo)((()=>{const e=new Map;return e.set("enter",be),e.set(ir,Ce),e}),[Ce,be]),$e=(0,o.useCallback)((()=>{K(),k()}),[K,k]),ke=(0,o.useCallback)((()=>{var e;X(null===(e=te.current)||void 0===e?void 0:e.getEditor()),E()}),[E,X]),Ee=(0,r._8)((e=>{let{snapshot:n}=e;return e=>{var i,o,r;const l=null===(i=document.querySelector(`#editor-${t} [contenteditable=true]`))||void 0===i?void 0:i.contains(e.target),a="true"===(null===(r=e.target.children)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.getAttribute("data-slate-placeholder"));var s;if(n.getLoadable(h.T0).getValue())null===(s=te.current)||void 0===s||s.blurEditor();else if(v&&(!l||a)){var d,c,u;if(null===(d=te.current)||void 0===d?void 0:d.isFocused())null===(c=te.current)||void 0===c||c.moveCursorToEnd();else null===(u=te.current)||void 0===u||u.focusEditor();e.preventDefault()}}}),[v,t]),Re=(0,r.sJ)((0,h.Zp)(t)),Se=(0,o.useCallback)((()=>{var e,t,n;return null===(e=(t=ne).current)||void 0===e||e.call(t),null===(n=te.current)||void 0===n||n.deselect(),!1}),[]),Pe=(0,o.useMemo)((()=>({"mod+z":()=>Se(),esc:()=>{var e,t,n;return null===(e=te.current)||void 0===e||e.blurEditor(),null===(t=$.current)||void 0===t||t.focus(),null===(n=S)||void 0===n||n(),!0}})),[Se,$,S]),_e=(0,o.useCallback)((()=>{var e,t;null===(e=(t=ne).current)||void 0===e||e.call(t),ue((e=>(0,de.Z)(e,he.current)?e:he.current)),we(),R()}),[R,we]);return(0,i.jsx)(a.G,{ref:$,bindings:Ie,disabled:!ee,style:{width:"100%",height:"100%"},children:(0,i.jsx)(Hl,{onMouseDown:Ee,$verticalAlignment:(0,Fl.tj)(null===(M=C)||void 0===M?void 0:M.verticalAlignment),$horizontalAlignment:(0,Fl.B0)(null===(N=C)||void 0===N?void 0:N.horizontalAlignment),$selected:v,$disablePointerEvents:Re,$isMobileSingleTile:Y,children:(0,i.jsx)(zl.ZP,{id:`editor-${t}`,"data-testid":"TextEditor",bodyFontSize:w,innerTilePadding:y,$preview:g,$counterIncrementInitialValue:F,$isMobile:T,$horizontalAlignment:(null===(A=C)||void 0===A?void 0:A.horizontalAlignment)??d.KxP.Leading,$verticalAlignment:(null===(z=C)||void 0===z?void 0:z.verticalAlignment)??d.Q4P.Top,$placeholder:ge,disabled:H||Q&&!v,isThemeLoading:re&&!ie,children:(0,i.jsx)(bi,{resizeRef:b,children:(0,i.jsx)(el,{editable:ee,keyBindings:Pe,onBlur:_e,onChange:$e,onFocus:ke,placeholder:ge,ref:le,setValue:xe,tomeId:n,tileId:t,value:ce,wrapText:!0,features:[...Kr.$M]})})})})})},Wl=n(99364),Yl=n(33234),Gl=n(4960),Jl=n(19352),Xl=n(79520);function Kl(e){var t;const n=null===(t=e[0])||void 0===t?void 0:t.motion;if(!n)return null;let i=n.x.get()-n.width.get()/2,o=n.x.get()+n.width.get()/2,r=n.y.get()-n.height.get()/2,l=n.y.get()+n.height.get()/2;for(let t=1;t<e.length;t++){const n=e[t],a=n.x-n.width/2,s=n.x+n.width/2,d=n.y-n.height/2,c=n.y+n.height/2;a<i&&(i=a),s>o&&(o=s),d<r&&(r=d),c>l&&(l=c)}const a=o-i,s=l-r;return{x:i+a/2,y:r+s/2,width:a,height:s}}var ql=n(63305);const Ql=(0,j.ZP)(S.E.div).withConfig({displayName:"Canvas",componentId:"sc-ec8d5577-0"})`
  z-index: 1;
`,ea=(0,o.forwardRef)(((e,t)=>{let{x:n,y:o,...r}=e;const l=ql.Y`scale(var(--drawing-scale), var(--drawing-scale)) translate(${n}px, ${o}px) translate(50%, 50%)`;return(0,i.jsx)(S.E.div,{...r,ref:t,style:{isolation:"isolate",width:"100%",height:"100%",transform:l}})})),ta=j.iv`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,na=j.ZP.div.withConfig({displayName:"Canvas__TileLayer",componentId:"sc-ec8d5577-1"})`
  ${ta}
  overflow: hidden;
`,ia=j.ZP.div.withConfig({displayName:"Canvas__SelectionLayer",componentId:"sc-ec8d5577-2"})`
  ${ta}
  overflow: visible;
  pointer-events: none;
`,oa=j.ZP.div.withConfig({displayName:"Canvas__GhostLayer",componentId:"sc-ec8d5577-3"})`
  ${ta}
  opacity: 0.16;
  overflow: visible;
  pointer-events: none;
`,ra=(0,j.ZP)(S.E.div).withConfig({displayName:"Layer__RootLayer",componentId:"sc-622bc7eb-0"})`
  position: absolute;
  pointer-events: none;
`,la=(0,j.ZP)(S.E.div).withConfig({displayName:"Layer__TextLayer",componentId:"sc-622bc7eb-1"})`
  position: absolute;
  left: 0;
  top: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  pointer-events: none;
`,aa=(0,j.ZP)(S.E.div).withConfig({displayName:"Layer__TextInner",componentId:"sc-622bc7eb-2"})`
  box-sizing: border-box;
  max-width: 100%;
  word-break: break-all;
  color: ${e=>{let{theme:t}=e;return t.colors.shapeText}};
`;var sa={Root:e=>{let{children:t,x:n,y:o,width:r,height:l}=e;return(0,i.jsx)(ra,{style:{width:r,height:l,x:n,y:o},transformTemplate:e=>`scale(1) translate(${e.x}, ${e.y}) translate(-50%, -50%)`,drag:!0,dragMomentum:!1,children:t})},SVG:j.ZP.svg.withConfig({displayName:"Layer__SVG",componentId:"sc-622bc7eb-3"})`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: visible;
  fill: ${e=>{let{theme:t}=e;return t.colors.shapeFill}};

  // Direct children of SVG should be clickable (ellipse, rect, etc.)
  & > * {
    pointer-events: auto;
  }
`,Text:e=>{let{children:t,width:n,height:o}=e;return(0,i.jsx)(la,{style:{width:n,height:o},children:(0,i.jsx)(aa,{style:{fontSize:14},children:t})})}};const da=(0,o.memo)((e=>{let{id:t,x:n,y:o,width:r,height:l,text:a,onLayerClick:s}=e;return(0,i.jsxs)(sa.Root,{x:n,y:o,width:r,height:l,children:[(0,i.jsx)(sa.SVG,{children:(0,i.jsx)(S.E.rect,{onClick:e=>s(e,t),x:0,y:0,width:r,height:l})}),(0,i.jsx)(sa.Text,{width:r,height:l,children:a})]})}));da.displayName="Rectangle";var ca=n(6523);const ua=(0,o.memo)((e=>{let{id:t,x:n,y:o,width:r,height:l,text:a,onLayerClick:s}=e;const d=(0,ca.H)([r],(()=>r.get()/2)),c=(0,ca.H)([l],(()=>l.get()/2));return(0,i.jsxs)(sa.Root,{x:n,y:o,width:r,height:l,children:[(0,i.jsx)(sa.SVG,{children:(0,i.jsx)(S.E.ellipse,{onClick:e=>s(e,t),cx:d,cy:c,rx:d,ry:c})}),(0,i.jsx)(sa.Text,{width:r,height:l,children:a})]})}));ua.displayName="Ellipse";const pa=j.ZP.div.withConfig({displayName:"SelectionBox__Box",componentId:"sc-dc80ee8a-0"})`
  position: absolute;
  pointer-events: none;
`,ha=(0,j.ZP)(S.E.svg).withConfig({displayName:"SelectionBox__BoxSVG",componentId:"sc-dc80ee8a-1"})`
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: visible;
  fill: none;
  pointer-events: none;
`,fa=(0,j.ZP)(S.E.rect).withConfig({displayName:"SelectionBox__BoxRect",componentId:"sc-dc80ee8a-2"})`
  stroke: ${e=>{let{theme:t}=e;return t.colors.contentAccent}};
  stroke-width: calc(1 / var(--drawing-scale));
  pointer-events: none;
`,ga=16,ma=(0,j.ZP)(S.E.svg).withConfig({displayName:"SelectionBox__CornerSVG",componentId:"sc-dc80ee8a-3"})`
  display: block;
  position: absolute;
  width: ${ga}px;
  height: ${ga}px;
  overflow: visible;
  filter: drop-shadow(0 0 1px rgb(0 0 0 / 0.2));
  pointer-events: auto;
`,va=e=>{let{style:t}=e;const n=(0,j.Fg)();return(0,i.jsxs)(ma,{style:t,transformTemplate:e=>{let{x:t,y:n}=e;return`translate(${t}, ${n}) scale(calc(1 / var(--drawing-scale)))`},children:[(0,i.jsx)(S.E.circle,{cx:8,cy:8,r:3.75,fill:n.colors.handleFill}),(0,i.jsx)(S.E.circle,{cx:8,cy:8,r:3,fill:n.colors.handleBorder})]})};var wa=e=>{let{layers:t}=e;const n=function(e){const t=(0,r.sJ)(Xl.ME);return Kl(e.filter((e=>t.has(e.id))))}(t);return n?(0,i.jsxs)(pa,{style:{transform:`translate(${n.x}px, ${n.y}px) translate(-50%, -50%)`,width:n.width,height:n.height},children:[(0,i.jsx)(ha,{children:(0,i.jsx)(fa,{width:"100%",height:"100%",rx:0})}),(0,i.jsx)(va,{style:{top:0,left:0,x:"-50%",y:"-50%",cursor:"nwse-resize"}}),(0,i.jsx)(va,{style:{top:0,right:0,x:"50%",y:"-50%",cursor:"nesw-resize"}}),(0,i.jsx)(va,{style:{bottom:0,right:0,x:"50%",y:"50%",cursor:"nwse-resize"}}),(0,i.jsx)(va,{style:{bottom:0,left:0,x:"-50%",y:"50%",cursor:"nesw-resize"}})]}):null};const ya=(0,o.memo)((e=>{let{width:t,height:n,currentScale:r,separation:l=16,dotSize:a=1}=e;const s=(0,j.Fg)(),d=(0,o.useId)(),c=(0,ca.H)(r,(()=>{const e=Math.abs(r.get());return e<=0?0:a*Math.pow(e,.5)/e}));return(0,i.jsxs)(S.E.svg,{xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",transform:"translate(-50%, -50%)",width:t,height:n},children:[(0,i.jsxs)("defs",{children:[(0,i.jsx)("pattern",{id:`dotPattern-${d}`,x:l/2,y:l/2,width:l,height:l,patternUnits:"userSpaceOnUse",children:(0,i.jsx)(S.E.circle,{cx:l/2,cy:l/2,r:c,fill:s.colors.drawingCanvas})}),(0,i.jsx)("rect",{id:`dotRect-${d}`,fill:`url(#dotPattern-${d})`,x:"-50%",y:"-50%",width:"100%",height:"100%"})]}),(0,i.jsx)("use",{xlinkHref:`#dotRect-${d}`,x:"50%",y:"50%"})]})})),xa=(0,o.memo)((e=>{let{width:t,height:n,originX:o,originY:r,currentScale:l}=e;const a=(0,ca.H)([t,o,l],(()=>(t.get()+2*Math.abs(o.get()))/l.get())),s=(0,ca.H)([n,r,l],(()=>(n.get()+2*Math.abs(r.get()))/l.get()));return(0,i.jsx)(ya,{width:a,height:s,currentScale:l})})),ba=(0,o.memo)((e=>{let{keyBindingsRef:t,tileId:n,selected:l,drawingTileData:s,isMobile:c,resizeRef:u,onTileResize:p,portalContainerRef:f,pageScale:g,pageWidth:m,width:v,height:w,radius:y}=e;var x;const b=(0,r.Zl)(Xl.ME),C=(0,r.Zl)(Xl.oy),T=(0,r.sJ)((0,Xl.oJ)(n)),I=(0,r.sJ)((0,h.TQ)(T)),$=(0,o.useCallback)((()=>{b(new Set)}),[b]),k=(0,o.useCallback)(((e,t)=>{l&&(e.stopPropagation(),T||C(n),b(new Set([t])))}),[T,l,C,b,n]),E=(0,r._8)((e=>{let{snapshot:t}=e;return()=>{const e=t.getLoadable(Xl.ME).getValue();l&&(T?e.size>0?$():C(null):C(n))}}),[$,T,l,C,n]),R=(0,r._8)((e=>{let{snapshot:t}=e;return()=>{t.getLoadable(Xl.ME).getValue().size>0?$():C(null)}}),[$,C]);(0,o.useEffect)((()=>{I&&($(),C(null))}),[I,$,C]),(0,o.useEffect)((()=>{l||($(),C(null))}),[l,$,C]);const S=(0,o.useMemo)((()=>{const e=new Map;return e.set("esc",R),e}),[R]),P=(0,o.useMemo)((()=>{var e,t;return(null===(t=s)||void 0===t||null===(e=t.layers)||void 0===e?void 0:e.map((e=>({...e,motion:{x:(0,Yl.B)(e.x),y:(0,Yl.B)(e.y),width:(0,Yl.B)(e.width),height:(0,Yl.B)(e.height)}}))))||[]}),[null===(x=s)||void 0===x?void 0:x.layers]),_=(0,Gl.c)(g),j=(0,Gl.c)(v),L=(0,Gl.c)(w),Z=(0,Gl.c)(0),D=(0,Gl.c)(0);(0,o.useMemo)((()=>{if(!c)return j.set(v),L.set(w),_.set(g),Z.set(0),void D.set(0);const e=Kl(P);if(!e||e.width<=0||e.height<=0)return j.set(m),L.set(0),_.set(1),Z.set(0),void D.set(0);const t=Math.min(m/e.width,1);j.set(m),L.set(e.height*t),Z.set(-e.x),D.set(-e.y),_.set(t)}),[c,P,m,v,w,g,j,L,_,Z,D]);const M=L.get();(0,o.useEffect)((()=>{var e;null===(e=p)||void 0===e||e()}),[M,p]);const N=P.map((e=>{let{id:t,type:n,motion:o}=e;switch(n){case d.DYs.Rectangle:return(0,i.jsx)(da,{id:t,x:o.x,y:o.y,width:o.width,height:o.height,text:n,onLayerClick:k},t);case d.DYs.Ellipse:return(0,i.jsx)(ua,{id:t,x:o.x,y:o.y,width:o.width,height:o.height,text:n,onLayerClick:k},t);default:return null}}));return(0,i.jsx)(Jl.h_,{containerRef:f,asChild:!0,children:(0,i.jsx)(a.G,{ref:t,bindings:S,disabled:!T,asChild:!0,children:(0,i.jsxs)(Ql,{onClick:E,style:{width:j,height:L,"--drawing-scale":_},children:[T&&(0,i.jsx)(oa,{children:(0,i.jsx)(ea,{x:Z,y:D,children:N})}),(0,i.jsx)(na,{"data-tile-resize-observer":!0,ref:u,style:{borderRadius:y,height:L.get()},children:(0,i.jsxs)(ea,{x:Z,y:D,children:[T&&(0,i.jsx)(xa,{width:j,height:L,originX:Z,originY:D,currentScale:_}),N]})}),T&&(0,i.jsx)(ia,{children:(0,i.jsx)(ea,{x:Z,y:D,children:(0,i.jsx)(wa,{layers:P})})})]})})})}));ba.displayName="DrawingTile";var Ca=ba,Ta=n(35800);const Ia=j.ZP.div.withConfig({displayName:"TileError__ErrorMessage",componentId:"sc-e8172f7e-0"})`
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  height: 100%;
`,$a=()=>{const{t:e}=(0,P.$G)();return(0,i.jsx)(Ia,{children:e("components.tile.errors.contentFailedToLoadErrorMessage")})};var ka=e=>{let{children:t,tile:n}=e;return(0,i.jsx)(Ta.ErrorBoundary,{FallbackComponent:$a,onError:(e,t)=>function(e,t){E.v.addError(e,t)}(e,{...t,tile:n}),children:t})},Ea=n(21441),Ra=n(99949),Sa=n(93408);var Pa=n(74837),_a=n(75570),ja=n(5993);const La={display:"flex",flex:1,height:"100%",width:"100%"};var Za=e=>{let{children:t,tileData:n,tomeId:l,pageId:a,pageKind:s,rowId:p,compositeTileId:f,selectCompositeTileOnClick:g=!1,selected:m=!1,preview:v=!1,canEdit:y=!1,clipboardActionsRef:x}=e;var C;const{t:T}=(0,P.$G)(),{apolloClient:I,clientId:k}=(0,c.bp)(),{getController:E}=(0,o.useContext)(u.Z),R=(0,o.useRef)(null),S=a?E(s,a):void 0,j=(0,w.t2)(),{exclusiveSelectTiles:L,additiveSelectTiles:Z}=(0,h.N4)(),{deleteTilesAction:D}=(0,Ra.Z)(),M=(0,r._8)((e=>{let{snapshot:t}=e;return()=>{if(a&&S){const e=t.getLoadable(h.py).getValue();D(Array.from(e),a,S,j,l,I,k)}}}),[a,S,D,j,l,I,k]),N=(0,o.useCallback)((()=>{R.current&&R.current.click()}),[]),{addBackgroundImageToTextTile:A}=(0,_a.Z)(l,a,S,n),{addTextToImageTile:z}=(0,ja.Z)(l,a,S,n),B=(0,r._8)((e=>{let{snapshot:t}=e;return()=>{if(t.getLoadable(h.py).getValue().size>1)return;const e=function(e){const{imageAttributes:t,imageTileData:n}=e,{imagePath:i}=t||{};if(i)try{const e=new URL(i);if("s3:"===e.protocol){var o;const t=new URL(Sa.n);if(e.searchParams.set("dl",""),null===(o=n)||void 0===o?void 0:o.dimensionType){var r;const t=(0,_.Ao)(null===(r=n)||void 0===r?void 0:r.dimensionType);var l,a,s;t&&(e.searchParams.set("ar",null===(l=t)||void 0===l?void 0:l.ar),e.searchParams.set("fit",null===(a=t)||void 0===a?void 0:a.fit),e.searchParams.set("crop",null===(s=t)||void 0===s?void 0:s.crop))}return e.toString().replace("s3://",`https://${t.host}/`)}return"images.unsplash.com"===e.host&&e.searchParams.set("dl",""),e.toString()}catch{return}}(n);if(e){const t=document.createElement("a");t.href=e,t.download="",t.style.display="none",document.body.appendChild(t),t.click(),t.remove()}}}),[n]),F=(0,b.ye)(b.TT.CREATE_COMPOSITE_TILE),U=(0,r._8)((e=>{let{snapshot:t}=e;return()=>{const e=t.getLoadable(gr.hL).getValue(),i=t.getLoadable(h.py).getValue(),o=g&&f||n.id;i.has(o)||(e?Z([o]):L([o]))}}),[Z,f,L,g,n.id]),V=(0,Pa.Z)(!0),O=(0,r._8)((e=>{let{snapshot:t}=e;return()=>{var e;if(!F||f)return!1;const i=t.getLoadable(h.py).getValue();return(0,H.ck)(n.type)&&(null===(e=n.imageAttributes)||void 0===e?void 0:e.imagePath)&&i.size<=1}}),[f,F,null===(C=n.imageAttributes)||void 0===C?void 0:C.imagePath,n.type]),W=(0,r._8)((e=>{let{snapshot:t}=e;return()=>{if(!F||f)return!1;const e=t.getLoadable(h.py).getValue();return n.type===d.YUT.Text&&e.size<=1}}),[f,F,n.type]),Y=(0,r._8)((e=>{let{snapshot:t}=e;return()=>{const e=t.getLoadable(h.py).getValue();return(e=>{var t;return!(!$.g$.includes(e.type)||!(null===(t=e.imageAttributes)||void 0===t?void 0:t.imagePath))})(n)&&e.size<=1}}),[n]),{undo:G,redo:J}=(0,$o.C5)(),{hasUndoEdits:X,hasRedoEdits:K}=(0,$o.j0)(),q=(0,o.useCallback)((()=>{var e,t,n,i,o,r,l;const a=[];p&&!(null===(e=S)||void 0===e?void 0:e.alreadyEvenlyDistributed(p))&&(a.push({text:T("hooks.tile.menu.distribute"),action:()=>{var e;return null===(e=S)||void 0===e?void 0:e.distributeWidths(p)}}),a.push({type:"separator"}));const s=[{text:T("hooks.tile.menu.cut"),action:null===(n=x)||void 0===n||null===(t=n.current)||void 0===t?void 0:t.performCutAction,shortcut:(0,bo.UN)(),variant:"default"},{text:T("hooks.tile.menu.copy"),action:null===(o=x)||void 0===o||null===(i=o.current)||void 0===i?void 0:i.performCopyAction,shortcut:(0,bo.Mg)(),variant:"default"},{text:T("hooks.tile.menu.paste"),action:e=>{var t,n;return null===(n=x)||void 0===n||null===(t=n.current)||void 0===t?void 0:t.performPasteAction(e)},shortcut:(0,bo.Yt)(),variant:"default",disabled:!V},{text:T("hooks.tile.menu.duplicate"),action:null===(l=x)||void 0===l||null===(r=l.current)||void 0===r?void 0:r.performDuplicateAction,shortcut:(0,bo.i_)(),variant:"default"},{text:T("hooks.tile.menu.delete"),action:()=>M(),shortcut:(0,bo.Ct)(),variant:"destructive"}],d=[];Y()&&d.push({text:T("hooks.tile.menu.download"),action:()=>B()}),O()&&d.push({text:T("hooks.tile.menu.addText"),action:z}),W()&&d.push({text:T("hooks.tile.menu.addImageBackground"),action:N}),d.length&&d.unshift({type:"separator"});const c=[{type:"separator"},{text:T("hooks.tile.menu.undo"),action:G,shortcut:(0,bo.Ul)(),disabled:!X},{text:T("hooks.tile.menu.redo"),action:J,shortcut:(0,bo.SW)(),disabled:!K}];return[...a,...s,...d,...c]}),[p,S,T,x,V,Y,O,W,G,X,J,K,B,z,N,M]);return(0,i.jsxs)(i.Fragment,{children:[n.type===d.YUT.Text&&m&&!v&&(0,i.jsx)("input",{"data-testid":"add_background_image_input",ref:R,type:"file",accept:H.lW,onChange:A,style:{display:"none"}}),(0,i.jsx)(Ao.Z,{menuWidth:180,menuPosition:"below",menuAlign:"click",rightClickActivated:!0,disabled:!y,onOpenDropdown:U,styles:La,itemsOrFn:q,triggerRef:null,children:t})]})};const Da=e=>{let{tile:t,tomeId:n,sizes:r,pageId:l,pageTheme:a,pageKind:s,rowId:u,preview:p=!1,canEdit:h=!1,isMobile:f=!1,isTileEndpoint:g=!1,rowHeight:m,expanded:v,tileWidth:w,resizeRef:y,portalContainerRef:x,selected:b,toggleExpand:T,fullscreenScale:k,clipboardActionsRef:E,keyBindingsRef:R,compositeSelected:S=!1,compositeTileId:P,selectCompositeTileOnClick:_=!1,onTileResize:j,...L}=e;const{tileSizes:Z}=r,{apolloClient:D,clientId:M}=(0,c.bp)(),{tileData:N,updateTileData:A}=(0,C.Z)(t,n),z=(0,o.useCallback)((e=>{(0,Wl.Gs)(e,D,M)}),[D,M]),B=(0,o.useCallback)((e=>{A((t=>({...t,contentLink:e})))}),[A]);return(0,Ea.Z)({data:N,saveData:z,preview:p,canEdit:h}),(0,i.jsx)(Za,{tileData:N,tomeId:n,pageId:l,pageKind:s,rowId:u,compositeTileId:P,selectCompositeTileOnClick:_,selected:b,preview:p,canEdit:h,clipboardActionsRef:E,children:(0,i.jsx)(I.rY,{children:(0,i.jsxs)(ka,{tile:N,children:[("TEXT"===t.type||"TEXT_SLATE"===t.type)&&(0,i.jsx)(Ol,{keyBindingsRef:R,editMode:h,pageId:l,pageKind:s,preview:p,selected:b||S,tomeId:n,isMobile:f,tileId:N.id,updateTileData:A,bodyFontSize:Z.bodyFontSize,innerTilePadding:Z.innerTilePadding,resizeRef:y,textTileData:N.textTileData||null,theme:a,...L}),$.g$.includes(N.type)&&(0,i.jsx)(an,{tileData:N,setTileData:A,canEdit:h,preview:p,selected:b||S,width:w,height:m,sizes:r,toggleExpand:T,isMobile:f,isExpanded:v,isTileEndpoint:g,expandedScale:k,disableExpandButton:g||p,pageId:l,pageKind:s}),N.type===d.YUT.Video&&(0,i.jsx)(wi,{width:w,height:m,radius:Z.radius,preview:p,selected:b,tileData:N,updateTileData:A,pageId:l,editMode:h,sizes:r,isMobile:f,isExpanded:v,isTileEndpoint:g,toggleExpand:T,disableExpand:g||p,expandedScale:k,hideVideoControls:s===ct.sb.PAGE_ENDPOINT}),N.type===d.YUT.Table&&(0,i.jsx)($l,{keyBindingsRef:R,tileData:N,updateTileData:A,radius:Z.radius,preview:p,width:w,isTileEndpoint:g,isMobile:f,tableContentFontSize:r.tileSizes.tableContentFontSize,tableContentPadding:r.tileSizes.tableContentPadding,innerTilePadding:r.tileSizes.innerTilePadding,tableTitleFontSize:r.tileSizes.tableTitleFontSize,readonly:p||!(h&&b),editMode:h,selected:b,resizeRef:y,pageId:l,pageKind:s}),$.Zp.includes(N.type)&&(0,i.jsx)(Dl,{tileId:N.id,tileType:N.type,pageId:l,url:N.contentLink,preview:p,canEdit:h,isMobile:f,isTileEndpoint:g,updateTileData:A,updateContentLink:B,height:m,width:w,sizes:r}),N.type===d.YUT.Twitter&&(0,i.jsx)(zi,{tileId:N.id,preview:p,url:N.contentLink||void 0,updateContentLink:B,height:m,width:w,sizes:r,resizeRef:y}),N.type===d.YUT.Drawing&&(0,i.jsx)(Ca,{keyBindingsRef:R,tileId:N.id,selected:b,drawingTileData:N.drawingTileData||null,isMobile:f,resizeRef:y,onTileResize:j,portalContainerRef:x,pageScale:r.pageSizes.scale,pageWidth:r.tileSizes.width,width:w,height:m,radius:Z.radius}),N.type===d.YUT.Blank&&(0,i.jsx)(Hi,{canEdit:h,preview:p,tileSizes:Z})]})})})};var Ma=(0,o.memo)(Da),Na=n(65745),Aa=n(15764),za=n(87812);var Ba=e=>{let{getTextTileSpanClientRects:t,getTextTileSpanBoundingRects:n,getTextRegionBoundingRect:r,preview:l=!1,debugMode:a=!1}=e;const s=(0,o.useCallback)((()=>t().map(((e,t)=>(0,i.jsx)("div",{style:{border:"5px solid red",position:"absolute",top:e.top,left:e.left,width:e.width,height:e.height,pointerEvents:"none"}},`span-client-${t}`)))),[t]),d=(0,o.useCallback)((()=>n().map(((e,t)=>(0,i.jsx)("div",{style:{border:"5px dashed blue",position:"absolute",top:e.top,left:e.left,width:e.width,height:e.height,pointerEvents:"none"}},`span-bounding-${t}`)))),[n]);return!a||l?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(V.Z,{top:0,left:0,zIndex:M.y$,passThrough:!0,children:(0,i.jsxs)(i.Fragment,{children:[s(),d(),(()=>{const e=r();return(0,i.jsx)("div",{style:{border:"5px dotted orange",position:"absolute",top:e.top,left:e.left,width:e.width,height:e.bottom-e.top,pointerEvents:"none"}})})()]})})};const Fa=(0,j.ZP)(Na.Y1).withConfig({displayName:"CompositeTileContent__FixedSelection",componentId:"sc-837ebbf5-0"})`
  position: fixed;
`,Ua=j.ZP.div.withConfig({displayName:"CompositeTileContent__Grid",componentId:"sc-837ebbf5-1"})`
  display: grid;
  width: 100%;
  height: 100%;
  grid-template-columns: 100%;
  grid-template-rows: 100%;
`,Va=j.ZP.div.withConfig({displayName:"CompositeTileContent__GridItem",componentId:"sc-837ebbf5-2"})`
  // when this is not explicitly set, the text tile is above the image tile when the tile is selected
  // but hides behind the image when not selected.
  z-index: 0;
  grid-area: 1 / 1 / 2 / 2;
  pointer-events: ${e=>e.$disabled?"none":"inherit"};
  padding-top: ${e=>e.$verticalPadding}px;
  padding-bottom: ${e=>e.$verticalPadding}px;
  span {
    text-decoration: ${e=>e.$underlined?"underline":"none"};
    text-decoration-thickness: ${e=>e.$underlined?"1px":"inherit"};
    text-decoration-color: ${e=>e.$underlined?e.theme.colors.contentAccent:"inherit"};
  }
`,Ha=j.ZP.div.withConfig({displayName:"CompositeTileContent__CropModeWrapper",componentId:"sc-837ebbf5-3"})`
  width: ${e=>e.width}px;
  height: ${e=>e.height}px;
  padding-top: ${e=>e.$verticalPadding}px;
  padding-bottom: ${e=>e.$verticalPadding}px;
`;var Oa=e=>{let{tile:t,sizes:n,preview:l=!1,selected:a,tomeId:s,canEdit:c,tilePropertiesButtonRef:u,...f}=e;var g,v;const{scrollingPageRef:w}=(0,o.useContext)(Aa.Z),y=(0,o.useRef)(),b=(0,o.useRef)(null),{exclusiveSelectTiles:C,deselectTile:T}=(0,h.N4)(),[I,$]=(0,o.useState)(!1),[k,E]=(0,o.useState)(!1),R=(0,o.useRef)(null),S=(0,o.useMemo)((()=>{var e;const n=null===(e=t.compositeTileData)||void 0===e?void 0:e.tileIds;if(!n)throw new Error("Composite tile must hold reference to grouped tiles");if(2!==n.length)throw new Error("CompositeTile must have exactly 2 grouped tiles");return n}),[null===(g=t.compositeTileData)||void 0===g?void 0:g.tileIds]),P=S[1],_=(0,r.sJ)(oe.cm),j=(0,r.sJ)(oe.s5)||_,L=(0,r.sJ)((0,p.cr)(t.id)),Z=(0,r.sJ)((0,h.j6)({tileId:P})),D=(0,r.sJ)(h.T0);(0,o.useEffect)((()=>{D&&Z&&T(P)}),[T,D,Z,P]);const N=(0,o.useMemo)((()=>L||j||!I&&!k),[j,I,L,k]),A=(0,o.useCallback)((()=>{var e;const t=null===(e=b.current)||void 0===e?void 0:e.querySelectorAll('[class*="SlateTextTile"] span');return t?[...Array(t.length||0).keys()].map((e=>t.item(e).getBoundingClientRect())):[]}),[]),z=(0,o.useCallback)((()=>{var e;const t=null===(e=b.current)||void 0===e?void 0:e.querySelectorAll('[class*="SlateTextTile"] span');return t?[...Array(t.length||0).keys()].flatMap((e=>{const n=t.item(e).getClientRects();return[...Array(n.length).keys()].map((e=>n.item(e))).filter((e=>!!e))})):[]}),[]),B=(0,o.useCallback)((()=>{var e;return null===(e=A())||void 0===e?void 0:e.reduce(((e,t)=>({top:Math.min(e.top,t.top),left:Math.min(e.left,t.left),bottom:Math.max(e.bottom,t.top+t.height),width:Math.max(e.width,t.width)})),{top:Number.MAX_SAFE_INTEGER,left:Number.MAX_SAFE_INTEGER,bottom:0,width:0})}),[A]),F=(0,r._8)((e=>{let{snapshot:n}=e;return e=>{const i=n.getLoadable(oe.cm).getValue(),o=n.getLoadable(oe.s5).getValue(),r=n.getLoadable((0,p.cr)(t.id)).getValue();if(i||o||r)return;const l=z().some((t=>{const n=t.left+t.width,i=t.top+t.height;return e.clientX>=t.left&&e.clientX<=n&&e.clientY>=t.top&&e.clientY<=i}));E(l)}}),[z,t.id]),U=(0,o.useCallback)((()=>{var e;(null===(e=u)||void 0===e?void 0:e.current)&&(u.current.style.removeProperty("display"),u.current.style.removeProperty("position"),u.current.style.removeProperty("top"),u.current.style.removeProperty("left"),u.current.style.removeProperty("margin"))}),[u]),H=(0,r._8)((e=>{let{snapshot:t}=e;return()=>{var e,n,i,o,r,a,s,d;if(!c||l)return(null===(d=R)||void 0===d?void 0:d.current)&&(R.current.style.display="none"),void U();const p=t.getLoadable((0,h.j6)({tileId:P})).getValue();if(!R.current)return;if(!p)return R.current.style.display="none",void U();const f=B(),g=((null===(e=f)||void 0===e?void 0:e.top)??0)+((null===(n=w.current)||void 0===n?void 0:n.scrollTop)??0)+window.scrollY-2,m=((null===(i=f)||void 0===i?void 0:i.left)??0)+window.scrollX-2,v=((null===(o=f)||void 0===o?void 0:o.width)??0)+4,y=((null===(r=f)||void 0===r?void 0:r.bottom)??0)-((null===(a=f)||void 0===a?void 0:a.top)??0)+4;(null===(s=u)||void 0===s?void 0:s.current)&&(u.current.style.display="grid",u.current.style.position="fixed",u.current.style.top=g-8+"px",u.current.style.left=m+v/2-15+"px",u.current.style.margin="0"),R.current.style.top=`${g}px`,R.current.style.left=`${m}px`,R.current.style.width=`${v}px`,R.current.style.height=`${y}px`,R.current.style.display="block"}}),[c,B,l,U,w,P,u]);(0,o.useEffect)((()=>(window.addEventListener("resize",H),window.addEventListener("scroll",H),()=>{window.removeEventListener("resize",H),window.removeEventListener("scroll",H)})),[H]),(0,o.useEffect)((()=>{H()}),[H,Z]),m({ref:b,onResize:H,enabled:!l,pixelsPerUnit:n.tileSizes.width/x.w4,padding:n.pageSizes.padding});const O=(0,o.useCallback)((e=>{y.current=e}),[]),W=(0,o.useCallback)((()=>{$(!0),C([P])}),[C,P]),Y=(0,o.useCallback)((()=>{$(!1)}),[]),G=(0,o.useCallback)((()=>{Z&&$(!1)}),[Z]),J=(0,o.useCallback)((()=>{setTimeout(H,0)}),[H]),X=(0,r._8)((e=>{let{set:t}=e;return async e=>{var n,i,o;if(!c)return;if(!(null===(n=b.current)||void 0===n?void 0:n.contains(e.target)))return;if(!Z&&k)return 2===e.button?(t(h.py,new Set(P)),t(h.sj,P)):(C([P]),e.stopPropagation()),void e.preventDefault();if(0!==e.button)return;const r=null===(i=R.current)||void 0===i?void 0:i.getBoundingClientRect(),l=!r||e.clientX<r.left||e.clientX>r.right||e.clientY<r.top||e.clientY>r.bottom,a=(null===(o=y.current)||void 0===o?void 0:o.isFocused())||!1;var s;if(l||a){if(l&&a){var d;null===(d=y.current)||void 0===d||d.blurEditor(),e.preventDefault()}}else null===(s=y.current)||void 0===s||s.focusEditor();e.stopPropagation()}}),[c,C,k,Z,P]),K=(0,o.useMemo)((()=>({$disabled:N,$underlined:c&&k&&!I,onMouseDownCapture:X,$verticalPadding:n.pageSizes.padding})),[c,I,k,X,n.pageSizes.padding,N]),q=(0,o.useCallback)((e=>e.type===d.YUT.Text?K:{}),[K]),Q=Ba({getTextRegionBoundingRect:B,getTextTileSpanBoundingRects:A,getTextTileSpanClientRects:z,debugMode:false,preview:l});return(0,i.jsxs)(Ua,{ref:b,onMouseMove:F,children:[null===(v=S)||void 0===v?void 0:v.map((e=>{return o=e,(0,i.jsx)(za.Z,{id:o,children:e=>{if(!e)return null;if(e.type!==d.YUT.Text&&e.type!==d.YUT.Image)throw new Error("CompositeTile must only contain text or image tiles");if(c&&a&&!l&&_&&e.type===d.YUT.Text&&b.current){const t=b.current.getBoundingClientRect();return(0,i.jsx)(V.Z,{top:t.top,left:t.left,zIndex:M.y$,passThrough:!0,children:(0,i.jsx)(Ha,{"data-testid":"composite_crop_mode_text",width:t.width,height:t.height,$verticalPadding:n.pageSizes.padding,children:(0,i.jsx)(Ma,{...f,canEdit:!1,tile:e,tomeId:s,sizes:n,preview:l,selected:a})})})}const o=e.type===d.YUT.Text?{compositeSelected:a||Z,selected:Z,selectCompositeTileOnClick:!1}:{compositeSelected:a||Z,selected:a,selectCompositeTileOnClick:!0};return(0,i.jsx)(Va,{"data-composite-tile-type":e.type,...q(e),children:(0,i.jsx)(Ma,{...f,canEdit:c,tile:e,tomeId:s,sizes:n,preview:l,compositeTileId:t.id,onEditorFocus:W,onEditorBlur:Y,onEditorChange:J,onEditorEscape:G,setEditorHandle:O,...o})},e.id)}},o);var o})),(0,i.jsx)(Fa,{"data-testid":"text_tile_composite_selection",ref:R,$radius:4,$selected:!0,$isSecondary:!1}),Q]})};const Wa=20;function Ya(e,t){return Math.abs(e-t)<=Wa}var Ga=e=>{const t=(0,o.useRef)(null);return{onClick:(0,o.useCallback)((n=>{var i,o;t.current&&(i=t.current,o={x:n.pageX,y:n.pageY},Ya(i.x,o.x)&&Ya(i.y,o.y))&&e(n),t.current=null}),[e]),onMouseDown:(0,o.useCallback)((e=>{t.current={x:e.pageX,y:e.pageY}}),[])}},Ja=n(88560);var Xa=n(22189);var Ka=n(13542);const qa={initial:{opacity:0},animate:{opacity:1}},Qa={width:"100%",height:"100%"},es=(e,t)=>{let{tile:n,tomeId:f,sizes:g,pageId:$,pageTheme:k,preview:E=!1,canEdit:R=!1,isMobile:S=!1,isTileEndpoint:P=!1,onTileResize:_,rowHeight:j,rowId:L,pageKind:Z,clipboardActionsRef:D,tileWidthFallback:M}=e;var N;const A=(0,c.TR)(),{getController:z}=(0,o.useContext)(u.Z),B=(0,r.sJ)((0,p.cr)(n.id)),{deselectTile:F}=(0,h.N4)(),U=A?A.expandedTileRef:null,V=(0,o.useRef)(null),H=(0,o.useRef)(null),O=(0,o.useRef)(!1),[W,Y]=(0,o.useState)({x:0,y:0});m({ref:V,onResize:_??v.Z,enabled:!E,pixelsPerUnit:g.rowSizes.unitRowHeight,padding:g.pageSizes.padding});const G=(0,r.sJ)((0,h.j6)({tileId:n.id,supportsSelection:!E}));!function(e){let{selected:t,tile:n}=e;const i=(0,r.rb)(p.uz);(0,o.useEffect)((()=>{t&&"TABLE"!==n.type&&i()}),[t,n.type,i])}({selected:G,tile:n});const J=(0,w.t2)(),X=!E&&B,[K,q]=(0,o.useState)(!1);(0,o.useEffect)((()=>{X&&q(X)}),[X]);const Q=$?z(Z,$):void 0,ee=(0,r._8)((e=>{let{snapshot:t,set:i}=e;return()=>{const e=t.getLoadable(p.DH).getValue();e&&F(e),i(p.DH,e?null:n.id),J.closePropertyPanel()}}),[n.id,J,F]),te=g.tileSizes.fullWidth,ne=(null===(N=Q)||void 0===N?void 0:N.getTileWidthInPx(n.id,g.pageSizes.width,g.pageSizes.padding))??M??te,ie=(0,o.useCallback)((()=>{switch(n.type){case d.YUT.Table:case d.YUT.Twitter:case d.YUT.TextSlate:case d.YUT.Composite:case d.YUT.Text:{var e;const t=null===(e=V.current)||void 0===e?void 0:e.scrollHeight;return y.ofPixels(t||0)}default:return y.ofUnits(x.Rv)}}),[V,n.type]),oe=(0,o.useCallback)((()=>{var e;return(null===(e=V.current)||void 0===e?void 0:e.clientHeight)??0}),[V]),re=(0,o.useCallback)((()=>H),[H]);(0,o.useImperativeHandle)(t,(()=>({getHeight:ie,getCurrentHeight:oe,getRef:re})),[ie,oe,re]);const{onClick:le,onMouseDown:ae}=function(e){let{preview:t,toggleExpand:n,canEdit:i,tile:o,pageController:l,tileStylesRef:a}=e;const s=(0,w.t2)(),{additiveSelectTiles:d,rangeSelectTiles:c,exclusiveSelectTiles:u,deselectTile:f}=(0,h.N4)(),g=(0,r._8)((e=>{let{snapshot:r}=e;return e=>{const g=r.getLoadable((0,h.j6)({tileId:o.id})).getValue(),m=r.getLoadable(h.VZ).getValue(),v=r.getLoadable((0,p.cr)(o.id)).getValue(),w=r.getLoadable(Ja.K).getValue().stack.length;if(!t&&v&&i)n();else if(i&&!v){var y,x;if((0,bo.ZP)(e))g?(f(o.id),null===(y=a.current)||void 0===y||y.blur()):(d([o.id]),null===(x=a.current)||void 0===x||x.focus());else if(e.shiftKey){var b;c((null===(b=l)||void 0===b?void 0:b.orderedTileIDs)??[],o.id)}else if(!g||m>1){var C;u([o.id]),null===(C=a.current)||void 0===C||C.focus()}}w>1&&s.popToRootPropertyPanel()}}),[o.id,t,i,n,d,a,f,c,l,u,s]),{onClick:m,onMouseDown:v}=Ga(g);return{onClick:m,onMouseDown:v}}({preview:E,toggleExpand:ee,tile:n,pageController:Q,tileStylesRef:H,canEdit:R});if(O.current!==X&&H.current){const e=H.current.getBoundingClientRect();e.x&&Y({x:e.x+e.width/2,y:e.y+e.height/2}),O.current=X}const{fullscreenScale:se,expandTranslate:de}=function(e){let{isMobile:t,tileWidth:n,defaultTileFullWidth:i,rowHeight:r,expanded:l,tileCenter:a}=e;const{width:s,height:d}=(0,Xa.Z)(),c=(0,p.k6)();return{fullscreenScale:(0,o.useMemo)((()=>{let e=t?i:n,o=r,a=1;if(l){const t=s/e,n=d/o;a=Math.min(t,n),a/=c,e*=a,o*=a}return a}),[i,l,t,c,r,n,d,s]),expandTranslate:(0,o.useMemo)((()=>({x:(s/2-a.x)/c,y:(d/2-a.y)/c})),[c,a,d,s])}}({isMobile:S,tileWidth:ne,defaultTileFullWidth:te,rowHeight:j,expanded:X,tileCenter:W}),ce=(0,r.sJ)((0,T.vH)({tileId:n.id})),ue=(0,o.useMemo)((()=>X?{scale:se,...de}:{x:0,scale:1,opacity:ce?.5:1}),[de,X,se,ce]),pe=(0,o.useRef)(null),he=(0,o.useMemo)((()=>{const e=new Map;return e.set("mod+d",(e=>{var t,n;e.preventDefault(),null===(n=D)||void 0===n||null===(t=n.current)||void 0===t||t.performDuplicateAction()})),e.set("mod+shift+r",(e=>{var t,n,i;e.preventDefault(),null===(i=D)||void 0===i||null===(n=i.current)||void 0===n||null===(t=n.performPasteAction)||void 0===t||t.call(n,e,{isReplace:!0})})),e}),[D]),fe=(0,o.useCallback)((()=>{R&&G&&s(pe.current)}),[R,G]);(0,o.useEffect)((()=>{fe()}),[fe]);const ge=(0,o.useCallback)((()=>q(X)),[q,X]),me=n.type===d.YUT.Composite?Oa:Ma,ve=(0,b.ye)(b.TT.EDITOR_IA_UPDATES),we=(0,o.useRef)(null);return(0,C.Z)(n,f),(0,i.jsxs)(a.G,{ref:pe,bindings:he,disabled:!G||!R||E||S,style:Qa,children:[X&&S&&(0,i.jsx)(I.CA,{"data-testid":"fullscreen_modal_background","data-tome-bypass-tap-navigation":"Tile__FullscreenModalBackground",initial:qa.initial,animate:qa.animate,transition:l.Z2}),ve&&(0,i.jsx)(Ka.Z,{ref:we,preview:E,tileId:n.id,tileType:n.type}),(0,i.jsx)(I.cq,{"data-testid":"tile","data-testid-tile-id":n.id,"data-testid-tile-selected":G,"data-testid-tile-expanded":X,$preview:E,$inFocus:K,onClick:le,onMouseDown:ae,"data-tile-type":n.type,ref:H,$expanded:X,$disablePointer:E,animate:ue,transition:l.Z2,onAnimationComplete:ge,children:(0,i.jsx)(I.JT,{isMobile:S,isExpandedTile:B,expandedTileRef:U,children:(0,i.jsx)(me,{canEdit:R,isMobile:S,preview:E,tile:n,tomeId:f,sizes:g,pageId:$,pageTheme:k,pageKind:Z,rowId:L,isTileEndpoint:P,rowHeight:j,expanded:X,tileWidth:ne,resizeRef:V,onTileResize:_,portalContainerRef:H,selected:G,toggleExpand:ee,fullscreenScale:se,clipboardActionsRef:D,keyBindingsRef:pe,tilePropertiesButtonRef:we})})})]})};var ts=(0,o.memo)((0,o.forwardRef)(es)),ns=n(37887),is=n(1644);var os=n(50456).ZP`
  query tomeAccessForTile($id: String!) {
    tomeAccessForTile(id: $id)
  }
`,rs=n(2705);var ls=e=>{let{children:t,id:n}=e;const r=(0,ns.a)(os,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!1,variables:{id:n}}),{user:l,loading:a}=(0,o.useContext)(Ti.Z);if(!n)return(0,i.jsx)(rs.Z,{});if(r.loading||r.networkStatus===is.I.refetch)return(0,i.jsx)(Nn.Z,{});if(r.error)return(0,i.jsxs)(i.Fragment,{children:["Error! $",r.error.message]});if(a)return(0,i.jsx)(Nn.Z,{});let s={canView:!1,canEdit:!1};return l?s={canView:!0,canEdit:!0}:"PUBLIC"===r.data.tomeAccess&&(s={canView:!0,canEdit:!1}),s.canView?(0,i.jsx)(i.Fragment,{children:t}):(0,i.jsx)(rs.Z,{})}},3266:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(e,t)=>{const{style:n,...o}=e;return(0,i.jsx)(r.Z,{ref:t,style:n,viewBox:"0 0 64 64",...o,children:(0,i.jsx)("path",{d:"M34 14C34 12.8954 33.1046 12 32 12C30.8954 12 30 12.8954 30 14V30H14C12.8954 30 12 30.8954 12 32C12 33.1046 12.8954 34 14 34H30V50C30 51.1046 30.8954 52 32 52C33.1046 52 34 51.1046 34 50V34H50C51.1046 34 52 33.1046 52 32C52 30.8954 51.1046 30 50 30H34V14Z"})})};t.Z=(0,o.forwardRef)(l)},30378:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(e,t)=>(0,i.jsxs)(r.Z,{ref:t,style:{width:52,height:52},viewBox:"0 0 52 52",...e,children:[(0,i.jsx)("path",{d:"M23.972 10.5248L9.81761 16.38C9.02721 16.7024 9.03761 17.8256 9.82801 18.1376L24.0448 23.7744C25.2928 24.2736 26.6864 24.2736 27.9344 23.7744L42.1512 18.1376C42.9416 17.8256 42.952 16.7024 42.1616 16.38L28.0072 10.5248C26.7072 9.98399 25.2616 9.98399 23.972 10.5248Z",fill:"#FFBF00"}),(0,i.jsx)("path",{d:"M27.248 26.8528V40.9344C27.248 41.6 27.924 42.0576 28.548 41.8184L44.3872 35.672C44.7512 35.5264 44.9904 35.1832 44.9904 34.788V20.7064C44.9904 20.0408 44.3144 19.5832 43.6904 19.8224L27.8512 25.9688C27.4872 26.1144 27.248 26.4576 27.248 26.8528Z",fill:"#26B5F8"}),(0,i.jsx)("path",{d:"M23.5456 27.5808L18.8448 29.848L18.3664 30.0768L8.44481 34.8296C7.82081 35.1312 7.00961 34.6736 7.00961 33.9768V20.7584C7.00961 20.5088 7.13441 20.2904 7.31121 20.124C7.38401 20.0512 7.46721 19.9888 7.55041 19.9472C7.78961 19.8016 8.12241 19.7704 8.41361 19.8848L23.4624 25.844C24.232 26.1456 24.2944 27.2168 23.5456 27.5808Z",fill:"#ED3049"}),(0,i.jsx)("path",{d:"M8.07043 19.812C7.88323 19.812 7.70643 19.864 7.57123 19.9472C7.48803 19.9992 7.40483 20.0512 7.33203 20.124L18.8448 29.848L23.5456 27.5808C23.8992 27.404 24.076 27.0712 24.076 26.7384C24.076 26.3744 23.868 26 23.4728 25.844L8.42403 19.8848C8.30963 19.8328 8.18483 19.812 8.07043 19.812Z",fill:"#B22437"})]});t.Z=(0,o.forwardRef)(l)},11293:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(0,o.forwardRef)(((e,t)=>(0,i.jsx)(r.Z,{ref:t,viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{d:"M52.01 34.0209H16.8385L28.4256 45.5938C29.2109 46.3718 29.2168 47.6392 28.4388 48.4245C27.6607 49.2098 26.3934 49.2157 25.6081 48.4376C25.6031 48.4327 25.5982 48.4277 25.5932 48.4227L10.5707 33.4183C9.7895 32.6388 9.7881 31.3736 10.5676 30.5924C10.5686 30.5914 10.5697 30.5903 10.5707 30.5893L25.5932 15.5848C26.3708 14.799 27.6382 14.7924 28.424 15.57C29.2098 16.3476 29.2164 17.615 28.4388 18.4008C28.4344 18.4052 28.43 18.4096 28.4256 18.414L16.8046 30.0209H52.01C53.1146 30.0209 54.01 30.9163 54.01 32.0209C54.01 33.1255 53.1146 34.0209 52.01 34.0209V34.0209Z"})})));t.Z=l},51961:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(0,o.forwardRef)(((e,t)=>(0,i.jsx)(r.Z,{ref:t,viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{d:"M38.4276 48.4568C37.6464 49.239 36.3791 49.2398 35.5969 48.4585C34.8148 47.6773 34.814 46.41 35.5952 45.6278L47.2162 34.0209H12.01C10.9054 34.0209 10.01 33.1255 10.01 32.0209C10.01 30.9164 10.9054 30.0209 12.01 30.0209H47.1823L35.5952 18.4478C34.814 17.6657 34.8148 16.3984 35.5969 15.6171C36.3791 14.8359 37.6464 14.8367 38.4276 15.6188L53.45 30.6233C54.2312 31.403 54.2326 32.6683 53.4529 33.4495C53.452 33.4505 53.451 33.4515 53.45 33.4524L38.4276 48.4568Z"})})));t.Z=l},61105:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(0,o.forwardRef)(((e,t)=>(0,i.jsx)(r.Z,{ref:t,viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.4142 47.4355C46.6328 48.2172 45.3658 48.2174 44.5841 47.4361C44.5839 47.4359 44.5837 47.4357 44.5835 47.4355L31.9835 34.8355L19.3951 47.4246C18.6093 48.2021 17.342 48.1953 16.5645 47.4095C15.7928 46.6296 15.7928 45.3738 16.5645 44.5939L29.1533 32.0052L16.5668 19.4187C15.7965 18.6258 15.8148 17.3587 16.6077 16.5884C17.3843 15.8339 18.6201 15.8338 19.3968 16.5882L31.9838 29.1746L44.5813 16.5772C45.3526 15.7853 46.6198 15.7687 47.4116 16.54C48.2034 17.3113 48.2201 18.5784 47.4488 19.3703C47.4365 19.3829 47.424 19.3954 47.4113 19.4078L34.8145 32.0052L47.4145 44.6052C48.196 45.3866 48.1961 46.6535 47.4147 47.435C47.4145 47.4352 47.4144 47.4353 47.4142 47.4355L47.4142 47.4355Z"})})));t.Z=l},52554:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(e,t)=>(0,i.jsx)(r.Z,{ref:t,viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M53.0208 32.0208C53.0208 34.7822 50.7822 37.0208 48.0208 37.0208C45.2594 37.0208 43.0208 34.7822 43.0208 32.0208C43.0208 29.2593 45.2594 27.0208 48.0208 27.0208C50.7822 27.0208 53.0208 29.2593 53.0208 32.0208ZM37.0208 32.0208C37.0208 34.7822 34.7822 37.0208 32.0208 37.0208C29.2594 37.0208 27.0208 34.7822 27.0208 32.0208C27.0208 29.2593 29.2594 27.0208 32.0208 27.0208C34.7822 27.0207 37.0209 29.2592 37.0209 32.0207C37.0209 32.0207 37.0209 32.0207 37.0209 32.0208H37.0208ZM16.0208 27.0208C18.7822 27.0208 21.0208 29.2593 21.0208 32.0208C21.0208 34.7822 18.7822 37.0208 16.0208 37.0208C13.2594 37.0208 11.0208 34.7822 11.0208 32.0208V32.0209C11.0208 29.2595 13.2593 27.021 16.0206 27.0209L16.0208 27.0208Z"})});t.Z=(0,o.forwardRef)(l)},17145:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(0,o.forwardRef)(((e,t)=>(0,i.jsx)(r.Z,{ref:t,viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M50.7763 4.6595L51.5301 9.18284C51.811 10.8684 53.1318 12.1893 54.8173 12.4704L59.3408 13.2241C59.6737 13.2788 59.9347 13.5398 59.9894 13.8728C60.0598 14.3014 59.7694 14.706 59.3408 14.7764L54.8173 15.5304C53.1318 15.8114 51.811 17.1323 51.5301 18.8178L50.7763 23.3411C50.7217 23.6745 50.4604 23.9357 50.1271 23.9903C49.6985 24.0605 49.2941 23.7698 49.2239 23.3411L48.47 18.8178C48.1891 17.1322 46.8681 15.8113 45.1825 15.5304L40.6591 14.7764C40.3261 14.7217 40.0651 14.4607 40.0105 14.1277C39.9401 13.6991 40.2305 13.2945 40.6591 13.2241L45.1825 12.4704C46.8682 12.1895 48.1891 10.8685 48.47 9.18284L49.2239 4.6595C49.2784 4.32619 49.5397 4.06493 49.873 4.01037C50.3017 3.94019 50.7061 4.23082 50.7763 4.6595ZM29.5533 17.319L31.061 26.3654C31.6226 29.7364 34.2641 32.3781 37.635 32.9402L46.6816 34.4476C47.3476 34.557 47.8695 35.079 47.9789 35.7449C48.1197 36.6021 47.5389 37.4112 46.6816 37.552L37.635 39.06C34.2642 39.622 31.6227 42.2636 31.061 45.6346L29.5533 54.6809C29.4442 55.3475 28.9217 55.87 28.2551 55.9791C27.3978 56.1194 26.589 55.5382 26.4486 54.6809L24.941 45.6346C24.3791 42.2634 21.7373 39.6217 18.3661 39.06L9.31978 37.552C8.65385 37.4426 8.13187 36.9207 8.0225 36.2548C7.88171 35.3975 8.46252 34.5884 9.31978 34.4476L18.3661 32.9402C21.7374 32.3784 24.3792 29.7366 24.941 26.3654L26.4486 17.319C26.5578 16.6524 27.0803 16.1299 27.7468 16.0208C28.6042 15.8805 29.413 16.4617 29.5533 17.319Z"})})));t.Z=l},76382:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(e,t)=>(0,i.jsxs)(r.Z,{ref:t,style:{width:52,height:52},viewBox:"0 0 52 52",...e,children:[(0,i.jsxs)("g",{clipPath:"url(#clip0)",children:[(0,i.jsx)("path",{d:"M26 26.3302C26 24.6665 26.6609 23.0709 27.8373 21.8945C29.0138 20.7181 30.6093 20.0571 32.273 20.0571C33.9367 20.0571 35.5323 20.7181 36.7087 21.8945C37.8851 23.0709 38.546 24.6665 38.546 26.3302C38.546 27.9939 37.8851 29.5894 36.7087 30.7659C35.5323 31.9423 33.9367 32.6032 32.273 32.6032C30.6093 32.6032 29.0138 31.9423 27.8373 30.7659C26.6609 29.5894 26 27.9939 26 26.3302V26.3302Z",fill:"#1ABCFE"}),(0,i.jsx)("path",{d:"M13.454 38.8762C13.454 37.2125 14.1149 35.6169 15.2913 34.4405C16.4677 33.2641 18.0633 32.6032 19.727 32.6032H26V38.8762C26 40.5399 25.3391 42.1355 24.1627 43.3119C22.9863 44.4883 21.3907 45.1492 19.727 45.1492C18.0633 45.1492 16.4677 44.4883 15.2913 43.3119C14.1149 42.1355 13.454 40.5399 13.454 38.8762V38.8762Z",fill:"#0ACF83"}),(0,i.jsx)("path",{d:"M26 7.51112V20.0572H32.273C33.9367 20.0572 35.5323 19.3962 36.7087 18.2198C37.8851 17.0434 38.546 15.4478 38.546 13.7841C38.546 12.1204 37.8851 10.5249 36.7087 9.34844C35.5323 8.17202 33.9367 7.51112 32.273 7.51112H26Z",fill:"#FF7262"}),(0,i.jsx)("path",{d:"M13.454 13.7841C13.454 15.4478 14.1149 17.0434 15.2913 18.2198C16.4677 19.3962 18.0633 20.0571 19.727 20.0571H26V7.51109H19.727C18.0633 7.51109 16.4677 8.17199 15.2913 9.34841C14.1149 10.5248 13.454 12.1204 13.454 13.7841V13.7841Z",fill:"#F24E1E"}),(0,i.jsx)("path",{d:"M13.454 26.3302C13.454 27.9939 14.1149 29.5894 15.2913 30.7659C16.4677 31.9423 18.0633 32.6032 19.727 32.6032H26V20.0571H19.727C18.0633 20.0571 16.4677 20.7181 15.2913 21.8945C14.1149 23.0709 13.454 24.6665 13.454 26.3302V26.3302Z",fill:"#A259FF"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0",children:(0,i.jsx)("rect",{width:"25.0921",height:"37.6381",transform:"translate(13.454 7.51109)"})})}),(0,i.jsxs)("g",{clipPath:"url(#clip0)",children:[(0,i.jsx)("path",{d:"M26 26.3302C26 24.6665 26.6609 23.0709 27.8373 21.8945C29.0138 20.7181 30.6093 20.0571 32.273 20.0571C33.9367 20.0571 35.5323 20.7181 36.7087 21.8945C37.8851 23.0709 38.546 24.6665 38.546 26.3302C38.546 27.9939 37.8851 29.5894 36.7087 30.7659C35.5323 31.9423 33.9367 32.6032 32.273 32.6032C30.6093 32.6032 29.0138 31.9423 27.8373 30.7659C26.6609 29.5894 26 27.9939 26 26.3302V26.3302Z",fill:"#1ABCFE"}),(0,i.jsx)("path",{d:"M13.454 38.8762C13.454 37.2125 14.1149 35.6169 15.2913 34.4405C16.4677 33.2641 18.0633 32.6032 19.727 32.6032H26V38.8762C26 40.5399 25.3391 42.1355 24.1627 43.3119C22.9863 44.4883 21.3907 45.1492 19.727 45.1492C18.0633 45.1492 16.4677 44.4883 15.2913 43.3119C14.1149 42.1355 13.454 40.5399 13.454 38.8762V38.8762Z",fill:"#0ACF83"}),(0,i.jsx)("path",{d:"M26 7.51112V20.0572H32.273C33.9367 20.0572 35.5323 19.3962 36.7087 18.2198C37.8851 17.0434 38.546 15.4478 38.546 13.7841C38.546 12.1204 37.8851 10.5249 36.7087 9.34844C35.5323 8.17202 33.9367 7.51112 32.273 7.51112H26Z",fill:"#FF7262"}),(0,i.jsx)("path",{d:"M13.454 13.7841C13.454 15.4478 14.1149 17.0434 15.2913 18.2198C16.4677 19.3962 18.0633 20.0571 19.727 20.0571H26V7.51109H19.727C18.0633 7.51109 16.4677 8.17199 15.2913 9.34841C14.1149 10.5248 13.454 12.1204 13.454 13.7841V13.7841Z",fill:"#F24E1E"}),(0,i.jsx)("path",{d:"M13.454 26.3302C13.454 27.9939 14.1149 29.5894 15.2913 30.7659C16.4677 31.9423 18.0633 32.6032 19.727 32.6032H26V20.0571H19.727C18.0633 20.0571 16.4677 20.7181 15.2913 21.8945C14.1149 23.0709 13.454 24.6665 13.454 26.3302V26.3302Z",fill:"#A259FF"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0",children:(0,i.jsx)("rect",{width:"25.0921",height:"37.6381",transform:"translate(13.454 7.51109)"})})})]});t.Z=(0,o.forwardRef)(l)},93280:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(e,t)=>(0,i.jsx)(r.Z,{ref:t,style:{width:52,height:52},viewBox:"0 0 64 64",...e,children:(0,i.jsxs)("g",{children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.9989 24.7123H46.7682V10.2153H17.502V10.3515L31.9989 24.7123Z",fill:"#67DBFF"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.9997 24.7124H17.2305V39.2094H46.4967V39.0733L31.9997 24.7124Z",fill:"#01A3FF"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.2305 39.1411H31.8636V53.7742L17.2305 39.1411Z",fill:"#0162FF"})]})});t.Z=(0,o.forwardRef)(l)},31940:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(0,o.forwardRef)(((e,t)=>(0,i.jsxs)(r.Z,{ref:t,style:{width:52,height:52},viewBox:"0 0 52 52",...e,children:[(0,i.jsxs)("g",{clipPath:"url(#clip0)",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5078 12.1148H36.494V39.8852H15.506L15.5078 12.1148Z",fill:"black",className:"ignore-fill"}),(0,i.jsx)("path",{d:"M11.312 11.0852H15.5078V40.9148H11.312V11.0852Z",fill:"#04FF8E"}),(0,i.jsx)("path",{d:"M36.4922 19.3148H40.688V40.9148H36.4922V19.3148Z",fill:"#8E2EFF"}),(0,i.jsx)("path",{d:"M11.312 39.8852H40.688V44H11.312V39.8852Z",fill:"#00C5FF"}),(0,i.jsx)("path",{d:"M11.312 8H28.0988V12.1148H11.312V8Z",fill:"#FFF152"}),(0,i.jsx)("path",{d:"M36.4922 16.2278V12.1148H32.2946V8H28.0988V20.3426H40.688V16.2278",fill:"#FF5B5B"}),(0,i.jsx)("path",{d:"M36.4922 24.4574V20.3426H40.688",fill:"#551C99"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.0988 8V12.1148H23.9012",fill:"#999131"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0",children:(0,i.jsx)("rect",{width:"36",height:"36",transform:"translate(8 8)"})})})]})));t.Z=l},93225:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(e,t)=>(0,i.jsx)(r.Z,{ref:t,style:{width:52,height:52},viewBox:"0 0 52 52",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 9.75C9.41015 9.75 6.5 12.6601 6.5 16.25V35.75C6.5 39.3399 9.41015 42.25 13 42.25H39C42.5899 42.25 45.5 39.3399 45.5 35.75V16.25C45.5 12.6601 42.5899 9.75 39 9.75H13ZM13 13C11.2051 13 9.75 14.4551 9.75 16.25V35.75L14.7982 30.7018C15.6371 29.8629 16.9582 29.7499 17.9274 30.434L22.8959 33.9412C23.0488 34.0491 23.2555 34.0387 23.3967 33.9159L30.7845 27.4917C31.7507 26.6516 33.2022 26.7022 34.1075 27.6075L42.25 35.75V16.25C42.25 14.4551 40.7949 13 39 13H13ZM17.875 24.375C19.6699 24.375 21.125 22.9199 21.125 21.125C21.125 19.3301 19.6699 17.875 17.875 17.875C16.0801 17.875 14.625 19.3301 14.625 21.125C14.625 22.9199 16.0801 24.375 17.875 24.375Z"})});t.Z=(0,o.forwardRef)(l)},60595:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(0,o.forwardRef)(((e,t)=>(0,i.jsxs)(r.Z,{ref:t,style:{width:52,height:52,...e.style},viewBox:"0 0 52 52",children:[(0,i.jsx)("path",{d:"M25.9193 6C25.2852 6.00028 24.6631 6.17291 24.1196 6.49944C23.5761 6.82596 23.1315 7.2941 22.8335 7.85377C22.5355 8.41344 22.3952 9.04359 22.4277 9.67683C22.4602 10.3101 22.6642 10.9226 23.0179 11.4488L24.5118 9.95703C24.4624 9.80821 24.4375 9.65238 24.438 9.49559C24.438 9.20387 24.5245 8.91871 24.6866 8.67616C24.8487 8.43361 25.079 8.24456 25.3485 8.13293C25.618 8.02129 25.9146 7.99209 26.2007 8.049C26.4868 8.10591 26.7496 8.24638 26.9559 8.45265C27.1622 8.65893 27.3026 8.92173 27.3595 9.20784C27.4165 9.49395 27.3872 9.79051 27.2756 10.06C27.164 10.3295 26.9749 10.5599 26.7324 10.7219C26.4898 10.884 26.2047 10.9705 25.913 10.9705C25.7569 10.9709 25.6018 10.946 25.4536 10.8968L23.9618 12.3886C24.4146 12.6956 24.9331 12.8921 25.4756 12.9623C26.0182 13.0325 26.5696 12.9743 27.0856 12.7925C27.6015 12.6107 28.0676 12.3104 28.4464 11.9156C28.8251 11.5208 29.1059 11.0427 29.2661 10.5196C29.4264 9.99658 29.4617 9.44321 29.3691 8.90404C29.2765 8.36487 29.0587 7.85496 28.7331 7.41532C28.4076 6.97568 27.9834 6.61859 27.4946 6.37277C27.0059 6.12696 26.4663 5.99928 25.9193 6V6Z",fill:"#34A853"}),(0,i.jsx)("path",{d:"M24.5286 16.1874C24.5309 15.0066 24.1485 13.8572 23.4393 12.9131L21.5008 14.8495C21.7956 15.3886 21.9034 16.0103 21.8073 16.6172C21.7112 17.2241 21.4167 17.7821 20.9698 18.2039L22.0234 20.7787C22.7916 20.2839 23.4234 19.6044 23.8611 18.8023C24.2988 18.0002 24.5283 17.1012 24.5286 16.1874V16.1874Z",fill:"#FBBC04"}),(0,i.jsx)("path",{d:"M19.1114 18.9667H19.0609C18.6274 18.9667 18.2 18.8654 17.8126 18.6709C17.4253 18.4765 17.0887 18.1941 16.8299 17.8465C16.571 17.4989 16.397 17.0955 16.3216 16.6687C16.2463 16.2419 16.2718 15.8033 16.3961 15.3881C16.5203 14.9728 16.7399 14.5924 17.0373 14.2771C17.3347 13.9617 17.7016 13.7203 18.1089 13.572C18.5162 13.4237 18.9524 13.3726 19.383 13.4228C19.8135 13.473 20.2263 13.6232 20.5885 13.8613L22.508 11.9418C21.8286 11.391 21.0271 11.0113 20.1706 10.8346C19.3141 10.6578 18.4276 10.6892 17.5858 10.926C16.7439 11.1629 15.9712 11.5983 15.3325 12.1957C14.6937 12.7931 14.2077 13.535 13.9151 14.3592C13.6226 15.1833 13.5321 16.0657 13.6512 16.932C13.7704 17.7984 14.0957 18.6236 14.5998 19.3382C15.104 20.0528 15.7722 20.636 16.5485 21.0388C17.3247 21.4417 18.1863 21.6523 19.0609 21.6531C19.4316 21.6533 19.8015 21.6166 20.165 21.5436L19.1114 18.9667Z",fill:"#EA4335"}),(0,i.jsx)("path",{d:"M25.993 21.1939C24.7798 21.1927 23.573 21.3694 22.4111 21.7185L23.9471 25.4712C24.6157 25.3055 25.3021 25.222 25.9909 25.2225C27.9266 25.2231 29.8022 25.8948 31.2982 27.1232C32.7941 28.3515 33.8179 30.0606 34.1951 31.9591C34.5723 33.8577 34.2796 35.8283 33.3668 37.5352C32.454 39.2422 30.9776 40.5798 29.1892 41.3203C27.4007 42.0607 25.4109 42.1582 23.5586 41.5961C21.7064 41.0339 20.1063 39.847 19.0311 38.2374C17.9558 36.6279 17.4719 34.6953 17.6618 32.769C17.8516 30.8426 18.7035 29.0417 20.0722 27.673C20.6612 27.0859 21.3336 26.5889 22.0676 26.1981L20.5484 22.456C17.8131 23.7956 15.6662 26.0949 14.5169 28.9155C13.3677 31.7362 13.2964 34.8811 14.3166 37.7509C15.3368 40.6208 17.3773 43.0149 20.0491 44.4771C22.721 45.9394 25.8374 46.3675 28.8046 45.6798C31.7718 44.9922 34.3822 43.2369 36.1385 40.7484C37.8948 38.26 38.6741 35.2124 38.328 32.1863C37.9818 29.1602 36.5344 26.3673 34.2616 24.3397C31.9888 22.3121 29.0494 21.1916 26.0036 21.1918L25.993 21.1939Z",fill:"#4285F4"})]})));t.Z=l},79573:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(e,t)=>(0,i.jsx)(r.Z,{ref:t,style:{width:52,height:52},viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{fill:"#FFD02F",d:"M41.4004 11.0771H35.3089L40.7168 19.4583L29.284 11.0771H23.1925L28.6004 22.0594L17.1676 11.0771H11.0762L16.3949 25.2549L11.0762 52.9233H17.1676L28.6004 23.2565L23.1925 52.9233H29.284L40.7168 20.6566L35.3089 52.9233H41.4004L52.9223 17.4789L41.4004 11.0771Z"})});t.Z=(0,o.forwardRef)(l)},31561:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(0,o.forwardRef)(((e,t)=>(0,i.jsx)(r.Z,{ref:t,viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.5858 10.5858C39.3668 9.80474 40.6332 9.80474 41.4142 10.5858L52.4142 21.5858C53.1953 22.3668 53.1953 23.6332 52.4142 24.4142L41.4142 35.4142C40.6332 36.1953 39.3668 36.1953 38.5858 35.4142C37.8047 34.6332 37.8047 33.3668 38.5858 32.5858L46.1716 25H24.5C18.701 25 14 29.701 14 35.5C14 41.299 18.701 46 24.5 46H29C30.1046 46 31 46.8954 31 48C31 49.1046 30.1046 50 29 50H24.5C16.4919 50 10 43.5081 10 35.5C10 27.4919 16.4919 21 24.5 21H46.1716L38.5858 13.4142C37.8047 12.6332 37.8047 11.3668 38.5858 10.5858Z"})})));t.Z=l},47390:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(0,o.forwardRef)(((e,t)=>(0,i.jsx)(r.Z,{ref:t,viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.3358 43.0775C35.5086 44.9256 32.1297 46 28.5 46C18.5589 46 10.5 37.9411 10.5 28C10.5 18.0589 18.5589 10 28.5 10C38.4411 10 46.5 18.0589 46.5 28C46.5 32.1441 45.0996 35.9611 42.7462 39.0035L52.6213 48.8787C53.7929 50.0503 53.7929 51.9497 52.6213 53.1213C51.4497 54.2929 49.5503 54.2929 48.3787 53.1213L38.3787 43.1213C38.3642 43.1068 38.3499 43.0922 38.3358 43.0775ZM42.5 28C42.5 35.732 36.232 42 28.5 42C20.768 42 14.5 35.732 14.5 28C14.5 20.268 20.768 14 28.5 14C36.232 14 42.5 20.268 42.5 28Z"})})));t.Z=l},61949:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(e,t)=>(0,i.jsx)(r.Z,{ref:t,style:{width:52,height:52},viewBox:"0 0 52 52",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 16.25C6.5 12.6601 9.41015 9.75 13 9.75H39C42.5899 9.75 45.5 12.6601 45.5 16.25V35.75C45.5 39.3399 42.5899 42.25 39 42.25H13C9.41015 42.25 6.5 39.3399 6.5 35.75V16.25ZM9.75 16.25C9.75 14.4551 11.2051 13 13 13H23.5625C24.0112 13 24.375 13.3638 24.375 13.8125V18.6875C24.375 19.1362 24.0112 19.5 23.5625 19.5H10.5625C10.1138 19.5 9.75 19.1362 9.75 18.6875V16.25ZM10.5625 22.75C10.1138 22.75 9.75 23.1138 9.75 23.5625V28.4375C9.75 28.8862 10.1138 29.25 10.5625 29.25H23.5625C24.0112 29.25 24.375 28.8862 24.375 28.4375V23.5625C24.375 23.1138 24.0112 22.75 23.5625 22.75H10.5625ZM9.75 33.3125C9.75 32.8638 10.1138 32.5 10.5625 32.5H23.5625C24.0112 32.5 24.375 32.8638 24.375 33.3125V38.1875C24.375 38.6362 24.0112 39 23.5625 39H13C11.2051 39 9.75 37.5449 9.75 35.75V33.3125ZM28.4375 13C27.9888 13 27.625 13.3638 27.625 13.8125V18.6875C27.625 19.1362 27.9888 19.5 28.4375 19.5H41.4375C41.8862 19.5 42.25 19.1362 42.25 18.6875V16.25C42.25 14.4551 40.7949 13 39 13H28.4375ZM27.625 23.5625C27.625 23.1138 27.9888 22.75 28.4375 22.75H41.4375C41.8862 22.75 42.25 23.1138 42.25 23.5625V28.4375C42.25 28.8862 41.8862 29.25 41.4375 29.25H28.4375C27.9888 29.25 27.625 28.8862 27.625 28.4375V23.5625ZM28.4375 32.5C27.9888 32.5 27.625 32.8638 27.625 33.3125V38.1875C27.625 38.6362 27.9888 39 28.4375 39H39C40.7949 39 42.25 37.5449 42.25 35.75V33.3125C42.25 32.8638 41.8862 32.5 41.4375 32.5H28.4375Z"})});t.Z=(0,o.forwardRef)(l)},93505:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(e,t)=>(0,i.jsxs)(r.Z,{ref:t,style:{width:52,height:52},viewBox:"0 0 52 52",...e,children:[(0,i.jsx)("path",{d:"M6.9715 39C7.80261 39 8.54248 38.4735 8.81484 37.6883L10.6992 32.2557C10.7276 32.174 10.8046 32.1191 10.8911 32.1191H20.758C20.8447 32.1191 20.9218 32.1741 20.9501 32.256L22.8235 37.686C23.0948 38.4723 23.835 39 24.6668 39C26.0173 39 26.9589 37.6605 26.5016 36.3898L18.8518 15.1323C18.3914 13.853 17.178 13 15.8184 13C14.4588 13 13.2453 13.853 12.7849 15.1323L5.13567 36.3883C4.67814 37.6597 5.62027 39 6.9715 39ZM12.1743 28.8184C12.0347 28.8184 11.9367 28.6808 11.9823 28.5489L15.69 17.8186C15.7098 17.7612 15.7639 17.7227 15.8247 17.7227C15.8855 17.7227 15.9396 17.7612 15.9594 17.8186L19.6671 28.5489C19.7127 28.6808 19.6147 28.8184 19.4752 28.8184H12.1743Z"}),(0,i.jsx)("path",{d:"M36.5657 39.4316C39.7903 39.4316 41.6057 37.7939 42.3293 36.334H42.4817V37.1465C42.4817 38.1702 43.3115 39 44.3352 39C45.3589 39 46.1887 38.1702 46.1887 37.1465V26.0508C46.1887 20.376 41.72 19.2461 38.6223 19.2461C35.7821 19.2461 33.1227 20.1669 31.5309 22.3792C30.8836 23.2788 31.5244 24.4392 32.6051 24.6854C33.4902 24.887 34.3631 24.3759 34.9919 23.7212C35.7675 22.9135 36.9681 22.3184 38.6731 22.3184C41.1233 22.3184 42.3801 23.6006 42.3801 25.8096V25.8984C42.3801 27.2822 40.9582 27.2568 37.4543 27.6631C33.76 28.0947 29.9768 29.0596 29.9768 33.4902C29.9768 37.3242 32.8586 39.4316 36.5657 39.4316ZM37.3909 36.3848C35.2454 36.3848 33.6965 35.4199 33.6965 33.541C33.6965 31.5098 35.4993 30.7861 37.6956 30.4941C38.927 30.3291 41.8469 29.999 42.3928 29.4531V31.9668C42.3928 34.2773 40.552 36.3848 37.3909 36.3848Z"})]});t.Z=(0,o.forwardRef)(l)},89250:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(0,o.forwardRef)(((e,t)=>(0,i.jsx)(r.Z,{ref:t,style:{width:52,height:52},viewBox:"0 0 52 52",...e,children:(0,i.jsx)("g",{children:(0,i.jsx)("path",{fill:"#1D9BF0",d:"M18.8791517,43 C34.3505402,43 42.8163265,30.3001969 42.8163265,19.3056102 C42.8163265,18.9483268 42.8163265,18.5910433 42.79992,18.2337598 C44.4405762,17.0644685 45.8679472,15.5866142 47,13.913878 C45.4905962,14.5797244 43.8663465,15.0182087 42.160064,15.2293307 C43.8991597,14.2062008 45.2280912,12.5659449 45.8679472,10.617126 C44.2436975,11.5752953 42.4389756,12.2573819 40.5194078,12.6309055 C38.9771909,11.0068898 36.795118,10 34.3833533,10 C29.7402961,10 25.9667867,13.7352362 25.9667867,18.3312008 C25.9667867,18.9808071 26.0488195,19.6141732 26.180072,20.2312992 C19.1908764,19.8902559 12.9891957,16.5610236 8.83833533,11.5265748 C8.11644658,12.7608268 7.70628251,14.1899606 7.70628251,15.7165354 C7.70628251,18.6072835 9.19927971,21.1569882 11.4469788,22.6510827 C10.0688275,22.6023622 8.77270908,22.2288386 7.64065626,21.6117126 C7.64065626,21.6441929 7.64065626,21.6766732 7.64065626,21.7253937 C7.64065626,25.7529528 10.5446178,29.1309055 14.3837535,29.8941929 C13.6782713,30.0890748 12.939976,30.1865157 12.1688675,30.1865157 C11.627451,30.1865157 11.102441,30.1377953 10.5938375,30.0403543 C11.6602641,33.3533465 14.777511,35.7568898 18.452581,35.8218504 C15.565026,38.0629921 11.9391757,39.394685 8.00160064,39.394685 C7.32893157,39.394685 6.65626251,39.3622047 6,39.2810039 C9.70788315,41.6195866 14.1376551,43 18.8791517,43"})})})));t.Z=l},6131:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(0,o.forwardRef)(((e,t)=>(0,i.jsx)(r.Z,{ref:t,viewBox:"0 0 64 64",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.4142 10.5858C26.1953 11.3668 26.1953 12.6332 25.4142 13.4142L17.8284 21H39.5C47.5081 21 54 27.4919 54 35.5C54 43.5081 47.5081 50 39.5 50H35C33.8954 50 33 49.1046 33 48C33 46.8954 33.8954 46 35 46H39.5C45.299 46 50 41.299 50 35.5C50 29.701 45.299 25 39.5 25H17.8284L25.4142 32.5858C26.1953 33.3668 26.1953 34.6332 25.4142 35.4142C24.6332 36.1953 23.3668 36.1953 22.5858 35.4142L11.5858 24.4142C10.8047 23.6332 10.8047 22.3668 11.5858 21.5858L22.5858 10.5858C23.3668 9.80474 24.6332 9.80474 25.4142 10.5858Z"})})));t.Z=l},96767:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(0,o.forwardRef)(((e,t)=>(0,i.jsxs)(r.Z,{ref:t,viewBox:"0 0 64 64",...e,children:[(0,i.jsx)("path",{d:"M29.6 56.0004C29.6 57.3259 30.6745 58.4004 32 58.4004C33.3255 58.4004 34.4 57.3259 34.4 56.0004L34.4 28.1945L42.3029 36.0974C43.2402 37.0347 44.7598 37.0347 45.6971 36.0974C46.6343 35.1602 46.6343 33.6406 45.6971 32.7033L33.6971 20.7033C32.7598 19.7661 31.2402 19.7661 30.3029 20.7033L18.3029 32.7033C17.3657 33.6406 17.3657 35.1602 18.3029 36.0974C19.2402 37.0347 20.7598 37.0347 21.6971 36.0974L29.6 28.1945L29.6 56.0004Z"}),(0,i.jsx)("path",{d:"M53.6 10.4004C54.9255 10.4004 56 9.32588 56 8.00039C56 6.67491 54.9255 5.60039 53.6 5.60039L10.4 5.60039C9.07452 5.60039 8 6.67491 8 8.00039C8 9.32587 9.07452 10.4004 10.4 10.4004L53.6 10.4004Z"})]})));t.Z=l},41228:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(e,t)=>(0,i.jsx)(r.Z,{ref:t,style:{width:52,height:52},viewBox:"0 0 52 52",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 13C6.5 10.3076 8.68261 8.125 11.375 8.125H40.625C43.3174 8.125 45.5 10.3076 45.5 13V39C45.5 41.6924 43.3174 43.875 40.625 43.875H11.375C8.68261 43.875 6.5 41.6924 6.5 39V13ZM9.75 13C9.75 12.1025 10.4775 11.375 11.375 11.375H13C13.8975 11.375 14.625 12.1025 14.625 13V14.625C14.625 15.5225 13.8975 16.25 13 16.25H11.375C10.4775 16.25 9.75 15.5225 9.75 14.625V13ZM39 11.375C38.1025 11.375 37.375 12.1025 37.375 13V14.625C37.375 15.5225 38.1025 16.25 39 16.25H40.625C41.5225 16.25 42.25 15.5225 42.25 14.625V13C42.25 12.1025 41.5225 11.375 40.625 11.375H39ZM9.75 21.125C9.75 20.2275 10.4775 19.5 11.375 19.5H13C13.8975 19.5 14.625 20.2275 14.625 21.125V22.75C14.625 23.6475 13.8975 24.375 13 24.375H11.375C10.4775 24.375 9.75 23.6475 9.75 22.75V21.125ZM39 19.5C38.1025 19.5 37.375 20.2275 37.375 21.125V22.75C37.375 23.6475 38.1025 24.375 39 24.375H40.625C41.5225 24.375 42.25 23.6475 42.25 22.75V21.125C42.25 20.2275 41.5225 19.5 40.625 19.5H39ZM9.75 29.25C9.75 28.3525 10.4775 27.625 11.375 27.625H13C13.8975 27.625 14.625 28.3525 14.625 29.25V30.875C14.625 31.7725 13.8975 32.5 13 32.5H11.375C10.4775 32.5 9.75 31.7725 9.75 30.875V29.25ZM39 27.625C38.1025 27.625 37.375 28.3525 37.375 29.25V30.875C37.375 31.7725 38.1025 32.5 39 32.5H40.625C41.5225 32.5 42.25 31.7725 42.25 30.875V29.25C42.25 28.3525 41.5225 27.625 40.625 27.625H39ZM9.75 37.375C9.75 36.4775 10.4775 35.75 11.375 35.75H13C13.8975 35.75 14.625 36.4775 14.625 37.375V39C14.625 39.8975 13.8975 40.625 13 40.625H11.375C10.4775 40.625 9.75 39.8975 9.75 39V37.375ZM39 35.75C38.1025 35.75 37.375 36.4775 37.375 37.375V39C37.375 39.8975 38.1025 40.625 39 40.625H40.625C41.5225 40.625 42.25 39.8975 42.25 39V37.375C42.25 36.4775 41.5225 35.75 40.625 35.75H39ZM17.875 13C17.875 12.1025 18.6025 11.375 19.5 11.375H32.5C33.3975 11.375 34.125 12.1025 34.125 13V22.75C34.125 23.6475 33.3975 24.375 32.5 24.375H19.5C18.6025 24.375 17.875 23.6475 17.875 22.75V13ZM19.5 27.625C18.6025 27.625 17.875 28.3525 17.875 29.25V39C17.875 39.8975 18.6025 40.625 19.5 40.625H32.5C33.3975 40.625 34.125 39.8975 34.125 39V29.25C34.125 28.3525 33.3975 27.625 32.5 27.625H19.5Z"})});t.Z=(0,o.forwardRef)(l)},88845:function(e,t,n){"use strict";var i=n(85893),o=n(67294),r=n(2767);const l=(e,t)=>(0,i.jsxs)(r.Z,{ref:t,style:{width:52,height:52},viewBox:"0 0 52 52",...e,children:[(0,i.jsx)("path",{d:"M15.3697 29.7344C13.4659 31.6382 13.4659 34.7249 15.3697 36.6287C17.2736 38.5325 20.3602 38.5325 22.264 36.6287L27.4348 31.458C29.3386 29.5542 29.3386 26.4675 27.4348 24.5637C26.8002 23.9291 26.8002 22.9002 27.4348 22.2656C28.0694 21.631 29.0983 21.631 29.7329 22.2656C32.9059 25.4386 32.9059 30.5831 29.7329 33.7561L24.5621 38.9268C21.3891 42.0998 16.2447 42.0998 13.0717 38.9268C9.89864 35.7538 9.89864 30.6093 13.0717 27.4363L14.7952 25.7128C15.4298 25.0782 16.4587 25.0782 17.0933 25.7128C17.7279 26.3474 17.7279 27.3763 17.0933 28.0109L15.3697 29.7344Z"}),(0,i.jsx)("path",{d:"M36.6271 22.2656C38.531 20.3618 38.531 17.2751 36.6271 15.3713C34.7233 13.4675 31.6367 13.4675 29.7329 15.3713L24.5621 20.542C22.6583 22.4459 22.6583 25.5325 24.5621 27.4363C25.1967 28.0709 25.1967 29.0998 24.5621 29.7344C23.9275 30.369 22.8986 30.369 22.264 29.7344C19.091 26.5614 19.091 21.417 22.264 18.2439L27.4348 13.0732C30.6078 9.90022 35.7522 9.90022 38.9252 13.0732C42.0983 16.2462 42.0983 21.3907 38.9252 24.5637L37.2017 26.2873C36.5671 26.9219 35.5382 26.9219 34.9036 26.2873C34.269 25.6527 34.269 24.6238 34.9036 23.9892L36.6271 22.2656Z"})]});t.Z=(0,o.forwardRef)(l)},70918:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(16406),o=n(67591);class r{addTile(e){if(this.row.tiles.length>=8)throw new Error("Cannot exceed the maximum number of tiles per row, 8");this.row.tiles.push(e)}updateRelativeHeight(e){this.row.relativeHeight=e}removeTile(e){this.row.tiles=this.row.tiles.filter((t=>t.tileId!==e))}getCurrentRelativeWidthDistributed(){const e=this.row.tiles.length;return this.relativeWidthSum()/e}calculateDistributedRelativeWidth(){return 1/this.row.tiles.length}rebalanceRelativeTilesWidths(e){const t=this.relativeWidthSum();let n=0;this.tiles.forEach((i=>{const r=i.relativeWidth/t*e,l=Math.max(r,o.Fu);i.relativeWidth=l,l>r&&(n+=l-r)})),0!==n&&this.tiles.forEach((e=>{if(n>0&&e.relativeWidth>o.Fu){const t=e.relativeWidth-o.Fu,i=Math.min(n,t);e.relativeWidth-=i,n-=i}}))}replaceTile(e,t){const n=this.tileById(e);if(!n)return!1;const i={...n,tileId:t};return this.removeTile(e),this.addTile(i),!0}tileById(e){return this.tiles.find((t=>t.tileId===e))}tileIndex(e){return this.tiles.findIndex((t=>t.tileId===e))}get tiles(){return(0,i.Z)(this.row.tiles,"order")}get order(){return this.row.order}canAddMoreTiles(){return this.tiles.length<8}isSingleTile(){return 1===this.tiles.length}isEmpty(){return 0===this.tiles.length}numTiles(){return this.tiles.length}relativeWidthSum(){return this.tiles.reduce(((e,t)=>e+t.relativeWidth),0)}constructor(e){this.row=e,this.id=e.rowId}}},15764:function(e,t,n){"use strict";n.d(t,{e:function(){return l}});var i=n(85893),o=n(67294);const r=o.createContext({}),l=e=>{let{children:t}=e;const n=(0,o.useRef)(null),l=(0,o.useRef)(null),a=(0,o.useRef)(null),s=(0,o.useCallback)((e=>{const t=n.current===e;e&&!t&&(n.current=e,e.scrollTop=0,a.current&&a.current(),l.current=null,a.current=null)}),[]),d=(0,o.useCallback)((e=>{l.current=e}),[]),c=(0,o.useCallback)((e=>{a.current=e}),[]),u=(0,o.useMemo)((()=>({scrollingPageRef:n,setScrollingPageRef:s,pageScrollTopAnimatedToRef:l,setPageScrollTopAnimatedToRef:d,pageScrollAnimationStopRef:a,setPageScrollAnimationStopRef:c})),[c,d,s]);return(0,i.jsx)(r.Provider,{value:u,children:t})};t.Z=r},68343:function(e,t,n){"use strict";var i;n.d(t,{y:function(){return i}}),function(e){e.UP="UP",e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT"}(i||(i={}))},69290:function(e,t,n){"use strict";n.d(t,{ZP:function(){return g},rw:function(){return i}});var i,o=n(64310),r=n(62830),l=n.n(r),a=n(85677),s=n(50576),d=n(16406),c=n(70918),u=n(68343),p=n(7450);function h(e){let{insertionIndex:t,elements:n,numberOfNewElements:i}=e;if(t>n.length)throw new Error(`${t} exceeds current number of elements.`);if(i<=0)return[];const o=i+1,[r,l]=(()=>{if(0===n.length)return[-1,-1+o];if(t>=n.length){const e=Math.ceil(n[t-1].order);return[e,e+o]}if(t<=0){const e=Math.floor(n[0].order);return[e-o,e]}return[n[t-1].order,n[t].order]})(),a=[];for(let e=1;e<=i;e+=1){const t=e*(l-r)/o;a.push(r+t)}return a}function f(e,t){return h({insertionIndex:e,elements:t,numberOfNewElements:1})[0]}!function(e){e[e.NEW_ROW=0]="NEW_ROW",e[e.EXISTING_ROW=1]="EXISTING_ROW",e[e.END=2]="END"}(i||(i={}));class g{getLayout(){return(0,a.Z)(this.layout)}rowByTileId(e){const t=this.layout.rows.find((t=>t.tiles.some((t=>t.tileId===e))));return t?new c.Z(t):t}removeRow(e){if(1===this.layout.rows.length)throw new Error("Cannot delete the only row on a Page.");this.layout.rows=this.layout.rows.filter((t=>t.rowId!==e))}rowById(e){const t=this.layout.rows.find((t=>t.rowId===e));return t?new c.Z(t):t}rowIndex(e){return this.pageLayoutRows.findIndex((t=>t.id===e))}get rowLayouts(){return(0,d.Z)(this.layout.rows,"order")}get pageLayoutRows(){return this.rowLayouts.map((e=>new c.Z(e)))}get allTileIds(){return this.tiles.map((e=>e.tileId)).sort(((e,t)=>e.localeCompare(t,"en")))}get sortedTileRowData(){return(0,d.Z)(this.orderedTileRowData,"tileId")}get orderedTileRowData(){const e=[];let t=0;return(0,d.Z)(this.layout.rows,"order").forEach(((n,i)=>{const o=new c.Z(n);(0,d.Z)(n.tiles,"order").forEach(((r,l)=>{const a=r.relativeWidth,s=n.relativeHeight??void 0;e.push({tileId:r.tileId,tileIndexInPage:t,row:o,rowIndex:i,tileIndexInRow:l,tileRelativeWidth:a,tileRelativeHeight:s}),t+=1}))})),e}get firstRow(){return this.pageLayoutRows[0]}get lastRow(){return this.pageLayoutRows[this.pageLayoutRows.length-1]}get numRows(){return this.pageLayoutRows.length}get tiles(){return this.pageLayoutRows.flatMap((e=>e.tiles))}get numTiles(){return this.layout.rows.reduce(((e,t)=>e+t.tiles.length),0)}addTileToExistingRowInternal(e,t,n,i,o){const r=f(i,n.tiles),l=1/(n.tiles.length+1),a={tileId:e,order:r,relativeWidth:l};return n.rebalanceRelativeTilesWidths(1-l),this.tileTypes.set(e,t),n.addTile(a),o!==p.lz&&(n.row.relativeHeight=o),a}replaceTileInLayout(e,t,n){const i=this.rowByTileId(e);if(!i)throw new Error(`row for tile ${e} not found in page layout during replacement.`);const o=i.tileById(e);if(!o)throw new Error(`${e} not found in page layout during replacement.`);return this.tileTypes.set(t,n),o.tileId=t,o}addTileToNewRow(e,t,n,i,o){const r=l()(),a=[{tileId:e,order:1,relativeWidth:1}],s=f(i,this.pageLayoutRows),d=(0,p._f)(t,n,o);return this.tileTypes.set(e,n),this.addRow(r,s,d,a),a[0]}addTileToExistingRow(e,t,n,i,o,r){const l=this.rowById(i);if(void 0===l)throw new Error(`${i} not found.`);const a=l.tiles;if(o>a.length)throw new Error(`Tile index ${o} is larger than the number of tiles.`);if(l.canAddMoreTiles()){const a=(0,p.eD)(i,t,r);return this.addTileToExistingRowInternal(e,n,l,o,a)}const s=this.pageLayoutRows.findIndex((e=>l.id===e.id));if(o===a.length)return this.addTileToNewRow(e,t,n,s+1,r);const d=a[a.length-1];this.addTileToNewRow(d.tileId,{kind:p.DV.ROW,rowId:i},this.tileTypes.get(d.tileId),s+1,r),l.removeTile(d.tileId);const c=(0,p.eD)(i,t,r);return this.addTileToExistingRowInternal(e,n,l,o,c)}addTileToEndOfPage(e,t,n,i){return this.addTileToExistingRow(e,t,n,this.lastRow.id,this.lastRow.tiles.length,i)}findNoopDropzones(e){if(!e||!e.length)return{horizontal:[],vertical:[]};const t=[],n=[],i=new Map;return e.forEach((n=>{const o=this.rowByTileId(n);if(void 0===o)throw new Error(`Unable to find tile with id: ${n}`);const r=this.pageLayoutRows.findIndex((e=>e.id===o.id)),l=o.tiles.findIndex((e=>e.tileId===n)),a=l,s=l+1;if(i.has(r)||i.set(r,[]),i.get(r).push(s),1===e.length&&i.get(r).push(a),o.isSingleTile()){const e=r,n=r+1;t.push(e,n);const o=r-1;if(o>=0&&!this.pageLayoutRows[o].isSingleTile()){const e=this.pageLayoutRows[o].numTiles();i.has(o)||i.set(o,[]),i.get(o).push(e)}}})),i.forEach(((e,t)=>{n.push({rowIdx:t,indices:e.sort()})})),{horizontal:t,vertical:n}}previousTileInRow(e,t){const n=this.rowById(t);if(void 0===n)throw new Error(`Row not found in layout ${t}`);const i=n.tileIndex(e);if(0===i)throw new Error(`Previous neighbor in row for tile ${e} not found`);return n.tiles[i-1]}tileNeighborByDirection(e,t,n){const i=this.rowByTileId(e);if(!i)return o.v.addError(new Error(`Could not find tile neighbor by direction as row was not found for tileId: ${e}`)),{tileId:null,lastIntentionalColumnIdx:n};const r=this.rowIndex(i.id),l=this.pageLayoutRows[r-1],a=this.pageLayoutRows[r+1],s=i.tileIndex(e);let d=n,c=null;switch(t){case u.y.LEFT:var p;if(0===s)break;d=s-1,c=null===(p=i.tiles[d])||void 0===p?void 0:p.tileId;break;case u.y.RIGHT:var h;if(s===i.tiles.length-1)break;d=s+1,c=null===(h=i.tiles[d])||void 0===h?void 0:h.tileId;break;case u.y.UP:var f,g,m,v,w,y;if(l)i.numTiles()>1&&(d=s),c=(null===(g=l)||void 0===g||null===(f=g.tiles[n||s])||void 0===f?void 0:f.tileId)||(null===(v=l)||void 0===v||null===(m=v.tiles[s])||void 0===m?void 0:m.tileId)||(null===(y=l)||void 0===y||null===(w=y.tiles[0])||void 0===w?void 0:w.tileId);break;case u.y.DOWN:var x,b,C,T,I,$;if(a)i.numTiles()>1&&(d=s),c=(null===(b=a)||void 0===b||null===(x=b.tiles[n||s])||void 0===x?void 0:x.tileId)||(null===(T=a)||void 0===T||null===(C=T.tiles[s])||void 0===C?void 0:C.tileId)||(null===($=a)||void 0===$||null===(I=$.tiles[0])||void 0===I?void 0:I.tileId)}return{tileId:c,lastIntentionalColumnIdx:d}}doTilesOccupyCompleteRows(e){const t=new Set(e),n=[],i=(0,d.Z)(this.layout.rows,(e=>e.order));for(const e of i){let i=0;for(const n of e.tiles)t.has(n.tileId)&&(i+=1,t.delete(n.tileId));if(0!==i){if(i!==e.tiles.length)return null;n.push(e)}}return t.size>0?null:n}moveTiles(e,t,n){if(t.kind===i.NEW_ROW){const n=this.doTilesOccupyCompleteRows(new Set(e));if(n){const e=h({insertionIndex:t.newRowIdx,elements:this.pageLayoutRows,numberOfNewElements:n.length});n.forEach(((t,n)=>{t.order=e[n]}));for(let t=0;t<n.length;t+=1)n[t].order=e[t];return}}let o=t;e.forEach((e=>{this.moveTile(e,o,n);const t=this.rowByTileId(e);if(!t)throw new Error(`While moving tiles: unable to find tile with id: ${e}`);o={kind:i.EXISTING_ROW,rowId:t.id,newTileIdx:t.tileIndex(e)+1}}))}moveTile(e,t,n){const o=this.rowByTileId(e);if(void 0===o)throw new Error(`Unable to find tile with id: ${e}`);const r=o.tileById(e);if(!r)return;const l={kind:p.DV.ROW,rowId:o.id},a=this.tileTypes.get(e);switch(t.kind){case i.NEW_ROW:this.addTileToNewRow(e,l,a,t.newRowIdx,n);break;case i.EXISTING_ROW:if(o.id===t.rowId){const e=f(t.newTileIdx,o.tiles);return void(r.order=e)}this.addTileToExistingRow(e,l,a,t.rowId,t.newTileIdx,n);break;case i.END:throw new Error("Moving a tile to the end not supported.")}const s="placeholder";r.tileId=s,this.deleteTile(s,n),o.rebalanceRelativeTilesWidths(1)}addRow(e,t,n,i){this.layout.rows.push({rowId:e,order:t,relativeHeight:n,tiles:i})}deleteTile(e,t){const n=this.rowByTileId(e);if(!n)throw new Error(`Tile ${e} is not associated with a row.`);const i=(0,p.Dq)(n.id,e,n.tiles.map((e=>e.tileId)),t,this.tileTypes.get.bind(this.tileTypes));n.row.relativeHeight=i,n.removeTile(e),n.isEmpty()&&this.removeRow(n.id)}isSingleTilePage(e){const t=this.layout.rows;return 1===t.length&&1===t[0].tiles.length&&t[0].tiles[0].tileId===e}isSingleTileRow(e){const t=this.layout.rows.find((t=>t.tiles.find((t=>t.tileId===e))));return!!t&&1===t.tiles.length}getTileTypesForRow(e){return this.rowById(e).tiles.map((e=>e.tileId)).map((e=>this.tileTypes.get(e)))}isEquivalentTo(e){var t,n;return(0,s.Z)(this.layout,null===(t=e)||void 0===t?void 0:t.layout)&&(0,s.Z)(this.tileTypes,null===(n=e)||void 0===n?void 0:n.tileTypes)}static copyFrom(e){return new g(e.layout,e.tileTypes)}static fromPage(e){return g.fromLayout(e.layout,new Map)}static fromLayout(e,t){return new g(e,t)}constructor(e,t){this.layout=JSON.parse(JSON.stringify(e)),this.tileTypes=t}}},7450:function(e,t,n){"use strict";n.d(t,{DV:function(){return i},Dq:function(){return a},_f:function(){return s},eD:function(){return d},lz:function(){return l},nA:function(){return c},tn:function(){return u}});var i,o=n(67591),r=n(32011);!function(e){e.NEW_TILE="NEW_TILE",e.ROW="ROW"}(i||(i={}));const l="NO_CHANGE";function a(e,t,n,i,l){return n.filter((e=>e!==t)).map((e=>l(e))).every((e=>(0,r.g)(e)===r.Y.FIXED))?null:i(e)/o.Cj}function s(e,t,n){switch(e.kind){case i.NEW_TILE:return function(e){switch((0,r.g)(e)){case r.Y.FIXED:return null;case r.Y.SCALABLE:return 1}}(t);case i.ROW:switch((0,r.g)(t)){case r.Y.FIXED:return null;case r.Y.SCALABLE:return n(e.rowId)/o.Cj}}}function d(e,t,n){switch(t.kind){case i.NEW_TILE:return l;case i.ROW:return Math.max(n(t.rowId),n(e))/o.Cj}}function c(e,t){const n=[...e];n.push(o.Rv),void 0!==t&&n.push(t);return Math.ceil(Math.max(...n))}function u(e,t,n){const i=c(t,n);if("number"!=typeof e)return i;const r=e*o.Cj;return Math.ceil(Math.max(i,r))}},32011:function(e,t,n){"use strict";n.d(t,{Y:function(){return i},g:function(){return r}});var i,o=n(96215);function r(e){return[o.YUT.Text,o.YUT.TextSlate,o.YUT.Table,o.YUT.Twitter,o.YUT.Drawing].includes(e)?i.FIXED:i.SCALABLE}!function(e){e.FIXED="FIXED",e.SCALABLE="SCALABLE"}(i||(i={}))},82360:function(e,t,n){"use strict";n.d(t,{GS:function(){return u},LY:function(){return h},M9:function(){return r},MJ:function(){return c},fz:function(){return o},kt:function(){return p},lk:function(){return d},rQ:function(){return l},sA:function(){return a},vH:function(){return s}});var i=n(4480);const o=(0,i.xu)({key:"dragIndicator",default:!1}),r=(0,i.cn)({key:"activeDropzone",default:null}),l=(0,i.cn)({key:"addTileDragInProgressState",default:!1}),a=(0,i.cn)({key:"moveTileDragInProgress",default:null}),s=(0,i.CG)({key:"isTileMoveDragInProgressSelector",get:e=>{let{tileId:t}=e;return e=>{let{get:n}=e;return n(a)===t}}}),d=(0,i.cn)({key:"rowResizeInProgress",default:!1}),c=(0,i.cn)({key:"tileResizeInProgress",default:!1}),u=(0,i.cn)({key:"fileDragInProgress",default:!1}),p=(0,i.cn)({key:"selectionRectangleDragInProgressState",default:!1}),h=(0,i.cn)({key:"tileDragData",default:null})},72988:function(e,t,n){"use strict";n.d(t,{Oy:function(){return l},WI:function(){return a},q3:function(){return r}});var i=n(4480),o=n(82360);const r=()=>{const e=(0,i.sJ)(o.rQ),t=(0,i.sJ)(o.sA),n=(0,i.sJ)(o.GS);return e||t||n},l=()=>(0,i.sJ)(o.kt),a=()=>{const e=r(),t=l();return e||t}},76072:function(e,t,n){"use strict";n.d(t,{UA:function(){return l},lL:function(){return o},u3:function(){return r}});var i=n(4480);const o=1e3,r=(0,i.cn)({key:"textRewriteInProgressState",default:!1}),l=(0,i.cn)({key:"textSelectionCountState",default:{chars:0,words:0}})},80826:function(e,t,n){"use strict";n.d(t,{qT:function(){return s},zg:function(){return d}});var i=n(40419),o=n(52027),r=n(77493),l=n(64487),a=n(78137);const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,s,d,c,u;const p=[...e.children],h=e.selection&&r.e6.isBackward(e.selection)?null===(n=e.selection)||void 0===n?void 0:n.focus:null===(s=e.selection)||void 0===s?void 0:s.anchor,f=e.selection&&r.e6.isBackward(e.selection)?null===(d=e.selection)||void 0===d?void 0:d.anchor:null===(c=e.selection)||void 0===c?void 0:c.focus;let g=0;h&&f&&r.y$.equals(h.path,f.path)&&(g=Math.abs(h.offset-f.offset));const{nearestAncestorId:m,pathFromAncestorToChild:v,childText:w}=((e,t)=>{if(!t)return{nearestAncestorId:void 0,pathFromAncestorToChild:[],childText:void 0};let n;const o=[];let r;const l=t.path,a=(0,i.MkB)(e,l);if(a){(0,i.GsE)(a)&&(r=a.text);const t=[...l];for(n=a.id;!n&&(0,i.MkB)(e,t)&&t.length;){var s;const r=t.pop();void 0!==r&&o.push(r),n=null===(s=(0,i.MkB)(e,t))||void 0===s?void 0:s.id}o.reverse()}return{nearestAncestorId:n,pathFromAncestorToChild:o,childText:r}})(e,null===(u=e.selection)||void 0===u?void 0:u.anchor);if(p.forEach((t=>e.apply({type:"remove_node",path:[0],node:t}))),t.nodes){(r.NB.isNode(t.nodes)?[t.nodes]:t.nodes).forEach(((t,n)=>e.apply({type:"insert_node",path:[n],node:t})))}l.n_({category:"slate",message:"Reset nodes",level:"info",data:{editor_content:(0,a.fR)(e.children)}});const y=()=>{try{h&&f&&(h.offset=Math.min((0,i.ZJ1)(e,h.path).offset,h.offset),f.offset=Math.min((0,i.ZJ1)(e,h.path).offset,h.offset),(0,i.Ys)(e,{anchor:h,focus:f}))}catch(t){const n=(0,i.ZJ1)(e,[]);n&&(0,i.Ys)(e,n)}};if(h&&m){const t=(0,i.DYv)(e,{at:[],match:{id:m}});if(!t)return void y();const n=(0,i.MkB)(e,[...t[1],...v]);let r=h.offset,l=r;n&&(0,i.GsE)(n)&&w&&(r=((e,t,n)=>{if(n>e.length)return 0;const i=(new o.diff_match_patch).diff_main(e,t);let r=n,l=0;for(const e of i)if(e[0]===o.DIFF_DELETE?(r-=Math.min(e[1].length,n-l),l+=e[1].length):e[0]===o.DIFF_INSERT?r+=e[1].length:l+=e[1].length,l>=n)break;return r})(w,n.text,h.offset),l=Math.min(r+g,n.text.length));try{const n=[...t[1],...v],o=(0,i.ZJ1)(e,n),a={anchor:{path:n,offset:Math.min(o.offset,r)},focus:{path:n,offset:Math.min(o.offset,l)}};(0,i.Ys)(e,a)}catch(e){y()}}else y()},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if([...e.children].forEach((t=>e.apply({type:"remove_node",path:[0],node:t}))),t.nodes){(r.NB.isNode(t.nodes)?[t.nodes]:t.nodes).forEach(((t,n)=>e.apply({type:"insert_node",path:[n],node:t})))}}},61867:function(e,t,n){"use strict";n.d(t,{r9:function(){return M},GB:function(){return z},EA:function(){return F},vV:function(){return B},Sp:function(){return N},gD:function(){return D},bJ:function(){return A},ZP:function(){return U}});var i=n(85893),o=n(67294),r=n(4480),l=n(16618),a=n(9228),s=n(87473),d=n(95421),c=n(85695),u=n(96391),p=n(59016);const h=p.ZP.span.withConfig({displayName:"Mention__StyledMention",componentId:"sc-5503593a-0"})`
  user-select: all;
  box-shadow: none;
  border-radius: 4px;
  padding: 0.03em 0.1em 0.1em 0.1em;
  background-color: ${e=>e.isSelected?e.theme.colors.mentionSelectedBackground:e.theme.colors.mentionBackground};
`;var f=e=>{let{attributes:t,element:n,children:o}=e;const{value:r}=n;return(0,i.jsxs)(h,{"data-testid":"mention_node",...t,contentEditable:!1,isSelected:(0,u.vt)(),children:[r,o]})},g=n(98029),m=n(69336),v=n(36409),w=n(51521),y=n(89755),x=n.n(y),b=n(47201);const C=p.ZP.div.withConfig({displayName:"ReferenceCard__StyledContent",componentId:"sc-ecb486ef-0"})`
  background-color: ${e=>{let{theme:t}=e;return t.colors.referenceCardBackground}};
  z-index: ${w.Ue};
  cursor: pointer;
  border-radius: ${e=>{let{theme:t}=e;return t.borderRadius.sm}};
  padding: 12px;
  width: 331px;
  display: flex;
  flex-direction: column;
  gap: 8px; // TODO: change to 12px after BRAIN-1268 is done
  box-shadow: ${e=>{let{theme:t}=e;return t.colors.panelBoxShadow}};
`,T=p.ZP.div.withConfig({displayName:"ReferenceCard__ReferenceIconAndSource",componentId:"sc-ecb486ef-1"})`
  display: flex;
  gap: 8px;
  align-items: center;
`,I=p.ZP.div.withConfig({displayName:"ReferenceCard__ReferenceIcon",componentId:"sc-ecb486ef-2"})`
  flex: 0 0 16px;
  height: 16px;
  border-radius: 8px;
  overflow: hidden;
`,$=p.ZP.div.withConfig({displayName:"ReferenceCard__ReferenceSource",componentId:"sc-ecb486ef-3"})`
  flex: 1 1 auto;

  font-size: ${e=>{let{theme:t}=e;return t.fontSizes.xxs}};
  font-weight: 400;
  line-height: 14px;
  flex: 1;
  color: ${e=>{let{theme:t}=e;return t.colors.referenceSource}};
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,k=p.ZP.div.withConfig({displayName:"ReferenceCard__ContentWrapper",componentId:"sc-ecb486ef-4"})`
  display: flex;
  flex-direction: column;
  gap: 6px;
`,E=p.ZP.div.withConfig({displayName:"ReferenceCard__BodyAndTitleWrapper",componentId:"sc-ecb486ef-5"})`
  display: flex;
  flex-direction: column;
  gap: 4px;
`,R=p.ZP.div.withConfig({displayName:"ReferenceCard__ReferenceTitle",componentId:"sc-ecb486ef-6"})`
  font-size: ${e=>{let{theme:t}=e;return t.fontSizes.xxs}};
  font-weight: 400;
  line-height: ${14}px;
  color: ${e=>{let{theme:t}=e;return t.colors.referenceTitle}};
  ${(0,b.pi)({numLines:3,lineHeight:14})};
`,S=p.ZP.div.withConfig({displayName:"ReferenceCard__ReferenceBody",componentId:"sc-ecb486ef-7"})`
  font-size: ${e=>{let{theme:t}=e;return t.fontSizes.sm}};
  font-weight: 400;
  line-height: ${16}px;
  color: ${e=>{let{theme:t}=e;return t.colors.referenceBody}};
  ${(0,b.pi)({numLines:5,lineHeight:16})};
`;var P=e=>{let{source:t,title:n,icon:o,body:r,onClick:l}=e;return(0,i.jsx)(C,{"data-testid":"reference_card",onClick:l,children:(0,i.jsxs)(k,{children:[(0,i.jsxs)(T,{children:[o&&"an icon with a picture from the cited source"!==o&&(0,i.jsx)(I,{children:(0,i.jsx)(x(),{src:o,width:"16",height:"16",unoptimized:!0})}),(0,i.jsx)($,{children:t})]}),(0,i.jsxs)(E,{children:[(0,i.jsx)(S,{children:r}),(0,i.jsx)(R,{children:n})]})]})})};const _=p.ZP.sup.withConfig({displayName:"Reference__StyledReference",componentId:"sc-ada7992b-0"})`
  // different line-heights in the same line cause the text to jump
  // vertical-align: "text-top" aligns the text to the top of the line without adjusting the baseline
  vertical-align: text-top;

  user-select: none;
  box-shadow: none;
  cursor: pointer;
  padding: 0px 4px;
  font-size: 68%;
  // Add margin between consecutive reference elements in the same spot and between
  // the reference and the text of the claim
  margin-left: 4px;
  border-radius: ${e=>e.theme.borderRadius.xxs};
  background-color: ${e=>e.isSelected?e.theme.colors.referenceButtonSelectedBackground:e.theme.colors.referenceButtonBackground};

  // Increment the counter for each reference element
  &::before {
    counter-increment: reference-element-value;
    content: counter(reference-element-value);
  }
`,j=(0,p.ZP)(g.VY).withConfig({displayName:"Reference__StyledPopoverContent",componentId:"sc-ada7992b-1"})``,L=(0,p.ZP)((0,m.E)(g.VY)).withConfig({displayName:"Reference__PopoverContentAnimation",componentId:"sc-ada7992b-2"})`
  outline: none;
  z-index: ${w.Ue};
`;var Z=e=>{let{attributes:t,element:n,children:r}=e;const{favIconUrl:l,source:a,title:s,body:d,url:p}=n,h=(0,o.useRef)(null),f=(0,o.useRef)(null),m=(0,u.vt)(),[w,y]=(0,o.useState)(!1),x=(0,o.useCallback)((0,v.Z)((e=>{y(e)}),100),[]),b=(0,o.useCallback)((e=>{e.stopPropagation(),window.open(p,"_blank")}),[p]);return(0,i.jsxs)(g.fC,{open:w,children:[(0,i.jsx)(g.xz,{asChild:!0,"data-reference-element":!0,children:(0,i.jsx)("a",{...(0,c.aE)(p),href:p,style:{textDecoration:"none"},onClick:b,children:(0,i.jsx)(_,{...t,ref:h,"data-testid":"reference_node",contentEditable:!1,isSelected:m,onMouseEnter:e=>{"number"==typeof e.buttons&&0!==e.buttons||x(!0)},onMouseLeave:()=>x(!1),children:r})})}),(0,i.jsx)(g.h_,{children:(0,i.jsx)(j,{asChild:!0,ref:f,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),"data-reference-element":!0,children:(0,i.jsx)(L,{initial:{opacity:0},animate:{opacity:1,transition:{type:"easeIn",duration:.1}},children:(0,i.jsx)(P,{source:a,icon:l,title:s,body:d,onClick:b})})})})]})};const D=e=>{let{attributes:t,children:n}=e;return(0,i.jsx)("ol",{...t,children:n})},M=e=>{let{attributes:t,children:n}=e;return(0,i.jsx)("ul",{...t,children:n})},N=e=>{let{attributes:t,children:n,element:o}=e;var r;const l=(null===(r=o.style)||void 0===r?void 0:r.color)?{color:o.style.color}:{color:"var(--text-color)"};return(0,i.jsx)("li",{style:l,...t,children:n})},A=e=>{let{attributes:t,children:n}=e;return(0,i.jsx)("p",{...t,children:n})},z=e=>{let{attributes:t,children:n}=e;return(0,i.jsx)("div",{className:"caption",...t,children:n})},B=e=>{let{children:t}=e;return(0,i.jsx)("p",{children:t})},F=e=>{let{attributes:t,children:n,element:s}=e;var u;const p=(null===(u=s.style)||void 0===u?void 0:u.color)?{color:s.style.color}:{},h=(0,r.Zl)(a.Vx),f=(0,r.Zl)(l.R),g=(0,o.useCallback)((e=>{e.stopPropagation();const{isTomeLink:t,tomeId:n,pageId:i}=(0,d.vb)(e.target.parentElement.href);if(t){const{isTomeLink:t,tomeId:o}=(0,d.vb)(window.location.href);t&&o===n&&(i&&h(i),e.preventDefault(),f(!0))}}),[h,f]);return(0,i.jsx)("a",{style:p,...(0,c.aE)(s.url),...t,href:s.url,onClick:g,children:n})};var U=e=>{let{attributes:t,children:n,element:o,wrapText:r}=e;if(o.type===s.uJ)return(0,i.jsx)(F,{attributes:t,element:o,children:n});if(!r)return n;switch(o.type){case"reference":return(0,i.jsx)(Z,{attributes:t,element:o,children:n});case"mention":return(0,i.jsx)(f,{attributes:t,element:o,children:n});case"blockquote":return(0,i.jsx)("blockquote",{...t,children:n});case"heading":{var l,a;const e=void 0===(null===(l=o)||void 0===l?void 0:l.level)?4:null===(a=o)||void 0===a?void 0:a.level;if(0===e)return(0,i.jsx)("h1",{className:"display",...t,children:n});const r=`h${e}`;return(0,i.jsx)(r,{...t,children:n})}case"bulleted-list":return(0,i.jsx)(M,{...t,children:n});case"numbered-list":return(0,i.jsx)(D,{...t,children:n});case"list-item":return(0,i.jsx)(N,{element:o,attributes:t,children:n});case"caption":return(0,i.jsx)(z,{...t,children:n});default:return(0,i.jsx)(A,{...t,children:n})}}},78137:function(e,t,n){"use strict";n.d(t,{Ak:function(){return R},FE:function(){return x},Gt:function(){return h},Hk:function(){return c},If:function(){return w},Lk:function(){return g},N5:function(){return D},N7:function(){return j},OL:function(){return S},OQ:function(){return f},U9:function(){return T},b2:function(){return $},fR:function(){return Z},gj:function(){return k},h4:function(){return I},hL:function(){return v},hW:function(){return b},ku:function(){return p},oM:function(){return E},qJ:function(){return _},t$:function(){return m},th:function(){return y},xm:function(){return P},z_:function(){return C}});var i=n(77493),o=n(40419),r=n(22774),l=n(64310),a=n(50576),s=n(83305),d=n(87473);const c=e=>(0,o.KyJ)(e)&&e.selection?e.selection:{anchor:(0,o.plg)(e,[]),focus:(0,o.ZJ1)(e,[])},u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.selection;const r=s.CI(t);s.Cs.includes(t)&&(r.type=t);let a=null;try{a=(0,o.tVv)(e,{match:e=>!(i.ML.isEditor(e)||!i.W_.isElement(e)),mode:"all",at:n||void 0})}catch(e){l.v.addError(`Failed to get node entries: ${e}`)}let c=!1;if(!a)return[!1,!1];const u=Array.from(a,(e=>{const t=e[0],n=t.type===r.type;return("heading"!==r.type||void 0===r.level||t.level===r.level)&&n&&(c=!0),e[0].type===d.pL||"lic"===e[0].type?"":`${e[0].type}-${e[0].type===d.uX?e[0].level:""}`})).filter((e=>!!e)),p=new Set(u);return[c,1===p.size]},p=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.selection;const[i]=u(e,t,n);return i},h=e=>p(e,"display")||p(e,"title")||p(e,"heading")||p(e,"subheading"),f=e=>p(e,"bulleted-list")||p(e,"numbered-list"),g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.selection;const n={display:p(e,"display",t),title:p(e,"title",t),heading:p(e,"heading",t),subheading:p(e,"subheading",t),paragraph:p(e,d.JB,t),caption:p(e,"caption",t)};return Object.keys(n).reduce(((e,t)=>(n[t]&&e.push(t),e)),[])},m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.selection;const[i]=(0,o.tVv)(e,{match:e=>!0===e[t],mode:"all",at:n||void 0});return!!i},v=e=>(0,r.Se)(e),w=(e,t)=>{const n=e;(0,o.kRc)(n,(()=>{let e=null;if((e=>h(e)||p(e,"caption"))(n)&&!f(n))for(const t of(0,o.tVv)(n,{mode:"all",match:i.xv.isText})){const i=t[1],r=(0,o.Ow4)(n,i);!e&&r&&(e=r[0]),r&&r[0].type!==d.JB&&s.Ci.includes(r[0].type)&&(0,o.fLV)(n,{type:d.JB},{at:r[1]})}(0,r.kQ)(n,{type:t}),e&&e.type!==d.JB&&(e.children=[],(0,o.qEX)(n,e,{match:e=>e.type===t}));let l=null;for(const e of(0,o.tVv)(n,{mode:"all",match:i.xv.isText})){const t=e[1],i=(0,o.Ow4)(n,t);!i||i[0].type!==d.JB&&i[0].type!==r.wl||(l=(0,o.Ow4)(n,i[1]),l&&(0,o.kKo)(l[0])&&s.Ci.includes(l[0].type)&&((0,o.qEX)(n,l[0],{at:t}),(0,o.hmm)(n,{at:t})))}l&&"caption"===l[0].type&&(0,o.LKm)(n,{at:l[1]})}))},y=(e,t,n)=>{const[i,r]=u(e,t),l=s.Cs.includes(t);if(n&&!e.selection&&(0,o.Ys)(e,{anchor:(0,o.plg)(e,[]),focus:(0,o.ZJ1)(e,[])}),l)return void w(e,t);const a=i&&r?{type:d.JB}:s.CI(t),c=(0,o.tVv)(e),p=[];for(const t of c){const n=t[0];(0,o.kKo)(n)&&(s.Cs.includes(n.type)&&p.push(t[1]),"paragraph"!==n.type&&"heading"!==n.type&&"caption"!==n.type||(0,o.fLV)(e,a,{at:t[1]}))}p.reverse().forEach((t=>{const n=(0,o.Ow4)(e,t);n&&n[0].type===a.type&&n[0].level===a.level||!n||"list-item"===n[0].type||"heading"===n[0].type||"caption"===n[0].type||"heading"!==a.type&&"caption"!==a.type||(0,o.qEX)(e,a,{at:t})}))},x=e=>{(0,r.Se)(e),(0,o.LKm)(e),(0,o.s2K)(e,[{type:d.JB,children:[{text:""}]}],{mode:"highest"})},b=(e,t)=>{const n=(0,o.tVv)(e,{match:e=>(0,o.kKo)(e)&&(e.type===r.wl||e.type===d.uJ),at:(0,o.RIR)(e,t)});for(const t of n){const n=t[0];if((0,o.kKo)(n)&&n.children){const n=(0,o.Eln)(e,t[1]);let i=null;for(const e of n){const t=e[0];if((0,o.GsE)(t)){if(!t.style)break;if(i&&!(0,a.Z)(i,t.style)){i=null;break}i=t.style}}const r=(0,o.Ow4)(e,t[1]);i&&r&&(0,o.fLV)(e,{style:i},{at:r[1]})}}},C=(e,t)=>{if(e.selection&&i.e6.isCollapsed(e.selection)){const t=(0,o.Zg$)(e,{match:t=>(0,o.Lqh)(e,t)});(0,o.Ys)(e,{anchor:(0,o.plg)(e,t?t[1]:[]),focus:(0,o.ZJ1)(e,t?t[1]:[])})}else e.selection||(0,o.Ys)(e,{anchor:(0,o.plg)(e,[]),focus:(0,o.ZJ1)(e,[])});(0,o.GKY)(e,{style:{color:t}}),b(e,e.selection||void 0)},T=(e,t,n)=>{const r=n?c(e):e.selection,[l,a]=u(e,t,r);let d=!1;if(s.Cs.includes(t)){let n=!0;const r=(0,o.tVv)(e,{mode:"highest",match:e=>!i.ML.isEditor(e)&&i.W_.isElement(e)});for(const e of r){const[i]=e,r=(0,o.PfL)(i,0),l=i.type===t,a=r&&r.type===t;if(!l&&!a){n=!1;break}}d=n}l&&a||d||y(e,t,n)},I=(e,t)=>(0,o.w9d)(e,{key:t}),$=e=>{if((0,o._YE)(e)&&e.children.length<=1){const t=e.children[0],n=t.type===d.uX,i=t.children.length<=1&&""===t.children[0].text;return n&&i}return!1},k=e=>{if((0,o._YE)(e)&&e.children.length<=1){const t=e.children[0],n=t.type===d.Oo,i=t.children.length<=1&&""===t.children[0].text;return n&&i}return!1},E=e=>{if((0,o._YE)(e)&&e.children.length<=1){const t=e.children[0],n=t.type===d.ah;if(n){let e=!1;if(0===t.children.length)e=!0;else if(1===t.children.length){const n=t.children[0];e=0===n.children.length||1===n.children.length&&""===n.children[0].text}return n&&e}}return!1},R=e=>{(0,o.oUB)(e,{type:d.JB})},S=e=>{(0,o.r4l)(e,{mode:"highest"}),(0,o.s2K)(e,[{type:d.JB,children:[{text:""}]}],{mode:"highest"})},P=e=>{const{selection:t}=e;return!(!t||!i.e6.isCollapsed(t)||0!==t.anchor.offset)},_=e=>{(0,r.Ej)(e)||e.deleteBackward("character")},j=e=>{const t=f(e),n=p(e,d.ah);return!(!t||!n)&&(e=>{var t;const[n]=(0,o.tVv)(e,{match:e=>!i.ML.isEditor(e)&&i.W_.isElement(e)&&e.type===d.qR||e.type===d.y1});return 1!==n[0].children.length&&(!!e.selection&&""===(null===(t=(0,o.pj6)(e,e.selection))||void 0===t?void 0:t[0].text))})(e)},L=e=>e.map((e=>(0,o.GsE)(e)?{text:"REDACTED"}:e.children?{type:e.type,children:L(e.children)}:{type:e.type})),Z=e=>JSON.stringify(L(e)),D=(e,t)=>{const n=new Set,r=(0,o.tVv)(e,{mode:"all",match:i.xv.isText,at:e.selection?e.selection:{anchor:(0,o.plg)(e,[]),focus:(0,o.ZJ1)(e,[])}});(0,s.xb)(e.children)&&n.add(((e,t)=>{var n,i;const r=(0,o._6L)(e);return(null===(i=r)||void 0===i||null===(n=i.style)||void 0===n?void 0:n.color)?r.style.color:e.children[0].type===d.JB?t.paragraph:t.heading})(e,t));for(const[i]of r){var l;const o=i,r=o.text;if(!r||""===r.trim())continue;if(null===(l=o.style)||void 0===l?void 0:l.color){n.add(o.style.color);continue}o.type===d.uX||h(e)?n.add(t.heading):n.add(t.paragraph)}return Array.from(n)}},40375:function(e,t,n){"use strict";var i=n(85893),o=n(59016);t.Z=e=>{let{attributes:t,children:n,leaf:r}=e;var l;let a=n;const s=(0,o.Fg)(),d=(null===(l=r.style)||void 0===l?void 0:l.color)?{color:r.style.color}:{color:"var(--text-color)"};if(r.bold&&(a=(0,i.jsx)("strong",{style:d,children:a})),r.italic&&(a=(0,i.jsx)("em",{style:d,children:a})),r.underlined&&(a=(0,i.jsx)("u",{style:d,children:a})),r.strikethrough&&(a=(0,i.jsx)("del",{style:d,children:a})),r.code&&(a=(0,i.jsx)("code",{style:d,children:a})),r.highlighted)return(0,i.jsx)("span",{...t,style:{...d,background:s.colors.textSelection},children:a});if("string"==typeof a){const e=a.split("\n"),t=[];for(let n=0;n<e.length;n++)t.push(e[n]),n!==e.length-1&&(t.push("\ufeff"),t.push((0,i.jsx)("br",{},n)),t.push("\ufeff"));a=(0,i.jsx)(i.Fragment,{children:t})}return(0,i.jsx)("span",{...t,style:d,children:a})}},5966:function(e,t,n){"use strict";n.d(t,{H:function(){return o}});var i=n(85893);n(67294);const o=n(59016).ZP.span.withConfig({displayName:"Placeholder__BasePlaceholder",componentId:"sc-a62242bf-0"})`
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0.25;
`;t.Z=e=>{let{attributes:t,children:n}=e;return(0,i.jsx)(o,{...t,style:{...t.style,opacity:void 0},children:n})}},65220:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});var i=n(59016),o=n(85590);const r=i.iv`
  // use !important to override the setting imposed by slate editor.
  white-space: pre !important;
  word-wrap: normal !important;
  min-height: auto !important;

  // first span does not have space beforehand.
  > span:first-child {
    ::before {
      content: '';
    }
  }
  // add a space before each first level span for text wrapping.
  > span {
    ::before {
      content: ' ';
    }
  }
  a + span {
    ::before {
      content: '';
    }
  }

  br {
    display: none;
  }
`,l=i.iv`
  height: 100%;
  width: 100%;

  * ::selection {
    background-color: ${e=>e.$textSelectionColor?e.$textSelectionColor:e.theme.colors.textSelection};
  }

  ${e=>!e.$wrapText&&r}

  & a {
    ${o.Z}
  }

  ol li::marker {
    font-variant-numeric: unset;
  }
`;t.Z=l},20569:function(e,t,n){"use strict";n.d(t,{Z:function(){return Ze}});var i=n(85893),o=n(18156),r=n(50576),l=n(67294),a=n(77493),s=n(59016),d=n(4480),c=n(40419),u=n(45984),p=n(22774),h=n(40566),f=n(60910),g=n(26897),m=n(66589),v=n(64487),w=n(85695),y=n(95421),x=n(87473),b=n(74877),C=n(78137);var T=e=>{const{insertBreak:t}=e;return e.insertSoftBreak=()=>{(0,C.OQ)(e)?e.insertBreak():e.insertText("\n")},e.insertBreak=()=>{var n;const i=null===(n=e.selection)||void 0===n?void 0:n.anchor;if(!i)return;const o=i.path,r=(0,c.ZJ1)(e,o);if(a.E9.equals(r,i)){if(!(0,C.OQ)(e))return v.n_({category:"slate",message:"Hard break with reset (non-list)",level:"info",data:{editor_content:(0,C.fR)(e.children)}}),void(0,c.s2K)(e,[{type:"paragraph",children:[{text:""}]}],{mode:"highest"});if((0,C.N7)(e))return void(0,C.FE)(e)}v.n_({category:"slate",message:"Hard break",level:"info",data:{editor_content:(0,C.fR)(e.children)}}),t()},e};var I=e=>{const{isInline:t,isVoid:n}=e;return e.isInline=e=>"mention"===e.type||t(e),e.isVoid=e=>"mention"===e.type||n(e),e};const $=s.ZP.div.withConfig({displayName:"TextEditor.styles__ScrollableWrapper",componentId:"sc-7a91c078-0"})`
  height: 100%;
  width: 100%;
  cursor: ${e=>e.disabled?"default":"text"};
`;var k=e=>{const{deleteFragment:t}=e;return e.deleteFragment=n=>{const i=(0,c.RIR)(e,e.selection);i&&(0,c.Ys)(e,i),v.n_({category:"slate",message:"Delete fragment",level:"info",data:{editor_content:(0,C.fR)(e.children)}}),t(n)},e};var E=e=>{const{normalizeNode:t}=e;return e.normalizeNode=n=>{switch(t(n),void 0!==n[0].level&&n[0].type!==x.uX&&delete n[0].level,n[0].type){case x.JB:!function(e,t){const n=(0,c.Ow4)(e,t[1]);if(!n)return;const i=n[0];[x.uX,x.JB,x.Oo].includes(i.type)&&(0,c.hmm)(e,{at:t[1]})}(e,n);break;case x.Oo:!function(e,t){const n=(0,c.Ow4)(e,t[1]);if(!n)return;const i=n[0];[x.uX,x.JB,x.Oo].includes(i.type)&&(0,c.hmm)(e,{at:t[1]})}(e,n);break;case x.uX:!function(e,t){const n=(0,c.Ow4)(e,t[1]);if(!n)return;const i=n[0];[x.uX,x.JB,x.Oo].includes(i.type)&&(0,c.hmm)(e,{at:t[1]})}(e,n);break;case x.uJ:case x.pL:(0,C.hW)(e,n[1]);break;case x.y1:case x.qR:!function(e,t){const n=(0,c.Ow4)(e,t[1]);if(!n)return;n[0].type===x.JB&&(0,c.hmm)(e,{at:t[1]})}(e,n)}},e};var R=e=>{const{deleteBackward:t}=e;return e.deleteBackward=n=>{const i=(0,p.j8)(e,{});if(i){const{list:t}=i,l=(0,c.Ow4)(e,t[1]);if((0,p.md)(e,n)){if(!l)return;const t=l[0];if(!t)return;if(t.type===x.uX){var o,r;if(!(null===(o=e.selection)||void 0===o?void 0:o.focus.path))return;const n=(0,c.pj6)(e,null===(r=e.selection)||void 0===r?void 0:r.focus.path);if(n){const i=(0,c.Ow4)(e,n[1]);i&&i[0].type===x.JB?(0,c.fLV)(e,t,{at:i[1]}):(0,c.qEX)(e,t,{at:n[1]})}}return}}t(n)},e},S=n(76072);var P=e=>{const{isInline:t,isVoid:n}=e;return e.isInline=e=>"reference"===e.type||t(e),e.isVoid=e=>"reference"===e.type||n(e),e},_=n(9228),j=n(61867),L=n(40375),Z=n(65220),D=n(55902),M=n(51521),N=n(46051),A=n(31095);const z=[],B=s.ZP.div.withConfig({displayName:"SlateMentionPopupComponent__StyledMentionPositioner",componentId:"sc-9ee8950f-0"})`
  position: absolute;
  left: ${e=>e.left}px;
  top: ${e=>e.top}px;
  bottom: ${e=>"above"===e.location?"36px":""};
  visibility: ${e=>e.shouldShow?"visible":"hidden"};
  z-index: ${M.Ue};
  max-height: 350px;
  border-radius: ${N.nZ}px;
`;var F=e=>{const t=(0,x.uI)(),{members:n,queryString:o,width:r,backgroundColor:s,location:d,mentionSelectedIndex:u,triggerCurrentItemSelected:p,setSelectedIndex:h}=e,f=(0,c.KyJ)(t),g=n??z,m=(0,l.useRef)(null),[v,w]=(0,l.useState)(0),[y,b]=(0,l.useState)(0);(0,l.useEffect)((()=>{var e;if(!m.current)return;if(!m.current.parentElement)return;const{selection:n}=t;if(!n||!a.e6.isCollapsed(n))return;const i=null===(e=(0,c.lrJ)(t,n))||void 0===e?void 0:e.getBoundingClientRect(),o=m.current.parentElement.getBoundingClientRect();i&&o&&(w(i.top-o.top+i.height+6),b(i.left-o.left-36))}),[t,o]);const C=(0,l.useCallback)((e=>({...e,onClick:()=>{p(e.index)},onMouseEnter:()=>{h(e.index)}})),[h,p]);return(0,i.jsx)(B,{"data-testid":"mention_popup",location:d,left:y,top:v,shouldShow:f,ref:m,children:(0,i.jsx)(A.ZP,{width:r,items:g.map((e=>({text:e.name,image:(0,i.jsx)(D.Z,{user:e,size:20,delayMs:0,style:{marginRight:8}}),id:e.id}))),isIndexSelected:e=>e===u,getItemProps:C,onItemClick:void 0,backgroundColor:s})})},U=n(96215);var V=e=>{let{enabled:t,tomeId:n,slateEditor:i,didSelectMember:o}=e;var r,s,d,u;const[p,h]=(0,l.useState)(0),f=(0,l.useRef)(i),[g]=(0,l.useState)(t),[m,v]=(0,l.useState)(void 0),{data:w}=(0,U.bMj)({variables:{id:n},skip:!t}),y=(null===(u=w)||void 0===u||null===(d=u.tome)||void 0===d||null===(s=d.org)||void 0===s||null===(r=s.members)||void 0===r?void 0:r.map((e=>{let{user:t}=e;var n,i,o;return{id:(null===(n=t)||void 0===n?void 0:n.id)||"",name:(null===(i=t)||void 0===i?void 0:i.name)||"",profileImage:(null===(o=t)||void 0===o?void 0:o.profileImage)||""}})))??[];y.sort(((e,t)=>e.name.localeCompare(t.name)));const x=(0,l.useRef)([]),[b,C]=(0,l.useState)(void 0);""===m?x.current=[...y]:void 0!==m&&m!==b&&(x.current=y.filter((e=>e.name.toLowerCase().startsWith(m.toLowerCase()))),C(m),h(0));const T=!!n&&void 0!==m&&0!==x.current.length,I=(0,l.useCallback)((()=>{const e=p+1;e>=y.length?h(y.length-1):h(e)}),[p,y.length]),$=(0,l.useRef)(void 0),k=(0,l.useCallback)((()=>{const e=p-1;h(e<0?0:e)}),[p]),E=(0,l.useCallback)((()=>{if(!g)return;const e=f.current,{selection:t}=e;if(t&&a.e6.isCollapsed(t)){const[n]=a.e6.edges(t),i=(0,c.T2j)(e,n,{unit:"character"}),o=i&&(0,c.rxh)(e,i,n);if("@"===(o&&(0,c.eNq)(e,o)))$.current=o,v("");else{const t=(0,c.T2j)(e,n,{unit:"word"}),i=t&&(0,c.T2j)(e,t),o=i&&(0,c.rxh)(e,i,n),r=o&&(0,c.eNq)(e,o),l=r&&r.match(/^@(\w+)$/),a=(0,c.Mxs)(e,n),s=(0,c.rxh)(e,n,a),d=(0,c.eNq)(e,s).match(/^(\s|$)/);l&&d?m!==l[1]&&($.current=o,v(l[1])):(v(void 0),$.current=void 0)}}}),[m,g]),R=(0,l.useCallback)((e=>{var t;$.current&&(null===(t=o)||void 0===t||t(x.current[e],$.current))}),[o]),S=(0,l.useCallback)((e=>{if(g&&void 0!==m){if("ArrowDown"===e.key)return e.preventDefault(),void I();if("ArrowUp"===e.key)return e.preventDefault(),void k();if("Enter"===e.key||"Tab"===e.key){var t;if(!$.current||0===x.current.length)return;e.preventDefault(),null===(t=o)||void 0===t||t(x.current[p],$.current)}}}),[p,k,o,I,m,g,$]),P=[...x.current];return{slateMentionsEnabled:g,shouldShowPicker:T,mentionsQueryString:m,returnedMembers:P,onEditorKeyEvent:S,triggerCurrentItemSelected:R,onEditorChange:E,currentHighlightedMemberIndex:p,setCurrentHighlightedMemberIndex:h}},H=n(51854),O=n(62830),W=n.n(O);const Y=[{mode:"block",type:x.pL,match:["* ","- "],format:e=>(0,C.If)(e,x.qR)},{mode:"block",type:x.pL,match:["1. ","1) "],format:e=>(0,C.If)(e,x.y1)}],G=e=>{if(!e.selection)return!0;const t=(0,c.pj6)(e,e.selection);if(!t)return!0;const n=(0,c.Ow4)(e,t[1]);return!n||"lic"!==n[0].type&&n[0].type!==x.pL},J=[{mode:"block",type:typeof x.uX,match:"# ",preFormat:C.hL,format:e=>{(0,c.fLV)(e,{type:x.uX,level:1})},query:G},{mode:"block",type:typeof x.uX,match:"## ",preFormat:C.hL,format:e=>{(0,c.fLV)(e,{type:x.uX,level:2})},query:G},{mode:"block",type:typeof x.uX,match:"### ",preFormat:C.hL,format:e=>{(0,c.fLV)(e,{type:x.uX,level:3})},query:G}],X=[{mode:"mark",type:x.zN.BOLD,match:"**"},{mode:"mark",type:x.zN.BOLD,match:"__"},{mode:"mark",type:x.zN.ITALIC,match:"*"},{mode:"mark",type:x.zN.ITALIC,match:"_"},{mode:"mark",type:x.zN.CODE,match:"`"},{mode:"mark",type:[x.zN.BOLD,x.zN.ITALIC],match:"***"}];var K=e=>({options:{enableUndoOnDelete:!0,rules:[...e.includes(x.Ar.LISTS)?Y:[],...e.includes(x.Ar.TYPE_SCALES)?J:[],...e.includes(x.Ar.MARKS)?X:[],...u.hi,...u.Ie,...u.cD,...u.ez,...u.lk,...u.oF.filter((e=>e!==u.Qn[0]&&!u.dS.includes(e)&&!u.km.includes(e)&&!u.Sm.includes(e)))]}});var q={resetNode:{options:{disableEditorReset:!0,disableFirstBlockReset:!1,rules:[{hotkey:"Backspace",types:[x.uX],predicate:C.b2,onReset:C.Ak},{hotkey:"Backspace",types:[x.Oo],predicate:C.gj,onReset:C.Ak},{hotkey:"Backspace",types:[x.ah],predicate:C.oM,onReset:C.OL},{hotkey:"Backspace",types:[x.pL],predicate:C.N7,onReset:C.FE},{hotkey:"Backspace",types:[x.pL],predicate:C.xm,onReset:C.qJ}]}},autoformat:K,list:{overrideByKey:{ul:{type:x.qR,component:j.r9,options:{enableResetOnShiftTab:!0}},li:{type:x.pL,component:j.Sp},ol:{type:x.y1,component:j.gD,options:{enableResetOnShiftTab:!0}},lic:{type:"lic",component:j.vV}}},link:{options:{hotkey:"***null***",isUrl:e=>{const t=H.sE(e);return t.length>0&&(t[0].isLink&&0===t[0].start)},getUrlHref:e=>{const t=H.sE(e);if(1===t.length&&t[0].value===e)return t[0].href}},overrideByKey:{a:{type:x.uJ,component:j.EA}}},nodeId:{options:{reuseId:!0,idCreator:()=>W()()}}},Q=n(64310),ee=n(96391);var te=e=>{let{autoFocus:t}=e;const n=(0,ee.ui)();return(0,l.useEffect)((()=>{t&&setTimeout((()=>{if(!(0,c.KyJ)(n))try{(0,c.$Rk)(n,(0,c.ZJ1)(n,[]))}catch(e){Q.v.addError(e,{source:"SlateAutoFocus"})}}),0)}),[t,n]),(0,i.jsx)(i.Fragment,{})};const ne=e=>{const{insertFragment:t}=e;function n(e){for(let t=0;t<e.length;t++){const i=e[t];if("link"===i.type){const n=i.children;1===n.length&&(0,c.GsE)(n[0])?e[t]=n[0]:(delete i.url,i.type="paragraph")}else(0,c.GsE)(i)||n(i.children)}}return e.insertFragment=e=>{n(e),t(e)},e};var ie=()=>({key:"stripLinks",isElement:!1,withOverrides:e=>ne(e)});const oe=e=>{const{insertFragment:t}=e;function n(t){let i=[];for(const o of t)if((0,c.GsE)(o))i.push(o);else{const t=n(o.children);(0,p.TB)(e,o)||"lic"===o.type?i=i.concat(t):"list-item"===o.type?(o.type="paragraph",o.children=t,i.push(o)):(o.children=t,i.push(o))}return i}return e.insertFragment=e=>{const i=n(e);t(i)},e};var re=()=>({key:"stripLists",isElement:!1,withOverrides:e=>oe(e)});const le=e=>{const{insertFragment:t}=e;function n(e){for(const t of e)if((0,c.GsE)(t))for(const e of x.Ik)delete t[e];else n(t.children)}return e.insertFragment=e=>{n(e),t(e)},e};var ae=()=>({key:"stripMarks",isElement:!1,withOverrides:e=>le(e)});var se=()=>({key:"stripTypeScales",isElement:!1,withOverrides:e=>(e=>{const{insertFragment:t}=e;return e.insertFragment=e=>{for(const t of e)"heading"!==t.type&&"caption"!==t.type||(t.type="paragraph");t(e)},e})(e)});var de=function(e){const t=[];return e.includes(x.Ar.TYPE_SCALES)||t.push(se()),e.includes(x.Ar.LISTS)||t.push(re()),e.includes(x.Ar.MARKS)||t.push(ae()),e.includes(x.Ar.LINKS)||t.push(ie()),t},ce=n(80826),ue=n(5966),pe=n(61813);const he=e=>{if(e.hasChildNodes())for(let t=0;t<e.children.length;t++)he(e.children[t]);"#text"!==e.nodeName&&e.hasAttribute("style")&&e.removeAttribute("style")};var fe=he,ge=n(71815);const me=["del","ins","cite","code","data","blockquote","dfn","kbd","rb","rp","rt","rtc","ruby","canvas","noscript","script","embed","iframe","object","param","picture","source","audio","img","map","track","video","aside","figcaption","figure","footer","nav","form","fieldset","label","button","input","textarea","select"].map((e=>e.toUpperCase())),ve={A:e=>({type:"link",url:e.getAttribute("href")}),H1:e=>({type:"heading",level:"display"===e.className?0:1}),H2:()=>({type:"heading",level:2}),H3:()=>({type:"heading",level:3}),H4:()=>({type:"paragraph"}),H5:()=>({type:"paragraph"}),H6:()=>({type:"paragraph"}),LI:()=>({type:"list-item"}),OL:()=>({type:"numbered-list"}),P:e=>"caption"===e.className?{type:"caption"}:{type:"paragraph"},PRE:()=>({type:"code"}),UL:()=>({type:"bulleted-list"}),TD:()=>({type:"paragraph"})},we={CODE:()=>({code:!0}),DEL:()=>({strikethrough:!0}),EM:()=>({italic:!0}),I:()=>({italic:!0}),S:()=>({strikethrough:!0}),STRONG:()=>({bold:!0}),U:()=>({underlined:!0})},ye=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i;const o=["\x3c!--","\n","\r","\t"];if([Node.PROCESSING_INSTRUCTION_NODE,Node.CDATA_SECTION_NODE,Node.COMMENT_NODE,Node.NOTATION_NODE].includes(e.nodeType)||!t&&"TABLE"===e.nodeName||n&&me.includes(e.nodeName))return null;if(e.nodeType===Node.TEXT_NODE)return e.textContent?o.includes(e.textContent)||o.includes(e.textContent)?null:e.textContent:null;if(e.nodeType!==Node.ELEMENT_NODE)return null;if("BR"===e.nodeName)return"\n";const{nodeName:r}=e;let l=e;"PRE"===r&&e.childNodes[0]&&"CODE"===e.childNodes[0].nodeName&&(l=e.childNodes[0]);let a=Array.from(l.childNodes).map((e=>ye(e,t,n))).flat();if(0===a.length&&(a=[{text:""}]),"BODY"===r)return(0,ge.tZ)("fragment",{},a);const s=ve[null===(i=l.parentNode)||void 0===i?void 0:i.nodeName];if("DIV"===r&&!s&&a.every((e=>{var t;return"string"==typeof e||(null===(t=e)||void 0===t?void 0:t.text)})))return(0,ge.tZ)("element",{type:"paragraph"},a);const d=ve[r];if(d){const t=d(e);return(0,ge.tZ)("element",t,a)}const c=we[r];if(c){const e=c();return a.map((t=>{var n,i;return"string"==typeof t||(null===(n=t)||void 0===n?void 0:n.text)?(0,ge.tZ)("text",e,t):(null===(i=t)||void 0===i?void 0:i.children)?(0,ge.tZ)("text",e,t.children):(0,ge.tZ)("text",{},{text:""})}))}return a};var xe=ye;const be=e=>{var t;let n=null===(t=e)||void 0===t?void 0:t.commonAncestorContainer;const i=e.cloneContents(),o=i.ownerDocument.createElement("div");o.appendChild(i),o.setAttribute("hidden","true"),i.ownerDocument.body.appendChild(o);let r=o.innerHTML;for(;"LI"===n.nodeName||"UL"===n.nodeName||"OL"===n.nodeName;){var l;e.selectNode(n),r=`<${n.nodeName}>${r}</${n.nodeName}>`,n=null===(l=e)||void 0===l?void 0:l.commonAncestorContainer}return r};var Ce=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{insertData:i,isInline:o,setFragmentData:r}=e;return e.setFragmentData=t=>{if(r(t),e.selection){const n=(0,c.lrJ)(e,e.selection);if(!n)return;t.setData("text/html",be(n))}},e.isInline=e=>"link"===e.type||o(e),e.insertData=o=>{if(o.getData("application/x-slate-fragment"))return void i(o);const r=i=>{fe(i.body);const o=xe(i.body,t,n);if(o){const t=(0,c.mfU)(e,{descendants:o});return v.n_({category:"slate",message:"Adding HTML data",level:"info",data:{paste_content:(0,C.fR)(t),editor_content:(0,C.fR)(e.children)}}),e.insertFragment(t),!0}return!1},l=o.getData("text/html");if(l){const e=function(e){const t=e.replace(/\n|\t|\r/g,"");return(new DOMParser).parseFromString(t,"text/html")}(l);if(r(e))return}const a=o.getData("text/plain");if(a){const e=(0,H.sE)(a);if(0===e.length)return void i(o);if(1===e.length&&e[0].value===a)return void i(o);if(e.length>=1){const e=`<body><p>${(0,pe.Z)(a)}</p></body>`;if(r((new DOMParser).parseFromString(e,"text/html")))return}}i(o)},e};var Te=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{key:"withHtml",isElement:!1,withOverrides:n=>Ce(n,e,t)}},Ie=n(88767);var $e=e=>({key:"maxLength",isElement:!1,withOverrides:t=>(0,Ie.Z)(e)(t)}),ke=n(68079),Ee=n.n(ke);var Re=e=>{const{insertData:t,insertText:n,isInline:i}=e;return e.isInline=e=>"link"===e.type||i(e),e.insertText=t=>{v.n_({category:"slate",message:"Insert text (withLinks)",level:"info",data:{content:t,is_url:Ee()(t),editor_content:(0,C.fR)(e.children)}}),t&&Ee()(t)?(0,w.uT)(e,t):n(t)},e.insertData=n=>{const i=n.getData("text/plain");i&&Ee()(i)?(0,w.uT)(e,i):t(n)},e};var Se=()=>({key:"links",isElement:!1,withOverrides:e=>Re(e)});const Pe=l.lazy((()=>Promise.all([n.e(8183),n.e(9953)]).then(n.bind(n,39953)))),_e={contentEditableStyles:void 0},je=(0,s.ZP)($).withConfig({displayName:"SlateEditor__StyledEditableWrapper",componentId:"sc-5692b2d0-0"})`
  & > [contenteditable] {
    ${Z.Z}
    -webkit-user-select: auto;
    user-select: auto;
    pointer-events: inherit;
  }
  // cursor can't be set on an element with pointer-events: none, so it's being set on the parent
  cursor: text;
`,Le=(0,l.forwardRef)(((e,t)=>{let{editorId:n,tomeId:s,value:$,setValue:Z,onChange:D,onFocus:M,onBlur:N,onPaste:A,onUnmount:z,autoFocus:B=!1,placeholder:U,keyBindings:H,wrapText:O,textSelectionColor:W,contentEditableStyles:Y,features:G,maxCharacterLimit:J,initialPasteData:X,disableHistory:K=!0,formatBarZIndex:Q}=e;const[ee,ne]=(0,l.useState)(null),ie=(0,l.useRef)(),oe=(0,l.useCallback)((()=>(0,c.ZUk)([...de(G),{key:c.mnA,type:x.JB,isElement:!0,component:j.bJ},{key:x.Oo,type:x.Oo,isElement:!0,component:j.GB},(0,u.wQ)(q.autoformat(G)),(0,c.SPV)(),(0,p.V8)(q.list),(0,h.Tv)(q.link),(0,f.gH)(q.resetNode),(0,g.kd)(q.nodeId),Se(),$e(J),Te(G.includes(x.Ar.HTML_TABLES),G.includes(x.Ar.STRICT_MODE)),(0,m.n4)()])),[G,J]);ie.current||(ie.current=E(R(k(T(P(I((0,x.Y_)({plugins:oe(),disableCorePlugins:{history:K},id:n}))))))),ie.current.children=$);const re=ie.current,[le,ae]=(0,l.useState)($);(0,l.useEffect)((()=>{re.children.length&&!(0,r.Z)($,re.children)&&((0,ce.qT)(re,{nodes:$}),Z($),ae($))}),[re,Z,$]);const se=(0,l.useRef)(!1),pe=(0,c.KyJ)(re);(0,l.useEffect)((()=>{X&&pe&&!se.current&&(re.insertData(X),se.current=!0)}),[re,X,pe]);const he=(0,d.Zl)(S.UA),fe=G.includes(x.Ar.TYPE_SCALES),ge=G.includes(x.Ar.MENTIONS),me=G.includes(x.Ar.MARKS),[ve,we]=(0,l.useState)(!1),ye=V({tomeId:s??"",enabled:ge,slateEditor:re,didSelectMember:(e,t)=>{(0,c.Ys)(re,t);const n=a.y$.parent(t.anchor.path),i=1===n.length&&0===n[0],o={userId:e.id,value:`@${e.name}`,type:"mention",children:[{text:""}]},r={text:"​"},l={text:" "};i?(0,c.s2K)(re,[r,o,l]):(0,c.s2K)(re,[o,l])}}),xe=(0,l.useCallback)((e=>(0,i.jsx)(j.ZP,{...e,wrapText:O})),[O]),be=(0,l.useCallback)((e=>(0,i.jsx)(L.Z,{...e})),[]),Ce=(0,l.useCallback)((e=>{let[,t]=e;if(!ve)return[];const n=(0,c.rxh)(re,t);if(!n||!ee)return[];const i=a.e6.intersection(ee,n);if(!i)return[];return[{highlighted:!0,...i}]}),[re,ee,ve]);(0,l.useImperativeHandle)(t,(()=>({appendText:e=>{(0,c.OmN)(re,e,{at:{anchor:(0,c.ZJ1)(re,[]),focus:(0,c.ZJ1)(re,[])}})},replaceText:e=>{(0,c.OmN)(re,e,{at:{anchor:(0,c.plg)(re,[]),focus:(0,c.ZJ1)(re,[])}})},isFocused:()=>(0,c.KyJ)(re),focusEditor:()=>{re&&!(0,c.KyJ)(re)&&((0,c.$Rk)(re),v.n_({category:"slate",message:"Editor focus from handle",level:"info",data:{editor_content:(0,C.fR)(re.children)}}),(0,c.Ys)(re,{anchor:(0,c.ZJ1)(re,[]),focus:(0,c.ZJ1)(re,[])}))},blurEditor:()=>{re&&(0,c.KyJ)(re)&&((0,c.tCj)(re),v.n_({category:"slate",message:"Editor blur from handle",level:"info",data:{editor_content:(0,C.fR)(re.children)}}))},moveCursorToEnd:()=>{re&&(0,c.Ys)(re,{anchor:(0,c.ZJ1)(re,[]),focus:(0,c.ZJ1)(re,[])})},getEditor:()=>re,deselect:()=>{(0,c._Hq)(re)}})));const Ie=(0,l.useMemo)((()=>({"shift+enter":()=>(re.insertSoftBreak(),!0),"mod+b":()=>!!me&&((0,C.h4)(re,"bold"),!0),"mod+i":()=>!!me&&((0,C.h4)(re,"italic"),!0),"mod+u":()=>!!me&&((0,C.h4)(re,"underlined"),!0),"mod+e":()=>!!me&&((0,C.h4)(re,"code"),!0),"mod+l":()=>(we(!0),!0),"shift+mod+s":()=>!!me&&((0,C.h4)(re,"strikethrough"),!0),"opt+mod+0":()=>((0,C.ku)(re,"paragraph")||(0,C.th)(re,"paragraph"),!0),"opt+mod+1":()=>!!fe&&((0,C.ku)(re,"title")||(0,C.th)(re,"title"),!0),"opt+mod+2":()=>!!fe&&((0,C.ku)(re,"heading")||(0,C.th)(re,"heading"),!0),"opt+mod+3":()=>!!fe&&((0,C.ku)(re,"subheading")||(0,C.th)(re,"subheading"),!0),"shift+mod+7":()=>((0,C.ku)(re,"numbered-list")?(0,C.th)(re,"paragraph"):(0,C.th)(re,"numbered-list"),!0),"shift+mod+8":()=>((0,C.ku)(re,"bulleted-list")?(0,C.th)(re,"paragraph"):(0,C.th)(re,"bulleted-list"),!0)})),[re,me,fe]),ke=(0,l.useCallback)((e=>{var t,n;null===(t=(n=ye).onEditorKeyEvent)||void 0===t||t.call(n,e);const i={...Ie,...H};for(const t in i)(0,o.ZP)(t,e)&&i[t](re,e)&&e.preventDefault()}),[ye,Ie,H,re]),Ee=(0,l.useCallback)((e=>!!pe&&(e.stopPropagation(),!1)),[pe]),Re=(0,l.useCallback)((e=>{2===e.button&&pe&&(e.stopPropagation(),e.preventDefault()),e.detail>=3&&(0,r.Z)($,b.yS)&&(e.preventDefault(),e.stopPropagation())}),[pe,$]),_e=(0,l.useCallback)((e=>{var t,n;const i=re.selection;if(i){const e=(0,c.mRq)(re);0===e.length&&0===i.anchor.offset||(he({chars:e.length,words:e.trim().split(" ").length}),ne({anchor:i.anchor,focus:i.focus}))}else ne(null);null===(t=(n=ye).onEditorChange)||void 0===t||t.call(n),Z(e),D&&D()}),[re,ye,D,he,Z]),Le=(0,l.useCallback)((()=>{(0,_.ii)(!0),"function"==typeof M&&M()}),[M]),Ze=(0,l.useCallback)((e=>{var t;(null===(t=e.relatedTarget)||void 0===t?void 0:t.closest("[data-disable-editor-blur]"))&&(e.preventDefault(),e.stopPropagation()),(0,_.ii)(!1),"function"==typeof N&&N()}),[N]),De=(0,l.useRef)(N);De.current=N;const Me=(0,l.useRef)(z);Me.current=z,(0,l.useEffect)((()=>()=>{var e,t,n,i;null===(e=(t=De).current)||void 0===e||e.call(t),(0,_.ii)(!1),null===(n=(i=Me).current)||void 0===n||n.call(i,ie.current)}),[]);const[Ne,Ae]=(0,l.useState)(),ze=(0,l.useCallback)((()=>{ee&&((0,c.$Rk)(re),(0,c.Ys)(re,ee))}),[re,ee]),Be=(0,l.useCallback)((e=>{ze(),ee&&((0,w.T8)(re,e?(0,y.N1)(e):void 0),Z(re.children))}),[re,ze,ee,Z]);(0,l.useEffect)((()=>{if(ve){if(!re.selection)return;const e=Array.from((0,c.tVv)(re,{match:e=>"link"===e.type})),t=e[0],n=(0,c.mRq)(re);1===e.length&&t&&"link"===t[0].type&&(0,c.eNq)(re,t[1]).includes(n)?((0,c.Ys)(re,t[1]),Ae(t[0].url)):Ae(void 0)}}),[re,ve]);const Fe=(0,l.useMemo)((()=>({className:"slate-editor",renderLeaf:be,renderElement:xe,placeholder:U,renderPlaceholder:ue.Z,decorate:Ce,style:Y,onFocus:Le,onBlur:Ze,onContextMenu:Ee,onKeyDown:ke,onMouseDown:Re,onPaste:e=>{var t;return null===(t=A)||void 0===t?void 0:t(e)}})),[be,xe,U,Ce,Y,Le,Ze,Ee,ke,Re,A]),Ue=(0,l.useCallback)((e=>(0,i.jsx)(je,{"data-testid":"scrollable_wrapper",disabled:!1,"data-placeholder":U,$wrapText:O,$textSelectionColor:W,children:e})),[U,O,W]);return(0,i.jsxs)(c.hv7,{id:n,editor:re,initialValue:le||b.yS,onChange:_e,editableProps:Fe,renderEditable:Ue,children:[(0,i.jsx)(te,{autoFocus:B}),G.length>0&&(0,i.jsx)(l.Suspense,{fallback:null,children:(0,i.jsx)(Pe,{linkContents:Ne,focusAndActivateLastSelection:ze,features:G,showLinkInput:ve,setShowLinkInput:we,linkifyLastSelection:Be,zIndex:Q})}),ye.slateMentionsEnabled&&ye.shouldShowPicker&&(0,i.jsx)(F,{location:"below",width:180,members:ye.returnedMembers,queryString:ye.mentionsQueryString,triggerCurrentItemSelected:ye.triggerCurrentItemSelected,mentionSelectedIndex:ye.currentHighlightedMemberIndex,setSelectedIndex:ye.setCurrentHighlightedMemberIndex})]})}));Le.defaultProps=_e;var Ze=(0,l.forwardRef)(((e,t)=>{let{autoFocus:n,features:o,maxCharacterLimit:r,onUnmount:l,formatBarZIndex:a,...s}=e;const d=`editor-with-features${o.map((e=>`-${e}`))}-charlimit-${r}`;return(0,i.jsx)(Le,{autoFocus:n,features:o,maxCharacterLimit:r,ref:t,onUnmount:e=>{var n;const i=!!e&&(0,c.KyJ)(e);null===(n=l)||void 0===n||n(e),setTimeout((()=>{var e,n;t&&"function"!=typeof t&&(i?null===(e=t.current)||void 0===e||e.focusEditor():null===(n=t.current)||void 0===n||n.blurEditor())}),1)},formatBarZIndex:a,...s},d)}))},18814:function(e,t,n){"use strict";n.d(t,{N:function(){return s},f:function(){return a}});var i=n(85893),o=n(67294),r=n(4480),l=n(91421);const a=o.createContext({}),s=e=>{let{children:t}=e;const n=(0,o.useRef)(),s=(0,r.Zl)(l.Z),d=(0,o.useCallback)((()=>{s((e=>!e))}),[s]),c=(0,o.useCallback)((e=>{e!==n.current&&(n.current=e,d())}),[d]),u=(0,o.useCallback)((()=>{d()}),[d]),p=(0,o.useMemo)((()=>({activeEditorRef:n,setActiveEditor:c,notifyOfActiveEditorChange:u})),[u,c]);return(0,i.jsx)(a.Provider,{value:p,children:t})}},91421:function(e,t,n){"use strict";const i=(0,n(4480).cn)({key:"slateEditorUpdateState",default:!1});t.Z=i},22173:function(e,t,n){"use strict";n.d(t,{q:function(){return a}});var i=n(85893),o=(n(67294),n(69336)),r=n(59016);const l=(e,t,n,i)=>{const o=(i-90)*Math.PI/180;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}},a=(e,t,n,i,o)=>{const r=l(e,t,n,o),a=l(e,t,n,i),s=o-i<=180?"0":"1";return["M",r.x,r.y,"A",n,n,0,s,0,a.x,a.y].join(" ")};t.Z=e=>{let{size:t,stroke:n,background:l,foreground:s,rotationDuration:d,ariaLabel:c}=e;const u="dark"===(0,r.Fg)().UITheme?n:n+.5,p=t/2,h=t/2,f=t/2-u/2,g=a(p,h,f,0,270);return(0,i.jsxs)(o.E.svg,{"aria-label":c,width:t,height:t,viewBox:`0 0 ${t} ${t}`,fill:"none",children:[(0,i.jsx)(o.E.circle,{cx:p,cy:h,r:f,strokeWidth:u,stroke:l}),(0,i.jsx)(o.E.path,{d:g,strokeWidth:u,strokeLinecap:"round",animate:{rotate:360,stroke:s},transition:{rotate:{ease:"linear",repeat:1/0,duration:d}},style:{originX:`${p}px`,originY:`${h}px`}})]})}},65745:function(e,t,n){"use strict";n.d(t,{Y1:function(){return d},y$:function(){return s}});var i=n(85893),o=n(59016),r=n(4480),l=n(96215),a=n(66810);const s=o.ZP.div.withConfig({displayName:"TileSelectionWrapper__Highlight",componentId:"sc-cb21690b-0"})`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: ${e=>e.$radius}px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.2s ease;
  background-color: ${e=>{let{theme:t,tileType:n}=e;return n===l.YUT.Table?t.colors.tileHoverTable:t.colors.tileHover}};
`,d=o.ZP.div.withConfig({displayName:"TileSelectionWrapper__Selection",componentId:"sc-cb21690b-1"})`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: ${e=>e.$radius}px;
  pointer-events: none;
  opacity: ${e=>e.$selected?1:0};
  box-shadow: ${e=>`0px 0px 0px 2px ${e.$isSecondary?e.theme.colors.tileSecondarySelection:e.theme.colors.transparent}`},
    ${e=>`0px 0px 0px 2px ${e.$isSecondary?e.theme.colors.page:e.theme.colors.tilePrimarySelection}`};
`,c=o.ZP.div.withConfig({displayName:"TileSelectionWrapper__TileWrapper",componentId:"sc-cb21690b-2"})`
  height: 100%;
  width: 100%;
  position: relative;
  display: flex;
  flex: 1;

  top: 0;
  overflow: visible;
  border-radius: ${e=>e.$radius}px;

  &:hover ${s} {
    opacity: 1;
  }
`;t.ZP=e=>{let{children:t,id:n,radius:o,preview:l,canEdit:u,tileType:p}=e;const h=(0,r.sJ)((0,a.j6)({tileId:n})),f=(0,r.sJ)((0,a.i9)({tileId:n,tileType:p})),g=l||!u;return(0,i.jsxs)(c,{$radius:o,children:[!g&&(0,i.jsx)(s,{$radius:o,tileType:p,style:h?{opacity:0}:{}}),!g&&(0,i.jsx)(d,{"data-testid":"tile_selection",$selected:h,$isSecondary:f,$radius:o}),t]})}},79520:function(e,t,n){"use strict";n.d(t,{ME:function(){return a},nI:function(){return s},oJ:function(){return l},oy:function(){return r}});var i=n(4480),o=n(96215);const r=(0,i.cn)({key:"editingTileState",default:null}),l=(0,i.CG)({key:"isEditModeSelector",get:e=>t=>{let{get:n}=t;return n(r)===e}}),a=(0,i.cn)({key:"selectedLayersState",default:new Set}),s=(0,i.CG)({key:"isDrawingEditingSelector",get:e=>{let{tileType:t,tileId:n}=e;return e=>{let{get:i}=e;return t===o.YUT.Drawing&&i(r)===n}}})},40663:function(e,t,n){"use strict";n.d(t,{A:function(){return r},B:function(){return i}});var i,o=n(4480);!function(e){e.NONE="NONE",e.CLICK_IMAGE_TILE_UPLOAD_BUTTON="CLICK_IMAGE_TILE_UPLOAD_BUTTON",e.CLICK_IMAGE_TILE_CREATE_BUTTON="CLICK_IMAGE_TILE_CREATE_BUTTON",e.CLICK_IMAGE_TILE_SEARCH_BUTTON="CLICK_IMAGE_TILE_SEARCH_BUTTON"}(i||(i={}));const r=(0,o.xu)({key:"triggerAfterAddTileActionState",default:{action:i.NONE,triggered:!1}})},94232:function(e,t,n){"use strict";n.d(t,{aY:function(){return s},vw:function(){return a},z1:function(){return l}});var i=n(62830),o=n.n(i),r=n(4480);const l=(0,r.cn)({key:"trackMediaUploadInProgressState",default:new Set}),a=(0,r.xu)({key:"mediaUploadLocalStateState",default:{uploadId:void 0,inProgress:!1,progress:0,localMediaUrl:void 0,localFileData:void 0},effects:e=>[t=>{let{getLoadable:n,onSet:i}=t;const o=n(l).contents;return i((t=>{t.inProgress?o.add(e):o.delete(e)})),()=>{o.delete(e)}}]});function s(e){return{uploadId:o()(),inProgress:!1,progress:0,localMediaUrl:URL.createObjectURL(e),localFileData:e}}},9284:function(e,t,n){"use strict";n.d(t,{p:function(){return d}});var i=n(85893),o=n(67294),r=n(4480),l=n(59016),a=n(48329),s=n(51521);const d=l.ZP.div.withConfig({displayName:"ResizeHandle__ResizeHandleBlock",componentId:"sc-99f79c8d-0"})`
  background: ${e=>e.theme.colors.uiAccent};
  width: 4px;
  margin-left: -2px;
  height: calc(100% + 4px);
  z-index: ${s.pQ};
`;t.Z=e=>{let{column:t,tileId:n}=e;const l=(0,o.useMemo)((()=>({colId:t.id,tileId:n})),[t.id,n]),[s,c]=(0,r.FV)((0,a.qh)(l));(0,o.useEffect)((()=>()=>c(!1)),[c]);const u=(0,o.useCallback)((()=>c(!0)),[c]),p=(0,o.useCallback)((()=>c(!1)),[c]),h=t.getResizerProps();return(0,i.jsx)(d,{"data-disable-drag":!0,...h,onMouseEnter:u,onMouseLeave:p,style:{...h.style,opacity:t.isResizing||s?1:0}})}},47486:function(e,t,n){"use strict";n.d(t,{N0:function(){return s},QG:function(){return l},RH:function(){return c},Y8:function(){return a},bC:function(){return u},t_:function(){return d}});var i=n(59016),o=n(46820),r=n(9284);const l=20,a=i.iv`
  position: relative;
  // For the last cell in a row, add some extra margin to the ResizeHandle to
  // account for the scrollbar
  & div:last-of-type {
    ${r.p} {
      margin-right: 10px;
    }
  }
`,s=i.ZP.div.withConfig({displayName:"Row.styles__StyledRow",componentId:"sc-bde78bdc-0"})`
  ${a}
`,d=i.ZP.div.withConfig({displayName:"Row.styles__RowEditorTools",componentId:"sc-bde78bdc-1"})`
  position: sticky;
  left: 0;
  min-width: ${l}px;
  z-index: 1;
  // Update z-index here when we hover so that this overlaps sticky header area
  &:hover {
    z-index: 4;
  }
`,c=i.ZP.div.withConfig({displayName:"Row.styles__RowDragHandle",componentId:"sc-bde78bdc-2"})`
  height: 20px;
  width: 3px;
  border-radius: 3px;
  background-color: ${e=>e.theme.colors.contrast16};
  opacity: 0;

  ${""}
  ${o.J}:hover & {
    opacity: 1;
  }
`,u=i.ZP.div.withConfig({displayName:"Row.styles__RowDragHover",componentId:"sc-bde78bdc-3"})`
  outline: 0;
  position: absolute;
  display: ${e=>e.$readonly?"none":"flex"};
  top: 0;
  bottom: 0;
  width: 19px;
  cursor: grab;
  align-items: center;
  justify-content: center;

  &:hover ${c} {
    background-color: ${e=>e.theme.colors.contrast};
    opacity: 1;
  }
`},46820:function(e,t,n){"use strict";n.d(t,{J:function(){return a}});var i=n(85893),o=n(67294),r=n(59016),l=n(84823);const a=r.ZP.div.withConfig({displayName:"RowCropper__StyledRowCropper",componentId:"sc-36af1ce9-0"})`
  margin-bottom: ${e=>e.preview?"1px":"4px"};
  ${e=>!e.isThisRowBeingDragged&&"\n    display: flex;\n  "}

  border-radius: ${l.vT}px;

  // If the row is being dragged, add a drop shadow.
  ${e=>e.isThisRowBeingDragged&&`filter: ${e.theme.colors.tableRowDragDropShadow};`}
`,s=e=>{const{children:t,innerRef:n,isThisRowBeingDragged:r,preview:l,tableScrollLeft:s,...d}=e,c=(0,o.useRef)(null),u=(0,o.useCallback)((e=>{c.current=e,"function"==typeof n&&n(e)}),[n]);return(0,o.useEffect)((()=>{var e;r&&s&&(null===(e=c)||void 0===e?void 0:e.current)&&(c.current.scrollLeft=s)}),[r,s]),(0,i.jsx)(a,{isThisRowBeingDragged:r,preview:l,ref:u,...d,children:t})};t.Z=(0,o.memo)(s)},84823:function(e,t,n){"use strict";n.d(t,{YF:function(){return i},oZ:function(){return l},tn:function(){return r},vT:function(){return o}});const i=2,o=3,r=10,l=550},94754:function(e,t,n){"use strict";n.d(t,{El:function(){return f},Gb:function(){return p},Gq:function(){return g},ZP:function(){return v},hT:function(){return h}});var i=n(69282),o=n.n(i),r=n(62830),l=n.n(r),a=n(67294),s=n(4480),d=n(39554),c=n(48329),u=n(69219);function p(e,t,n){return i=>{const{data:r}=i,l=r[e],a=i.columns[t].accessor,s=l[a];o()(void 0!==s,`Bad colId. row: ${l}, colId: ${a}`);const d="function"==typeof n?(0,u.qC)(n((0,u.vB)(s))):(0,u.qC)(n),c=[...r];return c.splice(e,1,{...l,[a]:d}),{...i,data:c}}}function h(e,t,n){return i=>{const o=i.data.findIndex((t=>t.id===e));if(o<0)return{...i};const r=i.columns.findIndex((e=>e.accessor===t));return r<0?{...i}:p(o,r,n)(i)}}function f(e,t,n){return i=>{const o={label:`Col ${i.columns.length+1}`,accessor:t||l()(),columnType:e};let r;void 0!==n?(r=[...i.columns],r.splice(n,0,o)):r=[...i.columns,o];const a=i.data.map((t=>({...t,[o.accessor]:(0,d.Zr)(e)})));return{...i,columns:r,data:a}}}function g(e,t){return n=>{const i=Object.fromEntries(n.columns.map((e=>[e.accessor,(0,d.Zr)(e.columnType)]))),o={id:e||l()(),...i};let r;return void 0!==t?(r=[...n.data],r.splice(t,0,o)):r=[...n.data,o],{...n,data:r}}}function m(e,t){e((e=>{let n=e;return t.forEach((e=>{n=e(n)})),n}))}function v(e,t){const n=(0,s._8)((e=>{let{snapshot:t}=e;return(e,n)=>{const i=t.getLoadable(c.sO).getValue(),o=[];i.forEach((e=>{o.push(h(e.rowId,e.colId,n))})),m(e,o)}}),[]);return(0,a.useMemo)((()=>({updateCell:(t,n,i)=>function(e,t,n,i){e(h(t,n,i))}(e,t,n,i),applyToSelectedCells:t=>n(e,t),insertColumn:(t,n)=>function(e,t,n){const i=l()();return e(f(t,i,n)),i}(e,t,n),insertRow:t=>function(e,t){const n=l()();return e(g(n,t)),n}(e,t),deleteRow:n=>function(e,t,n){t(),e((e=>{const t=e.data.filter((e=>e.id!==n));return{...e,data:t}}))}(e,t,n),deleteRowsByIdx:n=>function(e,t,n){t(),e((e=>{const t=e.data.filter(((e,t)=>!n.includes(t)));return{...e,data:t}}))}(e,t,n),deleteColumn:n=>function(e,t,n){t(),e((e=>{const t=e.columns.filter((e=>e.accessor!==n)),i=e.data.map((e=>{const t={...e};return delete t[n],t}));return{...e,columns:t,data:i}}))}(e,t,n),deleteColumnsByIdx:n=>function(e,t,n){t(),e((e=>{const t=e.columns.filter(((e,t)=>!n.includes(t))),i=e.columns.filter(((e,t)=>n.includes(t))).map((e=>e.accessor)),o=e.data.map((e=>{const t={...e};return i.forEach((e=>{delete t[e]})),t}));return{...e,columns:t,data:o}}))}(e,t,n),renameColumn:(t,n)=>function(e,t,n){e((e=>{const i=e.columns.map((e=>e.accessor===t?{...e,label:n}:e));return{...e,columns:i}}))}(e,t,n),moveColumn:(t,n)=>function(e,t,n){e((e=>{const i=[...e.columns],o=i.findIndex((e=>e.accessor===t));return i.splice(n,0,i.splice(o,1)[0]),{...e,columns:i}}))}(e,t,n),moveRow:(t,n)=>function(e,t,n){e((e=>{const i=[...e.data];return i.splice(n,0,i.splice(t,1)[0]),{...e,data:i}}))}(e,t,n),applyMultipleUpdates:t=>m(e,t)})),[n,t,e])}},83575:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(69282),o=n.n(i),r=n(67294),l=n(4480),a=n(66810),s=n(48329),d=n(80530),c=n(85252);function u(e,t){const n=(0,l.Zl)(s.uL),i=(0,l.Zl)(s.wK),u=(0,l.Zl)(s.DS),p=(0,l.sJ)(a.T0),h=(0,r.useCallback)((()=>e.current.data.map((e=>e.id))),[e]),f=(0,r.useCallback)((()=>e.current.columns.map((e=>e.accessor))),[e]);(0,r.useEffect)((()=>{p&&(n(null),i([]))}),[p,n,i]);const g=(0,r.useCallback)((e=>{n(e),i(e?[e]:[])}),[n,i]),m=(0,r.useCallback)(((e,n,i)=>{const{rowId:o,colId:r}=(0,d.V)(h(),f(),e,n,i);g({rowId:o,colId:r,tileId:t})}),[h,f,g,t]),v=(0,r.useCallback)(((e,n)=>{g({rowId:e,colId:n,tileId:t})}),[g,t]),w=(0,r.useCallback)(((e,n)=>{const i=[...e].sort(c.uR),o=[...n].sort(c.uR),r=[];for(let e=o[0];e<=o[1];e++)for(let n=i[0];n<=i[1];n++)r.push({rowId:h()[n],colId:f()[e],tileId:t});return r}),[h,f,t]),y=(0,l._8)((e=>{let{snapshot:n}=e;return(e,r)=>{const l=n.getLoadable(s.uL).getValue();if(!l)return void g({rowId:e,colId:r,tileId:t});const a=h().indexOf(l.rowId),d=f().indexOf(l.colId),c=h().indexOf(e),u=f().indexOf(r);[d,a,c,u].forEach((e=>{o()(e>=0,`Could not find value in row/col indexes. Value is ${e}`)})),i(w([a,c],[d,u]))}}),[h,f,i,w,g,t]),x=(0,r.useCallback)((()=>{g(null)}),[g]),b=(0,l._8)((e=>{let{snapshot:t,set:n}=e;return(e,i)=>{var o;const r=t.getLoadable(s.sO).getValue();if(r.length<=1)return;const l=r.filter((t=>!(t.rowId===e&&t.colId===i)));n(s.wK,l);const a=t.getLoadable(s.uL).getValue();(null===(o=a)||void 0===o?void 0:o.rowId)===e&&a.colId===i&&n(s.uL,l[0])}}),[]),C=(0,r.useCallback)((e=>{g({rowId:e,colId:f()[0],tileId:t})}),[g,f,t]),T=(0,r.useCallback)((e=>{C(e);const n=f().map((n=>({rowId:e,colId:n,tileId:t})));i(n)}),[f,C,i,t]),I=(0,l._8)((e=>{let{snapshot:t}=e;return async e=>{const o=t.getLoadable(s.uL).getValue();if(!o)return void T(e);const r=h().indexOf(o.rowId),l=f().length-1,a=h().indexOf(e);i(w([r,a],[0,l])),n(o)}}),[f,h,T,w,n,i]),$=(0,r.useCallback)((e=>{const n=f().map((n=>({rowId:e,colId:n,tileId:t})));u(n)}),[f,u,t]),k=(0,r.useCallback)((e=>{g({rowId:h()[0],colId:e,tileId:t})}),[g,h,t]),E=(0,r.useCallback)((e=>{k(e);const n=h().map((n=>({rowId:n,colId:e,tileId:t})));i(n)}),[h,k,i,t]),R=(0,l._8)((e=>{let{snapshot:t}=e;return async e=>{const n=t.getLoadable(s.uL).getValue();if(!n)return void E(e);const o=f().indexOf(n.colId),r=h().length-1,l=f().indexOf(e);i(w([0,r],[o,l]))}}),[f,h,E,w,i]),S=(0,r.useCallback)((e=>{const n=h().map((n=>({rowId:n,colId:e,tileId:t})));u(n)}),[h,u,t]),P=(0,r.useCallback)((()=>{g({rowId:h()[0],colId:f()[0],tileId:t})}),[g,h,f,t]),_=(0,r.useCallback)((e=>e===h()[h().length-1]),[h]),j=(0,r.useCallback)(((e,t)=>e===h()[0]&&t===f()[0]),[h,f]);return(0,r.useMemo)((()=>({activateNeighborCell:m,activateCell:v,activateFirstCellInRow:C,activateFirstCellInColumn:k,selectRow:T,appendSelectRow:$,activateFirstCellInTable:P,selectColumn:E,appendSelectColumn:S,isLastRow:_,isFirstCellInTable:j,deselectAllCells:x,removeCellFromSelection:b,selectFromToActive:y,selectRowsFromRowToActive:I,selectColsFromColToActive:R,rowIds:h,colIds:f})),[m,v,C,k,T,$,P,E,S,_,j,x,b,y,I,R,h,f])}},18579:function(e,t,n){"use strict";n.d(t,{QT:function(){return d},sC:function(){return c}});var i=n(59016),o=n(47201),r=n(96215),l=n(85590),a=n(5966),s=n(86090);const d=s.ZP.t("tiles.text.placeholder"),c=s.ZP.t("tiles.text.shortPlaceholder"),u=i.ZP.div.withConfig({displayName:"TextStyles",componentId:"sc-6c9592b7-0"})`
  // Preserve whitespace
  white-space: break-spaces;
  font-family: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.name}};
  font-weight: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.weight}};
  font-style: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.paragraph.style}};
  font-size: ${e=>{let{bodyFontSize:t}=e;return t}}px;

  /* This lets the parent container width take up a fixed space
  allowing the overflow-wrap to properly function. */
  & > div {
    width: 100%;
  }

  [data-slate-placeholder] + span {
    width: 1px;
  }

  a > [data-slate-node] > [data-slate-leaf] > [data-slate-string] {
    display: inline !important;
  }

  [data-slate-string] {
    white-space: pre-wrap;

    // chrome-only
    overflow-wrap: anywhere;

    /* Safari alterntive */
    word-break: break-word;
  }

  // Page level reference element counter
  ${e=>!e.$preview&&`counter-reset: reference-element-value ${e.$counterIncrementInitialValue??0};`}

  // (WEB-3548) These styles fix the caret position for the heading placeholder.
  // This also gives us proper caret positioning at smaller tile widths for all alignments
  ${e=>e.$placeholder&&i.iv`
      [data-slate-placeholder] {
        ${e.$horizontalAlignment===r.KxP.Leading&&"order: 1;"}
        position: static !important;
        width: fit-content;
        -webkit-user-select: none;
      }

      [data-slate-placeholder] + span {
        ${e.$horizontalAlignment!==r.KxP.Trailing&&"position: absolute;"}
      }

      [data-slate-leaf] {
        display: inline-flex;
      }
    `};

  .slate-editor {
    .slate-placeholder {
      h1,
      h2,
      h3,
      p {
        color: ${e=>{let{theme:t}=e;return t.colors.editorPlaceholder}};
        margin-top: 0;
        margin-bottom: 0;
      }
    }
  }

  [data-placeholder] .slate-editor {
    h1,
    h2,
    h3,
    p {
      height: max-content;

      [data-slate-node],
      [data-slate-leaf] {
        max-width: 100%;
        min-height: max-content;
        word-wrap: break-word;
        white-space: normal;
      }
    }
  }

  .slate-editor,
  .tomeEditor {
    outline: none;
    color: ${e=>e.$placeholder?e.theme.colors.editorPlaceholder:e.$bodyTextColor??e.theme.colors.editorParagraph};
    padding: 0.77em;
    padding-top: 0.54em;
    padding-bottom: 0.54em;

    ${e=>e.$horizontalAlignment===r.KxP.Trailing&&`\n      padding-left: ${2*e.innerTilePadding+5}px;\n    `};

    user-select: ${e=>e.disabled||e.$preview?"none":"text"};
    width: 100%;
    font-size: inherit;
    line-height: inherit;
    overflow-wrap: break-word;

    & > [data-slate-node] {
      white-space: pre;
    }

    caret-color: ${e=>e.theme.colors.contentAccent};

    // fix slight different rendering of colon and dash.
    font-variant-ligatures: none;
    text-rendering: geometricPrecision;
    ${o.qc}

    * ::selection {
      background-color: ${e=>e.theme.colors.textSelection};
      -webkit-appearance: none;
    }

    .selection {
      background-color: ${e=>e.theme.colors.textSelection};
    }

    u .selection {
      text-decoration: underline;
    }

    & > *:last-child {
      // have to use important to get around css selector specficity order
      margin-bottom: 0 !important;
    }

    h1,
    h2,
    h3 {
      font-family: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.heading.name}};
      font-weight: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.heading.weight}};
      font-style: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.heading.style}};
      opacity: ${e=>e.isThemeLoading?0:1};
      color: ${e=>e.$placeholder?e.theme.colors.editorPlaceholder:e.theme.colors.editorHeading};
      margin: 0;
      padding: 0;
      display: block;

      // custom fonts need to honor the given font-weight
      strong {
        ${e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.strong.heading.name};\n        font-weight: ${t.fonts.content.strong.heading.weight};\n        font-style: ${t.fonts.content.strong.heading.style};`}}
      }

      em {
        ${e=>{let{theme:t}=e;return`\n          font-family: ${t.fonts.content.em.heading.name};\n          font-weight: ${t.fonts.content.em.heading.weight};\n          font-style: ${t.fonts.content.em.heading.style};`}}
      }

      em strong {
        ${e=>{let{theme:t}=e;return`\n          font-family: ${t.fonts.content.strongem.heading.name};\n          font-weight: ${t.fonts.content.strongem.heading.weight};\n          font-style: ${t.fonts.content.strongem.heading.style};`}}
      }

      code {
        font-family: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.monospace}};

        em {
          font-family: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.monospace}};
          font-style: ${e=>{let{theme:t}=e;return t.fonts.content.em.heading.style}};
        }

        strong {
          font-family: ${e=>{let{theme:t}=e;return t.fonts.content.strong.monospace}};
          font-weight: ${e=>{let{theme:t}=e;return t.fonts.content.strong.heading.weight}};
        }
      }
    }

    .display {
      font-size: ${e=>e.$isMobile?"2.369em":"4.624em"};
      line-height: 1.05;
      min-height: 1.05em;
      letter-spacing: -0.01em;
      margin-bottom: 0.2em;
    }

    .display > * > li {
      margin-bottom: 0.2em;
    }

    h1 {
      font-size: ${e=>e.$isMobile?"1.777em":"2.776em"};
      line-height: 1.05;
      min-height: 1.05em;
      letter-spacing: -0.01em;
      margin-bottom: 0.2em;
    }

    h1 > * > li {
      margin-bottom: 0.2em;
    }

    h2 {
      font-size: ${e=>e.$isMobile?"1.333em":"1.666em"};
      line-height: 1.1;
      min-height: 1.1em;
      letter-spacing: -0.01em;
      margin-bottom: 0.5em;
    }

    h2 > * > li {
      margin-bottom: 0.5em;
    }

    h3 {
      font-size: 1em;
      line-height: 1.4;
      min-height: 1.4em;
      letter-spacing: 0;
      margin-bottom: 0.5em;
    }

    h3 > * > li {
      margin-bottom: 0.5em;
    }

    h1 + h2 {
      margin-top: 0.5em;
    }

    > p,
    > ul,
    > ol,
    blockquote,
    blockquote > p {
      opacity: ${e=>e.isThemeLoading?0:1};
      color: ${e=>e.$placeholder?e.theme.colors.editorPlaceholder:e.theme.colors.editorParagraph};

      line-height: 1.4;
      min-height: 1.4em;
    }

    p {
      margin-top: 0;
      margin-bottom: 0.6em;
    }

    .caption {
      font-size: ${e=>e.$isMobile?"0.714em":"0.6849em"};
      line-height: 1.3;
      min-height: 1.3em;
      letter-spacing: 0;
      margin-top: 0;
      margin-bottom: 0.6em;
    }

    .caption + .display,
    .caption + h1,
    .caption + h2,
    .caption + h3 {
      margin-top: 0;
    }

    // list items (bullets & numbered list)
    li {
      margin-left: 0.5em;
      margin-bottom: 0.5em;

      ul,
      ol {
        margin-bottom: 0;
      }
    }

    li > p {
      display: inline;
    }

    li li {
      margin-left: 0em;
      margin-top: 0.5em;
      font-size: 1em;
    }

    ul {
      list-style-type: none !important;
    }

    ul,
    ol {
      color: ${e=>e.theme.colors.editorParagraph};
      --text-color: ${e=>e.theme.colors.editorParagraph};
    }

    h1,
    h2,
    h3 {
      ul,
      ol {
        --text-color: ${e=>e.theme.colors.editorHeading};
        color: ${e=>e.theme.colors.editorHeading};
      }
    }

    li ul,
    li ol {
      margin-bottom: 0.5em;
      margin-top: 0.5em;
    }

    ul > li::before {
      position: absolute;
      margin-right: 0em;
    }

    ul > li::before,
    ul ul ul ul > li::before {
      content: '•';
      margin-left: -1em;
      transform: scale(1);
    }

    ul ul > li::before,
    ul ul ul ul ul > li::before {
      position: absolute;
      content: '⚬';
      transform: scale(0.9);
      margin-left: -1.05em;
    }

    ul ul ul > li::before,
    ul ul ul ul ul ul > li::before {
      position: absolute;
      content: '▪';
      transform: scale(0.65);
      margin-left: -1.1em;
    }

    // Non-left aligned list item style overrides.
    ${e=>{let{$horizontalAlignment:t}=e;return t!==r.KxP.Leading&&"\n        // List marker has to follow with horizontal alignment, so for center/trailing alignment, we draw in the inside.\n        ul, ol {\n          list-style-position: inside;\n          padding-inline-start: 0px !important;\n          padding-left: 0px !important;\n        }\n\n        ol > li {\n          position: relative;\n        }\n\n        // center/right aligned lists don't need a left margin.\n        li {\n          margin-left: 0px;\n        }\n\n        // same for nested lists.\n        li li {\n          margin-left: 0px;\n        }\n    "}};

    ${e=>{let{$horizontalAlignment:t}=e;return t===r.KxP.Center&&"\n    ol > li {\n      position: relative;\n    }\n    "}};

    // Additional customization for right aligned lists
    ${e=>{let{$horizontalAlignment:t}=e;return t===r.KxP.Trailing&&"\n        // nested TODO: Figure out a better strategy\n        li li {\n          // padding-right: 2.25em;\n        }\n    "}};

    li > span:first-child {
      margin-left: 3px;
    }

    p + h1,
    p + h2 {
      margin-top: 0.6em;
    }

    p + h3,
    ul + h3,
    ol + h3 {
      margin-top: 1em;
    }

    ul + h2,
    ol + h2 {
      margin-top: 0.5em;
    }

    ul + p,
    ol + p {
      margin-top: 0.5em;
    }

    blockquote {
      margin: 0;
    }

    blockquote > * {
      ${e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.em.paragraph.name};\n        font-weight: ${t.fonts.content.em.paragraph.weight};\n        font-style: ${t.fonts.content.em.paragraph.style};`}}

      ${e=>{let{$horizontalAlignment:t,theme:n}=e;return t===r.KxP.Trailing?`\n        border-right: 0.1333em solid ${n.colors.editorParagraph};\n        padding-right: 0.666em;\n      `:`\n        border-left: 0.1333em solid ${n.colors.editorParagraph};\n        padding-left: 0.666em;\n      `}};
    }

    blockquote em {
      ${e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.baseline.paragraph.name};\n        font-weight: ${t.fonts.content.baseline.paragraph.weight};\n        font-style: ${t.fonts.content.baseline.paragraph.style};`}}
    }

    blockquote strong {
      ${e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.strongem.paragraph.name};\n        font-weight: ${t.fonts.content.strongem.paragraph.weight};\n        font-style: ${t.fonts.content.strongem.paragraph.style};`}}
    }

    blockquote em strong {
      ${e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.strong.paragraph.name};\n        font-weight: ${t.fonts.content.strong.paragraph.weight};\n        font-style: ${t.fonts.content.strong.paragraph.style};`}}
    }

    blockquote > h1,
    blockquote > h2,
    blockquote > h3 {
      border-left-color: ${e=>{let{theme:t}=e;return t.colors.editorHeading}};
      border-right-color: ${e=>{let{theme:t}=e;return t.colors.editorHeading}};

      ${e=>{let{theme:t}=e;return`\n          font-family: ${t.fonts.content.em.heading.name};\n          font-weight: ${t.fonts.content.em.heading.weight};\n          font-style: ${t.fonts.content.em.heading.style};`}}

      strong {
        ${e=>{let{theme:t}=e;return`\n          font-family: ${t.fonts.content.strongem.heading.name};\n          font-weight: ${t.fonts.content.strongem.heading.weight};\n          font-style: ${t.fonts.content.strongem.heading.style};`}}
      }

      em {
        ${e=>{let{theme:t}=e;return`\n            font-family: ${t.fonts.content.baseline.heading.name};\n            font-weight: ${t.fonts.content.baseline.heading.weight};\n            font-style: ${t.fonts.content.baseline.heading.style};`}}
      }

      em strong {
        ${e=>{let{theme:t}=e;return`\n            font-family: ${t.fonts.content.strong.heading.name};\n            font-weight: ${t.fonts.content.strong.heading.weight};\n            font-style: ${t.fonts.content.strong.heading.style};`}}
      }
    }

    blockquote > ul,
    blockquote > ol {
      padding-left: 0;
      ${e=>{let{$horizontalAlignment:t}=e;return t===r.KxP.Trailing?"\n        padding-inline-start: 1em;\n        padding-inline-end: 0.666em;\n      ":"\n        padding-inline-start: 1.666em;\n      "}};
    }

    ul,
    ol {
      margin: 0;
      display: block;
      padding-inline-start: 1em;
    }

    ol li::marker {
      font-variant-numeric: unset;
    }

    ol ol ol ol {
      list-style-type: decimal;
    }
    ol ol,
    ol ol ol ol ol {
      list-style-type: lower-alpha;
    }
    ol ol ol,
    ol ol ol ol ol ol {
      list-style-type: lower-roman;
    }

    strong {
      ${e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.strong.paragraph.name};\n        font-weight: ${t.fonts.content.strong.paragraph.weight};\n        font-style: ${t.fonts.content.strong.paragraph.style};`}}
    }

    em {
      ${e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.em.paragraph.name};\n        font-weight: ${t.fonts.content.em.paragraph.weight};\n        font-style: ${t.fonts.content.em.paragraph.style};`}}
    }

    em strong {
      ${e=>{let{theme:t}=e;return`\n        font-family: ${t.fonts.content.strongem.paragraph.name};\n        font-weight: ${t.fonts.content.strongem.paragraph.weight};\n        font-style: ${t.fonts.content.strongem.paragraph.style};`}}
    }

    a {
      ${l.Z}

      &:hover {
        color: inherit;
      }
    }

    code {
      font-family: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.monospace}};
      background-color: ${e=>e.theme.colors.codeBackground};
      border-radius: 0.18em;
      padding: 0 0.18em;
      letter-spacing: 0;

      em {
        font-family: ${e=>{let{theme:t}=e;return t.fonts.content.baseline.monospace}};
        font-style: ${e=>{let{theme:t}=e;return t.fonts.content.em.paragraph.style}};
      }

      strong {
        font-family: ${e=>{let{theme:t}=e;return t.fonts.content.strong.monospace}};
        font-weight: ${e=>{let{theme:t}=e;return t.fonts.content.strong.paragraph.weight}};
      }
    }

    .mention {
      background-color: ${e=>e.theme.colors.contrast8};
      border-radius: 4px;
      padding: 0.03em 0.1em 0.1em 0.1em;
    }
    .mention.selection {
      background-color: ${e=>e.theme.colors.textSelection};
    }

    .reference {
      vertical-align: super;
      font-size: smaller;
      border-radius: ${e=>e.theme.borderRadius.xxs};
      padding: 0.03em 0.1em 0.1em 0.1em;
    }
    .reference.selection {
      background-color: ${e=>e.theme.colors.textSelection};
    }

    ${a.H} {
      color: ${e=>{let{theme:t}=e;return t.colors.editorPlaceholder}};
      opacity: 1;
    }
  }
`;t.ZP=u},81735:function(e,t,n){"use strict";n.d(t,{M:function(){return i}});const i=(0,n(4480).xu)({key:"videoIsBufferedState",default:!1})},41243:function(e,t,n){"use strict";var i=n(67294),o=n(4480),r=n(43250);t.Z=()=>{const e=(0,o.sJ)(r.z);return(0,i.useMemo)((()=>({documentVisibility:e})),[e])}},93408:function(e,t,n){"use strict";n.d(t,{n:function(){return i},z:function(){return o}});const i="https://tome.imgix.net/",o="https://backend.tome.app/"},979:function(e,t,n){"use strict";n.d(t,{j:function(){return l}});var i=n(85893),o=n(67294);const r=o.createContext(""),l=()=>o.useContext(r);t.Z=e=>{let{tomeId:t,children:n}=e;return(0,i.jsx)(r.Provider,{value:t,children:n})}},12128:function(e,t,n){"use strict";n.d(t,{G:function(){return l},d:function(){return a}});var i=n(85893),o=n(67294);const r=(0,o.createContext)(null),l=e=>{let{children:t}=e;const n=(0,o.useRef)({element:null,rowIndex:null,tileIndex:null});return(0,i.jsx)(r.Provider,{value:n,children:t})},a=()=>{var e;return null===(e=(0,o.useContext)(r))||void 0===e?void 0:e.current}},38166:function(e,t,n){"use strict";var i=n(50456),o=n(96215);const r=i.ZP`
  query tile($id: String!) {
    tile(id: $id) {
      ...TileFragment
    }
  }
  ${o.mXG}
`;t.Z=r},57602:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(64310),o=n(41977),r=n(67294),l=n(6990),a=n(96215),s=n(40960);function d(e){let{tomeId:t}=e;const[n]=(0,a.BnV)(),d=(0,r.useRef)(null),c=(0,r.useRef)(null),u=(0,r.useCallback)(((e,r,a,u,p,h,f,g,m,v)=>{if(d.current===a)return;i.v.addAction("fileUpload",{uploadVideo:{uploadId:u,initiate:Date.now()}}),d.current=a;let w=0;const y=new s.Z,x=e=>{var t;y.stop(),i.v.addError(e),i.v.addAction("fileUpload",{uploadVideo:{uploadId:u,error:Date.now()}}),d.current=null,null===(t=m)||void 0===t||t()};(0,l.Z)((()=>n({variables:{filename:r,tileId:p,pageId:h,tomeId:t}}))).then((async t=>{let{data:n}=t;var r,l;const{videoId:s,uploadUrl:p}=(null===(r=n)||void 0===r?void 0:r.uploadVideo)||{};if(!s||!p)return void i.v.addError(new Error("uploadVideo response returned but with invalid data"));i.v.addAction("fileUpload",{uploadVideo:{videoId:s,uploadId:u,start:Date.now()}}),null===(l=v)||void 0===l||l(s);const h={endpoint:p,file:e,method:"PUT",attempts:3,delayBeforeAttempt:1,chunkSize:5120};y.start((()=>{var e;null===(e=c.current)||void 0===e||e.abort(),x(new Error("Upload progress timeout"))}),1e4);try{c.current=(0,o.createUpload)(h)}catch(e){return c.current=null,void x(e)}c.current.on("error",x),c.current.on("progress",(e=>{let{detail:t}=e;var n;const i=t/100;i>w&&(w=i,y.refresh()),w>=1&&y.stop(),null===(n=f)||void 0===n||n(i)})),c.current.on("success",(()=>{var e;c.current=null,d.current=null,y.stop(),null===(e=g)||void 0===e||e(a),i.v.addAction("fileUpload",{uploadVideo:{videoId:s,uploadId:u,complete:Date.now()}})}))})).catch((e=>{x(e)}))}),[t,n]);return u}},74837:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(67294),o=n(85518);var r=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const[t,n]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{!async function(){const i=await(e?(()=>{var e;if(o.vU)return Promise.resolve(!1);const t={name:"clipboard-read",allowWithoutGesture:!1},n=(null===(e=navigator)||void 0===e?void 0:e.permissions)&&navigator.permissions.query(t);return n?n.then((e=>"denied"!==e.state)).catch((e=>"TypeError"===e.name)):Promise.resolve(!0)})():(()=>{var e;const t={name:"clipboard-write",allowWithoutGesture:!1},n=(null===(e=navigator)||void 0===e?void 0:e.permissions)&&navigator.permissions.query(t);return n?n.then((e=>"denied"!==e.state)).catch((e=>"TypeError"===e.name)):Promise.resolve(!0)})());i!==t&&n(i)}()}),[t,n,e]),t}},97732:function(e,t,n){"use strict";var i=n(67294);t.Z=e=>{let{disabled:t,onCut:n,onCopy:o,onPaste:r}=e;const l=(0,i.useCallback)((e=>{n&&n(e)}),[n]),a=(0,i.useCallback)((e=>{o&&o(e)}),[o]),s=(0,i.useCallback)((e=>{r&&r(e)}),[r]);(0,i.useEffect)((()=>(t||(document.addEventListener("cut",l),document.addEventListener("copy",a),document.addEventListener("paste",s)),()=>{document.removeEventListener("cut",l),document.removeEventListener("copy",a),document.removeEventListener("paste",s)})),[t,a,l,s])}},59090:function(e,t,n){"use strict";n.d(t,{TT:function(){return i},W9:function(){return a},ye:function(){return l}});var i,o=n(67294),r=n(51203);!function(e){e.AUTOTOME_V2="autotomeV2",e.AUTOTOME_V3="autotomeV3",e.AUTOTOME_MAX_NUMBER_OF_PAGES="autotomeMaxNumberOfPages",e.CODE_TILE="codeTile",e.DOC_TO_TOME="docToTome",e.DRAGGABLE_PANELS="draggablePanels",e.FONTS="fonts",e.GENERATIVE_OUTLINE_EDITOR_INPUT_MAX_LENGTH="generativeOutlineEditorInputMaxLength",e.NARRATION_VIDEO_OVERRIDE="narrationVideoOverride",e.PDF_GENERATION="pdfGeneration",e.REFERENCES="generateReferences",e.TEST_IMAGE_STYLES_COMMAND="testImageStylesCommand",e.WORKSPACE_COLORS="workspaceColors",e.YOUTUBE_TO_TOME="youtubeToTome",e.GENERATE_TOME_FROM_OUTLINE_ENGINE="generateTomeFromOutlineDefaultEngine",e.MULTISELECT_DRAG_TO_SELECT="multiselectDragToSelect",e.CREATE_COMPOSITE_TILE="createCompositeTile",e.EDITOR_IA_UPDATES="editorIaUpdates",e.WEB_IMAGE_SEARCH="webImageSearch",e.CREATE_PAGE_ENABLE_WEB_IMAGE="createPageEnableWebImage",e.DRAWING_TILE="drawingTile",e.NEW_USER_REFERRAL_CREDITS="newUserReferralCredits",e.INVITER_REFERRAL_CREDITS="inviterReferralCredits",e.FIX_SPELLING_AND_GRAMMAR="fixSpellingAndGrammar"}(i||(i={}));const l=e=>{var t;const{flags:n}=(0,o.useContext)(r.Z),i=!0===(null===(t=n)||void 0===t?void 0:t[e]);return(0,o.useMemo)((()=>i),[i])},a=e=>{var t;const{flags:n}=(0,o.useContext)(r.Z),i=null===(t=n)||void 0===t?void 0:t[e];return(0,o.useMemo)((()=>i),[i])}},45533:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(67294);function o(){const[e,t]=(0,i.useState)(!1);return(0,i.useEffect)((()=>(t(!0),()=>{t(!1)})),[]),e}},64364:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(67294);function o(e){const t=(0,i.useRef)();return(0,i.useEffect)((()=>{t.current=e})),t.current}},32490:function(e,t,n){"use strict";n.d(t,{G:function(){return o},v:function(){return r}});var i=n(67294);const o="undefined"!=typeof document?i.useLayoutEffect:i.useEffect;function r(e,t){const n=(0,i.useRef)(!1);o((()=>{n.current&&e(),n.current=!0}),t)}},51672:function(e,t,n){"use strict";n.d(t,{R:function(){return l}});var i=n(50576),o=n(67294),r=n(99364);function l(e,t){return{id:e.id,tomeId:t,title:e.title||"",type:e.type||"",content:e.content||"",contentLink:e.contentLink||r.mt,imageAttributes:{...e.imageAttributes},compositeTileData:{...e.compositeTileData},imageTileData:{...e.imageTileData},videoTileData:{...e.videoTileData},tableTileData:{...e.tableTileData},mediaTileData:{...e.mediaTileData},fileUploadTileData:{...e.fileUploadTileData},textTileData:{...e.textTileData},drawingTileData:{...e.drawingTileData}}}t.Z=(e,t)=>{const[n,r]=(0,o.useState)((()=>l(e,t))),a=(0,o.useCallback)((e=>{r((t=>{delete t.__skipUndo;const n="function"==typeof e?e(t):e;return Object.is(n,t)?t:{...n,__skipSave:!1}}))}),[r]);return(0,o.useEffect)((()=>{r((o=>{const r=l(e,t);return(0,i.Z)(r,n)?o:{...r,__skipSave:!0}}))}),[e,t]),{tileData:n,updateTileData:a}}},79699:function(e,t,n){"use strict";n.d(t,{gF:function(){return d},l2:function(){return i},mR:function(){return a},uJ:function(){return s},vk:function(){return c}});var i,o=n(64310),r=n(86090),l=n(74877);!function(e){e.None="none",e.Gray="gray",e.Blue="blue",e.Yellow="yellow",e.Green="green",e.Red="red"}(i||(i={}));class a{getBackgroundColor(e){return e.tableColors[this.themeAccessor].background}getTextColor(e){return e.tableColors[this.themeAccessor].text}getTextSelectionColor(e){return e.tableColors[this.themeAccessor].selection}static fromCellColor(e){switch(e){case i.None:return a.NONE;case i.Gray:return a.GRAY;case i.Blue:return a.BLUE;case i.Yellow:return a.YELLOW;case i.Green:return a.GREEN;case i.Red:return a.RED;default:return o.v.addError(new Error("Invalid color"),{cellColor:e}),a.NONE}}constructor(e,t){this.userText=e,this.themeAccessor=t}}a.NONE=new a(r.ZP.t("commandPrompt.tiles.table.tableCellDataColor.defaultColor"),"none"),a.GRAY=new a(r.ZP.t("commandPrompt.tiles.table.tableCellDataColor.gray"),"gray"),a.BLUE=new a(r.ZP.t("commandPrompt.tiles.table.tableCellDataColor.blue"),"blue"),a.YELLOW=new a(r.ZP.t("commandPrompt.tiles.table.tableCellDataColor.yellow"),"yellow"),a.GREEN=new a(r.ZP.t("commandPrompt.tiles.table.tableCellDataColor.green"),"green"),a.RED=new a(r.ZP.t("commandPrompt.tiles.table.tableCellDataColor.red"),"red");const s={slateData:l.yS,color:i.None};function d(e,t){return{...e,slateData:t}}function c(e,t){return{...e,color:t}}},36680:function(e,t,n){"use strict";n.d(t,{BX:function(){return o},Hr:function(){return i},lh:function(){return l},s$:function(){return r}});const i={string:0},o=3,r=3,l=1/o},39554:function(e,t,n){"use strict";n.d(t,{Io:function(){return f},JA:function(){return v},Mj:function(){return h},Sd:function(){return u},VL:function(){return m},Zr:function(){return d},nd:function(){return p},pP:function(){return g}});var i=n(50576),o=n(67294),r=n(69219),l=n(84823),a=n(47486),s=n(36680);const d=e=>(s.Hr.string,r.Ot),c=(e,t)=>{const n={...e};return Object.keys(n).forEach((e=>{n[e]*=t,n[e]-=2*l.YF})),n},u=(e,t)=>{e((e=>{var n,o,r,l,a,d;const c="function"==typeof t?t(null===(o=e)||void 0===o||null===(n=o.tableTileData)||void 0===n?void 0:n.payload):t;if(c.columns=c.columns.map((e=>{const t={...e};return delete t.width,t})),(0,i.Z)(null===(l=e)||void 0===l||null===(r=l.tableTileData)||void 0===r?void 0:r.payload,c))return e;const u=c.columns.map((e=>e.accessor)),p={};return u.forEach((t=>{var n;const i=null===(n=e.tableTileData)||void 0===n?void 0:n.columnWidths[t];p[t]=i||s.lh})),{...e,tableTileData:{...e.tableTileData,columnWidths:p,payload:{...null===(d=e)||void 0===d||null===(a=d.tableTileData)||void 0===a?void 0:a.payload,...c}}}}))},p=(e,t)=>{var n,i;return(0,o.useMemo)((()=>{var n,i,o,r,l,a,s;return{data:(null===(i=e.tableTileData)||void 0===i||null===(n=i.payload)||void 0===n?void 0:n.data)||[],columns:(a=(null===(r=e.tableTileData)||void 0===r||null===(o=r.payload)||void 0===o?void 0:o.columns)||[],s=c(null===(l=e.tableTileData)||void 0===l?void 0:l.columnWidths,t),a.map((e=>"string"==typeof e.accessor&&Object.prototype.hasOwnProperty.call(s,e.accessor)?{...e,width:s[e.accessor]}:{...e})))}}),[JSON.stringify(null===(n=e.tableTileData)||void 0===n?void 0:n.payload),JSON.stringify(null===(i=e.tableTileData)||void 0===i?void 0:i.columnWidths),t])},h=(e,t)=>{e((e=>{var n,i,o;return t===(null===(i=e)||void 0===i||null===(n=i.tableTileData)||void 0===n?void 0:n.title)?e:{...e,tableTileData:{...null===(o=e)||void 0===o?void 0:o.tableTileData,title:t}}}))},f=(e,t,n,i)=>{e.length===t.length&&e.every(((n,i)=>{var o,r;return(null===(o=e[i])||void 0===o?void 0:o.width)===(null===(r=t[i])||void 0===r?void 0:r.width)}))||i((t=>{const i=((e,t)=>{const n={...e};return Object.keys(n).forEach((e=>{n[e]+=2*l.YF,n[e]/=t})),n})((e=>{const t={};for(const n of e)"number"==typeof n.width&&(t[n.id]=n.width);return t})(e),n);return{...t,tableTileData:{...t.tableTileData,columnWidths:i}}}))},g=(e,t,n)=>e?1:t?0:n?4:2,m=(e,t,n,i,o,r)=>{const{scrollLeft:l=0,scrollTop:a=0}=o;let s=l,d=a;const c=e.right-r;if(!(t.top>=e.top&&t.bottom<=e.bottom&&t.left>=e.left&&t.right<=c)){let n=0;const i=t.right-c,o=t.left-e.left;o<0?n=o:i>0&&(n=Math.min(i,o)),s=l+n;let r=0;const u=t.top-e.top,p=t.bottom-e.bottom;u<0?r=u:p>0&&(r=Math.min(p,u)),d=a+r}return 0===i&&(s=0),0===n&&(d=0),{scrollLeft:s,scrollTop:d}},v=e=>{let{width:t,isMobile:n=!1,preview:i=!1,isSingleTileRow:o=!1}=e;if(n)return l.oZ;const r=2*l.YF,s=i?t:t-2*a.QG+r;return o?s/2:s}},80530:function(e,t,n){"use strict";var i;n.d(t,{N:function(){return i},V:function(){return o}}),function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.Next=4]="Next",e[e.Previous=5]="Previous"}(i||(i={}));const o=(e,t,n,o,r)=>{let l=e.indexOf(n),a=t.indexOf(o);const s=e.length,d=t.length;switch(r){case i.Up:l>0&&(l-=1);break;case i.Down:l+1<s&&(l+=1);break;case i.Left:a>0&&(a-=1);break;case i.Right:a+1<d&&(a+=1);break;case i.Next:a+1<d?a+=1:l+1<s&&(a=0,l+=1);break;case i.Previous:a>0?a-=1:l>0&&(a=d-1,l-=1)}return{rowId:e[l],colId:t[a]}}},99364:function(e,t,n){"use strict";n.d(t,{Gs:function(){return p},QW:function(){return h},ln:function(){return l.l},mt:function(){return s},mz:function(){return a.Z}});var i=n(25934),o=n(96215),r=n(83694),l=n(849),a=n(99241);const s="",d=["id","tomeId"],c=["tableTileData.columnWidths"];function u(e,t,n,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];const l=Object.keys(t);let a=!1;for(let s=0;s<l.length;s++){const p=l[s],h=[...r,p];if(!(0===o&&d.includes(p)||p.startsWith("__"))){const r=t[p],l=e?e[p]:void 0;if("object"!=typeof r||null===r||Array.isArray(r)||c.includes(h.join(".")))r!==l&&(n[p]=l,i[p]=r,a=!0);else{const e={},t={};u(l,r,t,e,o+1,h)&&(i[p]=e,n[p]=t,a=!0)}}}return a}function p(e,t,n){let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const{id:d,tomeId:c}=e,p=l||e.__skipUndo,h=e.__skipRedo,f={},g={};if(!u(t.cache.readFragment({id:`Tile:${d}`,fragment:o.mXG}),e,f,g))return null;const m={id:(0,i.Z)(),tomeId:c,clientId:n,apply:[{operation:o.C8.UpdateTile,id:d,tile:{...g}}],revert:[{operation:o.C8.UpdateTile,id:d,tile:{...f}}]},v=(0,a.Z)(m);return m.__skipRedo=h,r.Q.submitMutation(t,v,m,p,s),d}function h(e,t,n,l,a,s,d){const c=n.frontendPageLayout;e.forEach((e=>{void 0!==n.getTileRowId(e)&&n.deleteTile(e)}));const u=[...e.map((e=>({operation:o.C8.DeleteTile,id:e,page:{id:t}}))),...d,{operation:o.C8.UpdatePage,id:t,page:{layout:c.getLayout()}}],p=r.Q.buildRevertForOperations(u,a.cache),h={id:(0,i.Z)(),tomeId:l,clientId:s,apply:u,revert:p};r.Q.submitMutation(a,h)}},40304:function(e,t,n){"use strict";n.d(t,{$Q:function(){return m},Ag:function(){return p},GW:function(){return s},NW:function(){return u},W8:function(){return c},gS:function(){return g},h6:function(){return h},pq:function(){return f}});var i=n(25934),o=n(96215),r=n(83694),l=n(86090),a=n(12887);const s=l.ZP.t("logic.tome.defaultTitle"),d=100;function c(e,t,n,l){const a=[{operation:o.C8.UpdateTome,id:e,tome:{...t}}],s=r.Q.buildRevertForOperations(a,n.cache),d={id:(0,i.Z)(),tomeId:e,clientId:l,apply:a,revert:s};r.Q.submitMutation(n,d)}function u(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const l=t.trim().replace(/\s+/g," ").substring(0,d),a=n.cache.readFragment({id:`Tome:${e}`,fragment:o.Z5p});return a?l&&0!==l.length&&l!==a.title?r&&a.title!==s?a.title:(c(e,{title:l},n,i),l):a.title:null}function p(e,t){let{cache:n}=t;const{me:i}=n.readQuery({query:o.fkZ})||{};i&&n.modify({id:n.identify(i),fields:{recentTomes(t,i){let{readField:o}=i;const r=t.nodes.filter((t=>e.id!==o("id",t))),l={__ref:n.identify(e)};return{...t,nodes:[l,...r]}}}})}const h=(e,t)=>{var n;const i=t.id,{me:r}=e.readQuery({query:o.fkZ})||{};r&&(e.modify({id:e.identify(t),fields:{deleted(){return!0}}}),e.modify({id:e.identify(r),fields:{recentTomes(e,t){let{readField:n}=t;const o=e.nodes.filter((e=>i!==n("id",e)));return{...e,nodes:o}},tomes(e,t){let{readField:n}=t;const o=e.nodes.filter((e=>i!==n("id",e)));return{...e,nodes:o}},deletedTomes(e){const t=[{__ref:`Tome:${i}`,deleted:!0},...e.nodes];return{...e,nodes:t}}}}),r&&(null===(n=r.memberships)||void 0===n?void 0:n[0])&&e.modify({id:e.identify(r.memberships[0]),fields:{tomes(e,t){let{readField:n}=t;const o=e.nodes.filter((e=>i!==n("id",e)));return{...e,nodes:o}}}}))};function f(e,t){var n,i,o,r,l,a,s,d,c;return{...e,me:{...e.me,org:{...null===(i=e)||void 0===i||null===(n=i.me)||void 0===n?void 0:n.org,tomes:{...null===(l=e)||void 0===l||null===(r=l.me)||void 0===r||null===(o=r.org)||void 0===o?void 0:o.tomes,nodes:[t,...(null===(c=e)||void 0===c||null===(d=c.me)||void 0===d||null===(s=d.org)||void 0===s||null===(a=s.tomes)||void 0===a?void 0:a.nodes)||[]]}}}}}function g(e,t){var n,i,o,r,l;return{...e,me:{...e.me,sharedWithMeTomes:{...null===(i=e)||void 0===i||null===(n=i.me)||void 0===n?void 0:n.sharedWithMeTomes,nodes:[t,...(null===(l=e)||void 0===l||null===(r=l.me)||void 0===r||null===(o=r.sharedWithMeTomes)||void 0===o?void 0:o.nodes)||[]]}}}}function m(e){return!e.pages||1===e.pages.length&&(0,a.yj)(e.pages[0])}},83305:function(e,t,n){"use strict";n.d(t,{CI:function(){return i.CI},Ci:function(){return i.Ci},Cs:function(){return i.Cs},Tj:function(){return i.Tj},j8:function(){return i.j8},xb:function(){return i.xb},yS:function(){return i.yS}});var i=n(74877)},99949:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var i=n(67294),o=n(62830),r=n.n(o),l=n(1922),a=n(96215),s=n(99364),d=n(9228),c=n(66810),u=n(73406),p=n(22755),h=n(7450),f=n(35383);function g(){const{t:e}=(0,l.$G)(),{deselectAllTiles:t}=(0,c.N4)(),n=(0,p.xs)(),o=(0,i.useCallback)((function(i,o,l,c,p,g,m){let v=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];var w,y;const x=l.frontendPageLayout.numTiles;if(0===x)return;let b=[];const C=[...i],T=new Set(i),I=g.cache.readFragment({id:`Page:${o}`,fragment:a.bsn,fragmentName:"PageWithTilesFragment",variables:{fetchFullPage:!0,prefetchPreviewImage:!1}});let $=!1;null===(y=I)||void 0===y||null===(w=y.tiles)||void 0===w||w.forEach((e=>{var t;if(e.type!==a.YUT.Composite)return;const n=(null===(t=e.compositeTileData)||void 0===t?void 0:t.tileIds)||[],[i,o]=n,r=T.has(e.id);if(T.has(i)&&T.has(o))throw new Error("Unsupported operation: can't delete both grouped tiles of a composite tile.");if(!r&&(T.has(i)||T.has(o))){const t=l.getTileRowId(e.id),n=l.getTileIndexInRow(e.id);if(void 0!==t&&void 0!==n){var s,d;C.push(e.id);const r=T.has(o)?i:o,c=null===(s=I.tiles)||void 0===s?void 0:s.find((e=>e.id===r));l.addTileToExistingRow(r,{kind:h.DV.NEW_TILE},(null===(d=c)||void 0===d?void 0:d.type)??a.YUT.Image,t,n),$=!0}}r&&C.push(...n)}));const k=C.filter((e=>void 0!==l.frontendPageLayout.rowByTileId(e))),E=!$&&k.length===x;if(E){const e=r()(),t=a.YUT.Text,n=l.addTileToNewRow(e,t,0),i=(0,f.ZP)({tileType:t});b=[{operation:a.C8.CreateTile,id:e,tile:{type:t,order:n.order,...i},page:{id:o}}]}(0,s.QW)(C,o,l,p,g,m,b),v&&(0,d.ak)({message:e("logic.tile.tileDeleted.deleted_with_count",{count:i.length}),action:"undo"}),(E||n(u.Z.TILE))&&c.closePropertyPanel(),t()}),[n,t,e]);return{deleteTilesAction:o}}},29225:function(e,t,n){"use strict";n.d(t,{L:function(){return a}});var i=n(50921),o=n(96215),r=n(69290),l=n(849);const a=(e,t,n,a,s,d,c)=>{if(!(0,i.ck)(d.type)&&d.type!==o.YUT.Text)throw new Error("Cannot add text to non-image or non-text tile");const u=s.getTileRowId(d.id),p=s.getTileIndexInRow(d.id);if(void 0===u||void 0===p)return[];const h={kind:r.rw.EXISTING_ROW,rowId:u,newTileIdx:p},f=c?[d,c]:[d];return(0,l.l)({tomeId:n,pageId:a,pageController:s,newTilesData:[f],apolloClient:e,clientId:t,insertTileLocation:h})}},849:function(e,t,n){"use strict";n.d(t,{l:function(){return m},x:function(){return v}});var i=n(62830),o=n.n(i),r=n(64310),l=n(7450),a=n(83694),s=n(36680),d=n(69290),c=n(96215),u=n(35383),p=n(99241);function h(e,t,n,i){switch(i.kind){case d.rw.NEW_ROW:t.addTileToNewRow(e,n,i.newRowIdx);break;case d.rw.EXISTING_ROW:t.addTileToExistingRow(e,{kind:l.DV.NEW_TILE},n,i.rowId,i.newTileIdx);break;case d.rw.END:t.addTileToEndOfPage(e,{kind:l.DV.NEW_TILE},n)}}const f=(e,t,n,i,r)=>{var l;const a=[],s=e.find((e=>e.type===t)),d=t===c.YUT.Text?{horizontalAlignment:c.KxP.Center,verticalAlignment:c.Q4P.Center}:{},p=(0,u.ZP)({tileType:t,textTileData:d}),h=(null===(l=s)||void 0===l?void 0:l.id)||o()();return n.frontendPageLayout.tiles.some((e=>e.tileId===h))?n.deleteTile(h):h!==r&&a.push({operation:c.C8.CreateTile,id:h,tile:{type:t,...p,...s},page:{id:i}}),{operations:a,tileId:h}};function g(e,t,n,i){const l=[],a=[];let p=i;return n.forEach((n=>{let i,g;Array.isArray(n)?({operationsToApply:g,tileId:i}=function(e,t,n,i){const r=[],l=o()();if(n.length>2)throw new Error("Must provide 2 or less tiles to build a composite tile");if(!n.every((e=>e.type===c.YUT.Text||e.type===c.YUT.Image)))throw new Error("Cannot build a composite tile with a non-text or non-image tile");let a;var s;i.kind===d.rw.EXISTING_ROW&&(a=null===(s=n.find((e=>{if(!e.id)return!1;const n=t.getTileRowId(e.id),o=t.getTileIndexInRow(e.id);return n===i.rowId&&o===i.newTileIdx})))||void 0===s?void 0:s.id),a?t.replaceTile(a,l,c.YUT.Composite):h(l,t,c.YUT.Composite,i);const{operations:u,tileId:p}=f(n,c.YUT.Image,t,e,a);r.push(...u);const{operations:g,tileId:m}=f(n,c.YUT.Text,t,e,a);return r.push(...g),r.push({operation:c.C8.CreateTile,id:l,tile:{type:c.YUT.Composite,compositeTileData:{tileIds:[p,m]}},page:{id:e}}),{operationsToApply:r,tileId:l}}(e,t,n,p)):({operationsToApply:g,tileId:i}=function(e,t,n,i){const r=[],l=n.type;let a={};if(l===c.YUT.Table){const e=i.kind===d.rw.NEW_ROW,t=e?2:1;a={numberOfColumns:s.BX*t,numberOfRows:s.s$,isNewRow:e}}const p=(0,u.ZP)({tileType:l,tableTileOptions:a}),f=o()();return h(f,t,l,i),r.push({operation:c.C8.CreateTile,id:f,tile:{...p,...n},page:{id:e}}),{operationsToApply:r,tileId:f}}(e,t,n,p)),l.push(...g),a.push(i);let m=(t.getTileIndexInRow(i)??0)+1;const v=t.getTileRowId(i);if(p.kind===d.rw.EXISTING_ROW)m=p.rowId===v?p.newTileIdx+1:0;v?p={kind:d.rw.EXISTING_ROW,rowId:v,newTileIdx:m}:(r.v.addError(new Error("Could not find the row id for a recently added tile during multi file drag and drop")),p={kind:d.rw.END})})),{operationsToApply:l,tileIds:a}}function m(e){let{tomeId:t,pageId:n,pageController:i,newTilesData:r,apolloClient:l,clientId:s,insertTileLocation:d}=e;const u=i.frontendPageLayout,{operationsToApply:h,tileIds:f}=g(n,i,r,d);h.push({operation:c.C8.UpdatePage,id:n,page:{layout:u.getLayout()},tome:{id:t}});const m=a.Q.buildRevertForOperations(h,l.cache),v={id:o()(),tomeId:t,clientId:s,apply:h,revert:m},w=(0,p.Z)(v);return a.Q.submitMutation(l,w,v),f}function v(e,t,n,i,o,r,l){return m({tomeId:e,pageId:t,pageController:n,newTilesData:[i],apolloClient:o,clientId:r,insertTileLocation:l})[0]}},35383:function(e,t,n){"use strict";n.d(t,{SQ:function(){return i},ZP:function(){return m},vJ:function(){return g},wj:function(){return f},yG:function(){return o}});var i,o,r=n(62830),l=n.n(r),a=n(22774),s=n(65164),d=n(88698),c=n(76690),u=n(69219),p=n(36680),h=n(87473);!function(e){e[e.Title=1]="Title",e[e.Heading=2]="Heading",e[e.Subtitle=3]="Subtitle"}(i||(i={})),function(e){e.Heading="heading",e.Body="paragraph",e.Caption="caption",e.List="bulleted-list"}(o||(o={}));const f=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t&&e===o.Heading?`[{"type":"${e}","children":[{"text":"${n}"}],"level":${t}}]`:e===o.List?`[{"type":"${e}","children":[{"type":"${h.pL}","children":[{"type":"${a.wl}","children":[{"text":"${n}"}]}]}]}]`:`[{"type":"${e}","children":[{"text":"${n}"}]}]`};function g(e,t,n){const i={},o=[],r={},a=(n?2:1)/e;for(let t=0;t<e;t++){const e=`col${t+1}`;i[e]=a,o.push({label:`Col ${t+1}`,accessor:e,columnType:p.Hr.string}),r[e]=u.Ot}const s=[];for(let e=0;e<t;e++)s.push({id:l()(),...r});return{tableTileData:{wrapText:!0,showHeader:!0,showTitle:!1,title:null,columnWidths:i,payload:{columns:o,data:s}}}}function m(e){let{tileType:t,textTileData:n,tableTileOptions:r}=e;switch(t){case"TEXT":case"TEXT_SLATE":return{textTileData:{content:f(o.Heading,i.Heading),...n}};case"IMAGE":case"IMAGE_GENERATIVE":return{imageAttributes:{...s.A},mediaTileData:{...d.R},fileUploadTileData:{...d.D},imageTileData:{...s.l}};case"VIDEO":return{videoTileData:{...c.C},mediaTileData:{...d.R},fileUploadTileData:{...d.D}};case"TABLE":var l,a,u;return g((null===(l=r)||void 0===l?void 0:l.numberOfColumns)||p.BX,(null===(a=r)||void 0===a?void 0:a.numberOfRows)||p.s$,(null===(u=r)||void 0===u?void 0:u.isNewRow)||!1);case"DRAWING":return{drawingTileData:{layers:null}};default:return{}}}},759:function(e,t,n){"use strict";n.d(t,{$V:function(){return v},Ao:function(){return u},BX:function(){return h},Jn:function(){return p},T8:function(){return m}});var i=n(86090),o=n(96215),r=n(85626),l=n(9228),a=n(93408);const s="s3://",d=2048;var c;function u(e){const t={fit:"crop",crop:"faces,edges",ar:c.Square};switch(e){case o.h7B.Portrait:t.ar=c.Portrait;break;case o.h7B.Ultrawide:t.ar=c.Ultrawide;break;case o.h7B.Widescreen:t.ar=c.Widescreen;break;case o.h7B.Vertical:t.ar=c.Vertical;break;default:return null}return t}function p(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const{imagePath:r}=e,{localMediaUrl:l}=t;if(n!==o.Jpv.Ready)return l;var a;if(null===(a=r)||void 0===a?void 0:a.startsWith(s)){let e=`/${r.replace(s,"")}`;if(i){const{dimensionType:t}=i;if(t){const n=u(t);n&&(e=`${e}?ar=${n.ar}&fit=${n.fit}&crop=${n.crop}`)}}return e}if(r)try{new URL(r);return r}catch{}}function h(e){const t=m(e);return t?t({src:e,width:d}):`${a.n+e}?auto=format&fit=max&w=${d}`}!function(e){e.Portrait="4:5",e.Ultrawide="21:9",e.Widescreen="16:9",e.Vertical="9:16",e.Square="1:1"}(c||(c={}));const f=e=>{let{src:t}=e;return t},g=e=>{let{src:t,width:n}=e,i=t;return n<=100?i=t.replace(/giphy.gif/,"100w.gif"):n<=200&&(i=t.replace(/giphy.gif/,"200w.gif")),i};function m(e){try{if("localhost"===new URL(e).hostname)return e=>{let{src:t,width:n}=e;return`${t}?w=${n}`}}catch(e){}const t=e.startsWith("blob:"),n=!t&&!e.startsWith("/");return e.startsWith("https://media.giphy.com/media/")?g:n||t?f:void 0}const v=(e,t)=>{const n=(0,r.w)(t),a=e=>({...e,contentLink:t,imageAttributes:{...e.imageAttributes,imagePath:t},mediaTileData:{...e.mediaTileData,aspectRatio:null,fillCropCenterX:null,fillCropCenterY:null,fillCropScale:null,mediaFillType:null,mediaStatus:o.Jpv.Ready},fileUploadTileData:{uploadId:null,createdAt:null}});let s=a;if(n&&n.tileType===o.YUT.Giphy&&n.tileData){const{imageAttributes:e,...t}=n.tileData;s=n=>{const i=a(n);return{...i,...t,imageAttributes:{...i.imageAttributes,...e}}},(0,l.ak)({message:i.ZP.t("logic.tile.recognizedGiphyURLMessage")})}e(s)}},64187:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(62830),o=n.n(i),r=n(85677),l=n(83694),a=n(96215),s=n(35383),d=n(99241);function c(e,t,n,i,c,u,p){const h=i.frontendPageLayout,f=h.rowByTileId(e),g=(0,s.ZP)({tileType:t.type}),m=f.tileById(e),v=o()(),w=[{operation:a.C8.CreateTile,id:v,tile:{order:m.order,...g,...t},page:{id:n}}],y=l.Q.buildRevertForOperations(w,u.cache),x=(0,r.Z)(h.getLayout());f.replaceTile(m.tileId,v),w.push({operation:a.C8.DeleteTile,id:m.tileId,page:{id:n}}),w.push({operation:a.C8.UpdatePage,id:n,page:{layout:h.getLayout()}}),y.push({operation:a.C8.RecoverTile,id:m.tileId,page:{id:n}}),y.push({operation:a.C8.UpdatePage,id:n,page:{layout:x}});const b={id:o()(),tomeId:c,clientId:p,apply:w,revert:y},C=(0,d.Z)(b);return l.Q.submitMutation(u,C,b),v}},68164:function(e,t,n){"use strict";n.d(t,{y:function(){return u},I:function(){return c}});var i,o=n(70594),r=n(64310),l=n(96215),a=n(6990),s=n(40960);!function(e){e.SignedUrlFailed="SIGNED_URL_FAILED",e.S3UploadFailed="S3_UPLOAD_FAILED",e.UploadProgressTimeout="UPLOAD_PROGRESS_TIMEOUT"}(i||(i={}));const d=async e=>{let{mutationFn:t,onUploadComplete:n,file:l,onUploadError:d,onUploadProgress:c,uploadId:u}=e;r.v.addAction("fileUpload",{uploadImage:{uploadId:u,initiate:Date.now()}});let p=0;const h=new s.Z,f=(e,t)=>{h.stop(),r.v.addError(t),r.v.addAction("fileUpload",{uploadImage:{uploadId:u,error:Date.now()}}),d(e,l.type)},g=new AbortController;let m;h.start((()=>{g.abort(),f(i.UploadProgressTimeout,new Error("Upload progress timeout"))}),1e4);try{m=await(0,a.Z)(t)}catch(e){return void f(i.SignedUrlFailed,e)}const{uploadUrl:v,onUploadCompleteData:w}=m;if(!v)return void f(i.SignedUrlFailed,new Error("Failed to create upload signature"));const y={headers:{"Content-Type":l.type},validateStatus:e=>e>=200&&e<300,onUploadProgress:e=>{var t;const n=e.progress??0;n>p?(p=n,h.refresh()):p>=1&&h.stop(),null===(t=c)||void 0===t||t(n)},signal:g.signal};r.v.addAction("fileUpload",{uploadImage:{uploadId:u,start:Date.now()}});try{await o.Z.create(y).put(v,l)}catch(e){return void f(i.S3UploadFailed,e)}r.v.addAction("fileUpload",{uploadImage:{uploadId:u,complete:Date.now()}}),h.stop(),n(w)},c=e=>{let{apolloClient:t,tomeId:n,onUploadComplete:i,file:o,onUploadError:r,onUploadProgress:a,uploadId:s}=e;d({mutationFn:async()=>{var e,i,r,a,s;const d=null===(e=(await t.mutate({mutation:l.iwV,variables:{fileName:o.name,fileType:o.type,tomeId:n}})).data)||void 0===e?void 0:e.signUpload;return{uploadUrl:null===(i=d)||void 0===i?void 0:i.url,onUploadCompleteData:{imagePath:null===(r=d)||void 0===r?void 0:r.imagePath,imageUrlTile:null===(a=d)||void 0===a?void 0:a.imageUrlTile,imageUrlPreview:null===(s=d)||void 0===s?void 0:s.imageUrlPreview}}},onUploadComplete:i,file:o,onUploadError:r,onUploadProgress:a,uploadId:s})},u=e=>{let{apolloClient:t,orgId:n,onUploadComplete:i,file:o,onUploadError:r,onUploadProgress:a,uploadId:s}=e;d({mutationFn:async()=>{var e,i,r;const a=null===(e=(await t.mutate({mutation:l._su,variables:{fileName:o.name,fileType:o.type,orgId:n}})).data)||void 0===e?void 0:e.signLogoUpload;return{uploadUrl:null===(i=a)||void 0===i?void 0:i.uploadUrl,onUploadCompleteData:{imagePath:null===(r=a)||void 0===r?void 0:r.imagePath}}},file:o,onUploadComplete:i,onUploadError:r,onUploadProgress:a,uploadId:s})}},22755:function(e,t,n){"use strict";n.d(t,{xs:function(){return d},f3:function(){return s},t2:function(){return u},Z5:function(){return c}});var i=n(67294),o=n(4480);class r{static getCurrentPropertyPanel(e){return e[e.length-1]??null}constructor(e){this.closePropertyPanel=()=>{this.setPropertyPanelStack((e=>0===e.stack.length?e:{stack:[]}))},this.pushPropertyPanel=e=>{this.setPropertyPanelStack((t=>{const n=[...t.stack];return n.push(e),{stack:n}}))},this.pushPropertyPanels=e=>{this.setPropertyPanelStack((t=>({stack:[...t.stack,...e]})))},this.popPropertyPanel=()=>{this.setPropertyPanelStack((e=>{if(0===e.stack.length)return e;const t=[...e.stack];return t.pop(),{stack:t}}))},this.popToRootPropertyPanel=()=>{this.setPropertyPanelStack((e=>{if(0===e.stack.length)return e;return{stack:[e.stack[0]]}}))},this.setPropertyPanel=e=>{this.setPropertyPanelStack((t=>{const n="function"==typeof e?e(r.getCurrentPropertyPanel(t.stack)):e;return{stack:null===n?[]:[n]}}))},this.setPropertyPanels=e=>{this.setPropertyPanelStack({stack:e})},this.setPropertyPanelStack=e}}var l=r,a=n(88560);const s=()=>{const e=(0,o.sJ)(a.K),t=l.getCurrentPropertyPanel(e.stack);return(0,i.useMemo)((()=>t),[t])},d=()=>(0,o._8)((e=>{let{snapshot:t}=e;return e=>t.getLoadable(a.K).getValue().stack.includes(e)}),[]),c=()=>(0,o.sJ)(a.K).stack.length,u=()=>{const e=(0,o.Zl)(a.K);return(0,i.useMemo)((()=>new l(e)),[e])}},88560:function(e,t,n){"use strict";n.d(t,{K:function(){return i}});const i=(0,n(4480).cn)({key:"propertyPanelStackState",default:{stack:[]}})},73406:function(e,t){"use strict";var n;!function(e){e.ADD_TILE="addTile",e.ADD_TEXT_TILE="addTextTile",e.ADD_MORE_TILES="addMoreTiles",e.ADD_MEDIA_TILE="addMediaTile",e.COLOR_PICKER="colorPicker",e.TEXT_COLOR_PICKER="textColorPicker",e.CUSTOMIZE="customize",e.RECORD="record",e.TILE="tile",e.IMAGE_GENERATION_HISTORY="imageGenerationHistory",e.IMAGE_EDIT="imageEdit",e.IMAGE_CREATE="imageCreate",e.IMAGE_SEARCH="imageSearch"}(n||(n={})),t.Z=n},97712:function(e,t,n){"use strict";n.d(t,{Z:function(){return c},w:function(){return d}});var i=n(85893),o=n(67294),r=n(4480),l=n(50576),a=n(96215);const s=(0,r.cn)({key:"tileIdToCounterIncrementInitialValueMapState",default:{}}),d=(0,r.CG)({key:"counterIncrementInitialValueSelectorByTildId",get:e=>t=>{let{get:n}=t;return n(s)[e]}});function c(e){let{frontendPageLayout:t,tiles:n}=e;const d=(0,r.Zl)(s);return(0,o.useEffect)((()=>{let e=0;const i=t.tiles.reduce(((t,i)=>{var o,r;const l=null===(o=n)||void 0===o?void 0:o.find((e=>e.id===i.tileId));if(!l||l.type!==a.YUT.Text||"string"!=typeof(null===(r=l.textTileData)||void 0===r?void 0:r.content))return t;const s=(l.textTileData.content.match(/"type":"reference",/g)||[]).length;return t[i.tileId]=e,e+=s,t}),{});d((e=>(0,l.Z)(e,i)?e:i))}),[t.tiles,d,n]),(0,i.jsx)(i.Fragment,{})}},60531:function(e,t,n){"use strict";n.d(t,{VJ:function(){return l},cm:function(){return o},s5:function(){return r}});var i=n(4480);const o=(0,i.cn)({key:"imageCropModeState",default:!1}),r=(0,i.cn)({key:"videoCropModeState",default:!1}),l=(0,i.cn)({key:"cropModeInitialState",default:null})},10158:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});const i=(0,n(4480).xu)({key:"mediaAlertsState",default:null})},16618:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});const i=(0,n(4480).cn)({key:"showAttributionState",default:!0})},48329:function(e,t,n){"use strict";n.d(t,{$A:function(){return C},Ao:function(){return v},DS:function(){return g},SI:function(){return s},Tc:function(){return y},YS:function(){return m},qZ:function(){return d},qh:function(){return b},sO:function(){return c},uL:function(){return h},wK:function(){return f},yg:function(){return u}});var i=n(4480),o=n(96215);const r=(0,i.cn)({key:"activeCellState",default:null}),l=(0,i.cn)({key:"selectedCellsState",default:[]}),a=(0,i.xu)({key:"tableTileCellState",default:{active:!1,selected:!1}}),s=(0,i.nZ)({key:"activeCellSelector",get:e=>{let{get:t}=e;return t(r)}}),d=(0,i.CG)({key:"isTableWithActiveCell",get:e=>t=>{let{get:n}=t;return e!==o.YUT.Table?null:n(r)}}),c=(0,i.nZ)({key:"selectedCellsSelector",get:e=>{let{get:t}=e;return t(l)}}),u=(0,i.nZ)({key:"multipleCellsSelectedSelector",get:e=>{let{get:t}=e;return t(l).length>1}});function p(e){return Object.values(e).join("-")}const h=(0,i.nZ)({key:"setActiveCellSelector",get:e=>{let{get:t}=e;return t(r)},set:(e,t)=>{let{get:n,set:o}=e;const l=n(r);l&&o(a(l),(e=>({...e,active:!1}))),t instanceof i.nY?o(r,null):(o(a(t),(e=>({...e,active:!0}))),o(r,t))}}),f=(0,i.nZ)({key:"setSelectedCellsSelector",get:e=>{let{get:t}=e;return t(l)},set:(e,t)=>{let{get:n,set:i}=e;n(l).forEach((e=>{i(a(e),(e=>({...e,selected:!1})))})),t.forEach((e=>{i(a(e),(e=>({...e,selected:!0})))})),i(l,t)}}),g=(0,i.nZ)({key:"appendSelectedCellsSelector",get:e=>{let{get:t}=e;return t(l)},set:(e,t)=>{let{set:n}=e;t.forEach((e=>{n(a(e),(e=>({...e,selected:!0})))})),n(l,(e=>{const n=[...e],i=e.map((e=>p(e)));return t.forEach((e=>{i.includes(p(e))||n.push(e)})),e.length===n.length?e:n}))}}),m=(0,i.CG)({key:"activeCellSelectorByKey",get:e=>t=>{let{get:n}=t;return n(a(e)).active},set:e=>(t,n)=>{let{set:i}=t;n&&i(h,e)}}),v=(0,i.CG)({key:"selectedCellSelectorByKey",get:e=>t=>{let{get:n}=t;return n(a(e)).selected},set:e=>(t,n)=>{let{set:i}=t;i(a(e),(e=>({...e,selected:n}))),i(l,n?t=>t.map((e=>p(e))).includes(p(e))?t:[...t,e]:t=>[...t].filter((t=>p(t)!==p(e))))}}),w=(0,i.xu)({key:"tableRowState",default:{height:0}}),y=(0,i.CG)({key:"rowHeights",get:e=>t=>{let{get:n}=t;return n(w(e)).height},set:e=>(t,n)=>{let{set:i}=t;"number"==typeof n&&i(w(e),(e=>e.height!==n?{prev:e,height:n}:e))}}),x=(0,i.xu)({key:"tableColumnState",default:{resizeHandleShowing:!1,dragHandleShowing:!1}}),b=(0,i.CG)({key:"resizeHandleHoverColumn",get:e=>t=>{let{get:n}=t;return n(x(e)).resizeHandleShowing},set:e=>(t,n)=>{let{get:i,set:o}=t;if("boolean"==typeof n){const t=x(e);o(t,{...i(t),resizeHandleShowing:n})}}}),C=(0,i.CG)({key:"dragHandleHoverColumn",get:e=>t=>{let{get:n}=t;return n(x(e)).dragHandleShowing},set:e=>(t,n)=>{let{get:i,set:o}=t;if("boolean"==typeof n){const t=x(e);o(t,{...i(t),dragHandleShowing:n})}}})},66810:function(e,t,n){"use strict";n.d(t,{$v:function(){return _},$y:function(){return C},L2:function(){return S},N4:function(){return $},T0:function(){return T},TQ:function(){return y},VZ:function(){return b},X1:function(){return k},Zp:function(){return v},c:function(){return f},ej:function(){return P},i9:function(){return w},j1:function(){return x},j3:function(){return R},j6:function(){return m},k4:function(){return I},pq:function(){return h},pt:function(){return E},py:function(){return d},sj:function(){return c},xZ:function(){return j},zO:function(){return g}});var i=n(4480),o=n(79520),r=n(82360),l=n(96215),a=n(9228),s=n(48329);const d=(0,i.cn)({key:"selectedTilesState",default:new Set}),c=(0,i.cn)({key:"lastSelectionPivotPointState",default:null}),u=(0,i.xu)({key:"TileCoordinatesState",default:{rowIdx:0,tileIdx:0}}),p=new Set([l.YUT.Text,l.YUT.TextSlate,l.YUT.Video]),h=(0,i.CG)({key:"tileCoordinatesSelector",get:e=>{let{tileId:t}=e;return e=>{let{get:n}=e;return n(u(t))}},set:e=>{let{tileId:t,tileType:n}=e;return(e,o)=>{let{set:r}=e;if(!p.has(n))return;let l=0,a=0;o instanceof i.nY||(l=o.rowIdx,a=o.tileIdx),r(u(t),(e=>e.rowIdx===l&&e.tileIdx===a?e:{rowIdx:l,tileIdx:a}))}}}),f=(0,i.CG)({key:"isFirstTileInTome",get:e=>{let{pageId:t,tileId:n}=e;return e=>{let{get:i}=e;const{rowIdx:o,tileIdx:r}=i(u(n));return i((0,a.tM)(t))&&0===o&&0===r}}}),g=(0,i.nZ)({key:"activeTilesSelector",get:e=>{let{get:t}=e;const n=t(d),[i]=n;return 1===n.size?i:null}}),m=(0,i.CG)({key:"isSelectedTileSelector",get:e=>{let{tileId:t,supportsSelection:n=!0}=e;return e=>{let{get:i}=e;return n&&i(d).has(t)}}}),v=(0,i.CG)({key:"isPartOfMultipleSelectedTilesSelector",get:e=>t=>{let{get:n}=t;const i=n(d);return i.size>1&&i.has(e)}}),w=(0,i.CG)({key:"isTileSelectionSecondaryColorSelector",get:e=>{let{tileId:t,tileType:n}=e;return e=>{let{get:i}=e;return null!==i((0,s.qZ)(n))||i((0,o.nI)({tileId:t,tileType:n}))||i(E(t))||i((0,r.vH)({tileId:t}))}}}),y=(0,i.CG)({key:"isEditingAndPartOfSelectionSelector",get:e=>t=>{let{get:n}=t;return!!e&&n(T)}}),x=(0,i.CG)({key:"isOtherTileSelectedSelector",get:e=>t=>{let{get:n}=t;const i=n(m({tileId:e})),o=n(C);return!i&&o}}),b=(0,i.nZ)({key:"numberOfSelectedTilesSelector",get:e=>{let{get:t}=e;return t(d).size}}),C=(0,i.nZ)({key:"selectedTileIdState",get:e=>{let{get:t}=e;return t(d).size>0}}),T=(0,i.nZ)({key:"hasMultipleSelectedTilesSelector",get:e=>{let{get:t}=e;return t(d).size>1}}),I=(0,i.CG)({key:"renderTileDetailsSelector",get:e=>{let{pageId:t,isTileEndpoint:n,preview:i}=e;return e=>{let{get:o}=e;return!i&&(n||o((0,a.Ae)(t)))}}});const $=()=>{const e=(0,i._8)((e=>{let{set:t}=e;return e=>{t(d,(t=>t.size===e.length&&e.every((e=>t.has(e)))?t:new Set(e))),e.length>0&&t(c,e[e.length-1])}}),[]),t=(0,i._8)((e=>{let{set:t}=e;return e=>{0!==e.length&&(t(d,(t=>e.every((e=>t.has(e)))?t:new Set([...t,...e]))),t(c,e[e.length-1]))}}),[]);return{rangeSelectTiles:(0,i._8)((e=>{let{snapshot:t,set:n}=e;return(e,i)=>{const o=t.getLoadable(c).getValue(),r=t.getLoadable(d).getValue(),{pivot:l,selection:a}=function(e){let{orderedTileIDs:t,previousSelection:n,pivotTileID:i,targetTileID:o}=e;if(0===n.size||null===i)return{pivot:o,selection:new Set([...n,o])};const r=new Set,l=new Set([...n]);let a=!1,s=!1;for(const e of t)if(e===o&&(s=!0),e===i&&(a=!0),s||a)if(a&&!s)l.add(e);else if(s&&!a)l.add(e),e!==o||n.has(e)||r.clear();else if(e===i)l.add(e);else if(e===o){l.add(e);for(const e of r)l.delete(e);if(r.clear(),!n.has(e))break}else{if(!n.has(e))break;r.add(e)}else n.has(e)?r.add(e):r.clear();for(const e of r)l.delete(e);return{pivot:i,selection:l}}({orderedTileIDs:e,targetTileID:i,pivotTileID:o,previousSelection:r});n(d,(e=>e.size===a.size&&[...e].every((e=>a.has(e)))?e:a)),n(c,l)}}),[]),additiveSelectTiles:t,exclusiveSelectTiles:e,deselectTile:(0,i._8)((e=>{let{set:t}=e;return e=>{t(d,(t=>{if(!t.has(e))return t;const n=new Set(t);return n.delete(e),n})),t(c,null)}}),[]),deselectAllTiles:(0,i._8)((e=>{let{set:t}=e;return()=>{t(d,(e=>0===e.size?e:new Set)),t(c,null)}}),[])}},k=(0,i.cn)({key:"embedTileOverrideState",default:null}),E=(0,i.xu)({key:"nullTileSelectedInputState",default:!1}),R=(0,i.xu)({key:"imageGenerativeTileNullStatePromptState",default:null}),S=(0,i.xu)({key:"imageGenerativeTilePromptState",default:""}),P=(0,i.cn)({key:"imageGenerativeHistoryContainerHeightState",default:1/0}),_=(0,i.xu)({key:"imageGenerativeTileShowAdvancedSettingsState",default:{value:!1,isDirty:!1}}),j=(0,i.xu)({key:"imageGenerativeTileGeneratedImagesState",default:null})},10987:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});const i=(0,n(4480).xu)({key:"globalTomeOverlayState",default:!1})},72297:function(e){"use strict";var t=function(e){let t,n;this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.style.position="fixed",this.canvas.style.zIndex="-1","VIDEO"===e.tagName?(t=e.videoWidth,n=e.videoHeight):(t=e.width,n=e.height),document.body.appendChild(this.canvas),this.canvas.width=t,this.canvas.height=n,this.width=t,this.height=n,this.context.drawImage(e,0,0,this.width,this.height)};t.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},t.prototype.update=function(e){this.context.putImageData(e,0,0)},t.prototype.getPixelCount=function(){return this.width*this.height},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},t.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)},t.prototype.markPixels=function(e){for(var t=this.context.getImageData(0,0,this.width,this.height),n=0;n<e.length;n++){var i=e[n];t.data[i++]=255,t.data[i++]=0,t.data[i++]=0,t.data[i++]=255}this.context.putImageData(t,0,0)};var n=function(){};n.prototype.getBackGroundColor=function(e,t){var n=this.getPalette(e,5,t);return n.length>0?n[0]:null};if(n.prototype.getPalette=function(e,n,i){void 0===n&&(n=10),void 0===i&&(i=10);var r,l=new t(e),a=l.getImageData().data,s=Math.round(.01*l.getWidth()),d=Math.round(.01*l.getHeight()),c=[],u=[],p=0,h=0;r=d*l.getWidth();for(var f=0;f<r;f+=i)w=a[(v=4*f)+0],y=a[v+1],x=a[v+2],a[v+3]>=125?(c.push([w,y,x]),u.push(v)):p+=1,h+=1;r=l.getHeight()*l.getWidth();for(f=(l.getHeight()-d)*l.getWidth();f<r;f+=i)w=a[(v=4*f)+0],y=a[v+1],x=a[v+2],a[v+3]>=125?(c.push([w,y,x]),u.push(v)):p+=1,h+=1;r=(l.getHeight()-d)*l.getWidth();f=d*l.getWidth();for(var g=0,m=0;f<r;f+=i)w=a[(v=4*f)+0],y=a[v+1],x=a[v+2],a[v+3]>=125?(c.push([w,y,x]),u.push(v)):p+=1,h+=1,(g+=i)>=s&&(f=(d+(m+=i))*l.getWidth(),g=0);r=(l.getHeight()-d)*l.getWidth();var v,w,y,x;for(f=d*l.getWidth()+(l.getWidth()-s-i),g=0,m=0;f<r;f+=i)w=a[(v=4*f)+0],y=a[v+1],x=a[v+2],a[v+3]>=125?(c.push([w,y,x]),u.push(v)):p+=1,h+=1,(g+=i)>=s&&(f=(d+(m+=i))*l.getWidth()+(l.getWidth()-s-i),g=0);if(p/h>.7)return l.removeCanvas(),[0];{const e=new Map;c.forEach((t=>{const n=function(e,t,n){return(255&e)<<16|(255&t)<<8|255&n}(...t);e.get(n)?e.set(n,e.get(n)+1):e.set(n,1)}));const t=Math.max(...e.values());if(t/h>.7)return l.removeCanvas(),[...e.keys()].filter((n=>e.get(n)===t)).map((e=>function(e){return[e>>16&255,e>>8&255,255&e]}(e)))}var b=o.quantize(c,n);if(!b)return l.removeCanvas(),[];var C=b.palette();return l.removeCanvas(),C},!i)var i={map:function(e,t){var n={};return t?e.map((function(e,i){return n.index=i,t.call(n,e)})):e.slice()},naturalOrder:function(e,t){return e<t?-1:e>t?1:0},sum:function(e,t){var n={};return e.reduce(t?function(e,i,o){return n.index=o,e+t.call(n,i)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?i.map(e,t):e)}};var o=function(){var e=5,t=8-e;function n(t,n,i){return(t<<2*e)+(n<<e)+i}function o(e){var t=[],n=!1;function i(){t.sort(e),n=!0}return{push:function(e){t.push(e),n=!1},peek:function(e){return n||i(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return n||i(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return n||i(),t}}}function r(e,t,n,i,o,r,l){var a=this;a.r1=e,a.r2=t,a.g1=n,a.g2=i,a.b1=o,a.b2=r,a.histo=l}function l(){this.vboxes=new o((function(e,t){return i.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())}))}function a(e,t){if(t.count()){var o=t.r2-t.r1+1,r=t.g2-t.g1+1,l=t.b2-t.b1+1,a=i.max([o,r,l]);if(1==t.count())return[t.copy()];var s,d,c,u,p=0,h=[],f=[];if(a==o)for(s=t.r1;s<=t.r2;s++){for(u=0,d=t.g1;d<=t.g2;d++)for(c=t.b1;c<=t.b2;c++)u+=e[n(s,d,c)]||0;p+=u,h[s]=p}else if(a==r)for(s=t.g1;s<=t.g2;s++){for(u=0,d=t.r1;d<=t.r2;d++)for(c=t.b1;c<=t.b2;c++)u+=e[n(d,s,c)]||0;p+=u,h[s]=p}else for(s=t.b1;s<=t.b2;s++){for(u=0,d=t.r1;d<=t.r2;d++)for(c=t.g1;c<=t.g2;c++)u+=e[n(d,c,s)]||0;p+=u,h[s]=p}return h.forEach((function(e,t){f[t]=p-e})),g(a==o?"r":a==r?"g":"b")}function g(e){var n,i,o,r,l,a=e+"1",d=e+"2",c=0;for(s=t[a];s<=t[d];s++)if(h[s]>p/2){for(o=t.copy(),r=t.copy(),l=(n=s-t[a])<=(i=t[d]-s)?Math.min(t[d]-1,~~(s+i/2)):Math.max(t[a],~~(s-1-n/2));!h[l];)l++;for(c=f[l];!c&&h[l-1];)c=f[--l];return o[d]=l,r[a]=o[d]+1,[o,r]}}}return r.prototype={volume:function(e){var t=this;return t._volume&&!e||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(e){var t=this,i=t.histo;if(!t._count_set||e){var o,r,l,a=0;for(o=t.r1;o<=t.r2;o++)for(r=t.g1;r<=t.g2;r++)for(l=t.b1;l<=t.b2;l++)index=n(o,r,l),a+=i[index]||0;t._count=a,t._count_set=!0}return t._count},copy:function(){var e=this;return new r(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var i=this,o=i.histo;if(!i._avg||t){var r,l,a,s,d=0,c=1<<8-e,u=0,p=0,h=0;for(l=i.r1;l<=i.r2;l++)for(a=i.g1;a<=i.g2;a++)for(s=i.b1;s<=i.b2;s++)d+=r=o[n(l,a,s)]||0,u+=r*(l+.5)*c,p+=r*(a+.5)*c,h+=r*(s+.5)*c;i._avg=d?[~~(u/d),~~(p/d),~~(h/d)]:[~~(c*(i.r1+i.r2+1)/2),~~(c*(i.g1+i.g2+1)/2),~~(c*(i.b1+i.b2+1)/2)]}return i._avg},contains:function(e){var n=this,i=e[0]>>t;return gval=e[1]>>t,bval=e[2]>>t,i>=n.r1&&i<=n.r2&&gval>=n.g1&&gval<=n.g2&&bval>=n.b1&&bval<=n.b2}},l.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map((function(e){return e.color}))},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)},nearest:function(e){for(var t,n,i,o=this.vboxes,r=0;r<o.size();r++)((n=Math.sqrt(Math.pow(e[0]-o.peek(r).color[0],2)+Math.pow(e[1]-o.peek(r).color[1],2)+Math.pow(e[2]-o.peek(r).color[2],2)))<t||void 0===t)&&(t=n,i=o.peek(r).color);return i},forcebw:function(){var e=this.vboxes;e.sort((function(e,t){return i.naturalOrder(i.sum(e.color),i.sum(t.color))}));var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var n=e.length-1,o=e[n].color;o[0]>251&&o[1]>251&&o[2]>251&&(e[n].color=[255,255,255])}},{quantize:function(s,d){if(!s.length||d<2||d>256)return!1;var c=function(i){var o,r,l,a,s=new Array(1<<3*e);return i.forEach((function(e){r=e[0]>>t,l=e[1]>>t,a=e[2]>>t,o=n(r,l,a),s[o]=(s[o]||0)+1})),s}(s);c.forEach((function(){0}));var u=function(e,n){var i,o,l,a=1e6,s=0,d=1e6,c=0,u=1e6,p=0;return e.forEach((function(e){i=e[0]>>t,o=e[1]>>t,l=e[2]>>t,i<a?a=i:i>s&&(s=i),o<d?d=o:o>c&&(c=o),l<u?u=l:l>p&&(p=l)})),new r(a,s,d,c,u,p,n)}(s,c),p=new o((function(e,t){return i.naturalOrder(e.count(),t.count())}));function h(e,t){for(var n,i=1,o=0;o<1e3;)if((n=e.pop()).count()){var r=a(c,n),l=r[0],s=r[1];if(!l)return;if(e.push(l),s&&(e.push(s),i++),i>=t)return;if(o++>1e3)return}else e.push(n),o++}p.push(u),h(p,.75*d);for(var f=new o((function(e,t){return i.naturalOrder(e.count()*e.volume(),t.count()*t.volume())}));p.size();)f.push(p.pop());h(f,d-f.size());for(var g=new l;f.size();)g.push(f.pop());return g}}}();e.exports&&(e.exports=n)},69219:function(e,t,n){"use strict";n.d(t,{Ot:function(){return s},qC:function(){return l},vB:function(){return a}});var i=n(79699),o=n(74877);function r(e){return Array.isArray(e)}const l=e=>JSON.stringify(e),a=e=>{try{const n=JSON.parse(e);return void 0!==(t=n).color&&r(t.slateData)?n:r(n)?{slateData:n,color:i.l2.None}:{slateData:o.yS,color:i.l2.None}}catch(t){return{slateData:(0,o.Tj)(e),color:i.l2.None}}var t},s=l(i.uJ)},50921:function(e,t,n){"use strict";n.d(t,{$i:function(){return m},AL:function(){return s},Gj:function(){return k},Io:function(){return c},M2:function(){return d},N3:function(){return u},Pb:function(){return $},QQ:function(){return g},Qs:function(){return y},ck:function(){return b},lW:function(){return f},xV:function(){return x}});var i=n(64310),o=n(96215),r=n(72297),l=n.n(r),a=n(76163);const s=o.EwX.Fit,d="dark",c=o.ubC.None,u=new Map([["light","white"],["dark","transparent"]]),p=new Set(["image/apng","image/gif","image/jpeg","image/jpg","image/png","image/svg+xml","image/webp","image/bmp","image/tiff","image/heif","image/heic"]),h=new Set([".heic",".heif",".cr2",".nef",".psd"]),f=`image/*,${[...h].join(",")}`;function g(e){var t;if(p.has(e.type))return!0;const n=null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase();return!!h.has(`.${n}`)}function m(e){if("white"===e)return 1;if("transparent"===e)return 0;let t=0,n=0,i=0;4===e.length?(t=Number(`0x${e[1]}${e[1]}`),n=Number(`0x${e[2]}${e[2]}`),i=Number(`0x${e[3]}${e[3]}`)):7===e.length&&(t=Number(`0x${e[1]}${e[2]}`),n=Number(`0x${e[3]}${e[4]}`),i=Number(`0x${e[5]}${e[6]}`)),t/=255,n/=255,i/=255;const o=Math.min(t,n,i);let r=0;return r=(Math.max(t,n,i)+o)/2,r=+(100*r).toFixed(1)/100,r}const v=(e,t,n)=>{let i=0,o=0,r=0,l=0;const a=e.length,s=Math.floor(a*t),d=Math.floor(a*n);for(let t=s;t<d;t+=4){i=e[t],o=e[t+1],r=e[t+2];l+=(Math.max(i,o,r)+Math.min(i,o,r))/2}return l=Math.floor(l/((d-s)/4)),l/255},w=(e,t,n)=>{const i=document.createElement("canvas"),o=e.naturalWidth,r=e.naturalHeight;i.width=o,i.height=r;const l=i.getContext("2d");l.drawImage(e,0,0);const a=l.getImageData(0,0,o,r);return v(a.data,t,n)},y=(e,t,n)=>{const i=e.current;if(!i)return 0;const o=document.createElement("canvas"),r=i.videoWidth,l=i.videoHeight;o.width=r,o.height=l;const a=o.getContext("2d");if(a.drawImage(i,0,0,r,l),r&&l){const e=a.getImageData(0,0,r,l);return v(e.data,t,n)}return 0};function x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return void t(0);const o=new Image;let r;o.src=e,o.crossOrigin="anonymous",o.onload=()=>{r=w(o,n,i),t(r)}}function b(e){return a.g$.includes(e)}const C=(e,t,n)=>`#${[e,t,n].map((e=>{const t=e.toString(16);return 1===t.length?`0${t}`:t})).join("")}`,T=(e,t,n)=>255===e&&255===t&&255===n,I=(e,t,n)=>0===e&&0===t&&0===n,$=e=>{let t;try{t=(new(l())).getBackGroundColor(e)}catch(t){let n,o;if("VIDEO"===e.tagName){const t=e;n=t.videoWidth,o=t.videoHeight}else if("IMG"===e.tagName){const t=e;n=t.width,o=t.height}i.v.addError(t,{sourceElementTag:e.tagName,sourceWidth:n,sourceHeight:o})}let n=null;return t&&(4===t.length&&0===t[3]?n="dark":3===t.length&&(n=T(t[0],t[1],t[2])?"light":I(t[0],t[1],t[2])?"black":C(t[0],t[1],t[2]))),n};function k(e,t){var n,i;return!(i=null===(n=e)||void 0===n?void 0:n.imagePath)||0===i.length||t===o.Jpv.UploadInProgress}},91292:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});n(67294);const i=e=>t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}},60348:function(e,t){"use strict";t.Z=function(){}},70203:function(e,t,n){"use strict";n.d(t,{B0:function(){return l},oA:function(){return a},tj:function(){return o},xZ:function(){return r}});var i=n(96215);const o=e=>{if(!e)return"flex-start";return{top:"flex-start",center:"center",bottom:"flex-end",distribute:"space-between"}[e]||"flex-start"},r=e=>e||i.Q4P.Top,l=e=>{if(!e)return"left";return{leading:"left",center:"center",trailing:"right"}[e]||"left"},a=e=>e||i.KxP.Leading},87473:function(e,t,n){"use strict";n.d(t,{$M:function(){return r},Ar:function(){return i},Ch:function(){return g},Ik:function(){return a},JB:function(){return d},L$:function(){return f},Oo:function(){return c},Y_:function(){return T},ah:function(){return u},gk:function(){return h},l$:function(){return b},pL:function(){return w},qR:function(){return y},r3:function(){return m},uI:function(){return C},uJ:function(){return s},uX:function(){return p},y1:function(){return x},yq:function(){return v},zN:function(){return l}});var i,o=n(40419);!function(e){e.REFERENCES="references",e.MENTIONS="mentions",e.TYPE_SCALES="typeScales",e.EXPANDED_TYPE_SCALES="expandedTypeScales",e.LINKS="links",e.MARKS="marks",e.REWRITE="rewrite",e.LISTS="lists",e.HTML_TABLES="html_tables",e.STRICT_MODE="strict_mode",e.COLORS="colors"}(i||(i={}));const r=Object.values(i).filter((e=>e!==i.STRICT_MODE));Object.values(i);var l;!function(e){e.BOLD="bold",e.ITALIC="italic",e.CODE="code",e.STRIKETHROUGH="strikethrough",e.UNDERLINED="underlined"}(l||(l={}));const a=Object.values(l),s="link",d="paragraph",c="caption",u="blockquote",p="heading",h="reference",f="display",g="title",m="heading",v="subheading",w="list-item",y="bulleted-list",x="numbered-list";var b;!function(e){e.UNTITLED="UNTITLED",e.DEFAULT="DEFAULT"}(b||(b={}));const C=()=>{const e=(0,o.U7P)();if(!e)throw new Error("Attempting to get a Slate editor outside of a <Slate> component");return e},T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.JIX)(e)}},85695:function(e,t,n){"use strict";n.d(t,{T8:function(){return l},aE:function(){return u},uT:function(){return r}});var i=n(40419),o=n(77493);const r=(e,t,n)=>{if((e=>{const[t]=(0,i.tVv)(e,{match:e=>!o.ML.isEditor(e)&&o.W_.isElement(e)&&"link"===e.type});return!!t})(e)&&(e=>{(0,i.LKm)(e,{match:e=>!o.ML.isEditor(e)&&o.W_.isElement(e)&&"link"===e.type})})(e),!t||!t.length)return;const r=n||e.selection,l=r&&o.e6.isCollapsed(r),a={type:"link",url:t,children:l?[{text:t}]:[]};l?(0,i.s2K)(e,a):(0,i.qEX)(e,a,{at:r,split:!0})},l=(e,t,n)=>{r(e,t,n)},a=e=>{let t;try{t=new URL(e)}catch(e){return!1}return t.pathname.replace(/\/+$/,"")===window.location.pathname},s={"data-tome-bypass-tap-navigation":"SlateTextTile__Link"},d={...s,rel:"noreferrer noopener",target:"_blank"},c={...s},u=e=>a(e)?c:d},88767:function(e,t,n){"use strict";var i=n(77493);const o=e=>i.NB.string(e),r=e=>e.map(o).join("").length,l=(e,t,n)=>{let a=t;return e.reduce(((e,t)=>{const s=o(t).length;return a+s<=n?(e.push(t),a+=s,e):(a<n&&(i.xv.isText(t)?(t.text=t.text.slice(0,n-a),a+=t.text.length):(t.children=l(t.children,0,n-a),a+=r(t.children)),e.push(t)),e)}),[])};t.Z=e=>t=>{const{insertText:n,insertBreak:o,insertFragment:a}=t;if(!e)return t;const s=e=>r(e);return t.insertText=i=>{const o=s(t.children);if(o+i.length<=e)return n(i),!0;const r=e-o;return r>0?(n(i.substr(0,r)),!0):(n(" "),t.deleteBackward("character"),!1)},t.insertData=e=>{const n=e.getData("application/x-slate-fragment");if(n){const e=decodeURIComponent(window.atob(n)),i=JSON.parse(e);t.insertFragment(i)}else t.insertTextData(e)},t.insertTextData=e=>{const n=e.getData("text/plain").trim().split(/\r\n|\r|\n/);let o=!1,r=!1;for(const e of n){o&&i.YR.splitNodes(t,{always:!0});const n=t.insertText(e);if(r||(r=n),!n)break;o=!0}return r},t.insertBreak=()=>{s(t.children)>=e||o()},t.insertFragment=i=>{const o=s(t.children);if(o+r(i)<=e)return void a(i);const d=l(i,o,e);d.length>0?a(d):(n(" "),t.deleteBackward("character"))},t}},85252:function(e,t,n){"use strict";function i(e,t){return e-t}function o(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}function r(e,t){return new Date(t).getTime()-new Date(e).getTime()}n.d(t,{Fq:function(){return o},hT:function(){return r},uR:function(){return i}})},85626:function(e,t,n){"use strict";n.d(t,{Q:function(){return u},w:function(){return c}});var i=n(96215);function o(e){let t;try{t=new URL(e)}catch{}if(!t)return null;if("airtable.com"!==t.hostname&&"www.airtable.com"!==t.hostname)return null;return`https://airtable.com/embed/${t.pathname.replace(/^\/+|\/+$/g,"")}?backgroundColor=grayLight`}function r(e){let t;try{t=new URL(e)}catch{}return t?"figma.com"!==t.hostname&&"www.figma.com"!==t.hostname?null:"https://www.figma.com/embed?embed_host=astra&url=".concat(e):null}function l(e){let t,n;try{if(t=new URL(e.replace(/\/$/,"")),"miro.com"!==t.hostname&&"www.miro.com"!==t.hostname)return null;const i=t.pathname.split("/").filter((e=>e.length));n=i[i.length-1]}catch(e){return null}return`https://miro.com/app/embed/${n}?autoplay=yep`}function a(e){let t;try{t=new URL(e)}catch(e){return null}if("framer.com"!==t.hostname&&"www.framer.com"!==t.hostname)return null;const[,n,...i]=t.pathname.split("/");return"embed"===n?e:"share"===n?`https://${t.hostname}/embed/${i.join("/")}`:null}function s(e){let t;try{t=new URL(e)}catch(e){return null}if(!t.hostname.endsWith(".looker.com"))return null;t.searchParams.set("allow_login_screen","true"),t.searchParams.set("embed_domain",window.location.origin);const[,n]=t.pathname.split("/");return"embed"===n?t.href:["looks","explore","dashboards","dashboards-legacy","dashboards-next"].includes(n)?(t.pathname=`/embed${t.pathname}`,t.href):null}function d(e){let t;try{t=new URL(e)}catch(e){return null}if("pinterest.com"!==t.hostname&&"www.pinterest.com"!==t.hostname)return null;const[,n,i]=t.pathname.split("/");return"pin"===n&&i?`https://assets.pinterest.com/ext/embed.html?id=${i}`:null}function c(e){let t,n,o;try{t=new URL(e)}catch{}if(!t)return{};switch(t.hostname){case"media.giphy.com":n=i.YUT.Giphy,o={contentLink:t.href,imageAttributes:{imagePath:t.href},mediaTileData:{mediaStatus:i.Jpv.Ready}};break;case"www.giphy.com":case"giphy.com":{const[,e,r]=t.pathname.split("/");if("gifs"===e&&r){const e=r.split("-"),t=`https://media.giphy.com/media/${e[e.length-1]}/giphy.gif`;n=i.YUT.Giphy,o={contentLink:t,imageAttributes:{imagePath:t},mediaTileData:{mediaStatus:i.Jpv.Ready}}}break}case"figma.com":case"www.figma.com":n=i.YUT.Figma,o={contentLink:t.href};break;case"airtable.com":case"www.airtable.com":n=i.YUT.Airtable,o={contentLink:t.href};break;case"twitter.com":case"www.twitter.com":n=i.YUT.Twitter,o={contentLink:t.href};break;case"miro.com":case"www.miro.com":n=i.YUT.Miro,o={contentLink:t.href};break;case"framer.com":case"www.framer.com":n=i.YUT.Framer,o={contentLink:t.href};break;default:t.hostname.endsWith(".looker.com")?(n=i.YUT.Looker,o={contentLink:t.href}):t.pathname.includes("embed")&&(n=i.YUT.Web,o={contentLink:t.href})}return{tileType:n,tileData:o}}function u(e){let t;try{t=new URL(e)}catch{}if(!t)return{url:null};if(t.hostname.endsWith(".looker.com"))return{tileType:i.YUT.Looker,url:s(e)};switch(t.hostname){case"figma.com":case"www.figma.com":return{tileType:i.YUT.Figma,url:r(e)};case"airtable.com":case"www.airtable.com":return{tileType:i.YUT.Airtable,url:o(e)};case"miro.com":case"www.miro.com":return{tileType:i.YUT.Miro,url:l(e)};case"framer.com":case"www.framer.com":return{tileType:i.YUT.Framer,url:a(e)};case"pinterest.com":case"www.pinterest.com":return{tileType:i.YUT.Web,url:d(e)};case"docs.google.com":{if(t.pathname.match("/forms/"))return t.pathname=t.pathname.replace(/\/edit$/,"/viewform"),{tileType:i.YUT.Web,url:t.href};t.pathname=t.pathname.replace(/\/edit$/,"/preview");const e=t.pathname.split("/"),n=e[e.length-1];return"preview"!==n&&"pubhtml"!==n&&(t.pathname=`${t.pathname}/preview`),{tileType:i.YUT.Web,url:t.href}}case"www.youtube.com":case"m.youtube.com":case"music.youtube.com":case"youtu.be":{var n;const e=/(?:.+?)?(?:\/v\/|watch\/|\?v=|&v=|youtu\.be\/|\/v=|^youtu\.be\/|watch%3Fv%3D)([a-zA-Z0-9_-]{11})+/,o=t.href.match(e),r=t.searchParams.get("t");return t.searchParams.delete("v"),t.searchParams.delete("t"),r&&t.searchParams.set("start",r),o&&(null===(n=o)||void 0===n?void 0:n.length)>1?{tileType:i.YUT.Web,url:[`https://www.youtube.com/embed/${o[1]}`,t.searchParams.toString()].filter((e=>e)).join("?")}:{tileType:i.YUT.Web,url:t.href}}case"app.mode.com":return t.pathname.endsWith("/embed")||(t.pathname=`${t.pathname}/embed`),{tileType:i.YUT.Web,url:t.href};case"twitter.com":case"www.twitter.com":return{tileType:i.YUT.Twitter,url:t.href};case"sketchfab.com":case"www.sketchfab.com":{const e=(t.pathname||"").trim();if(e.length&&!e.endsWith("/embed")){let n="";try{var c;n=`${(null===(c=e.match(/[/-]([0-9a-z]{32,32})+/))||void 0===c?void 0:c[1])||""}`}catch(e){}n&&(t.pathname=`/models/${n}/embed`)}return t.protocol="https:",{tileType:i.YUT.Web,url:t.href}}default:return{url:t.href}}}},34981:function(e,t){"use strict";t.Z=function(e){e.stopPropagation()}},76163:function(e,t,n){"use strict";n.d(t,{Zp:function(){return E},g$:function(){return k},KS:function(){return R},qj:function(){return S},Cp:function(){return T},An:function(){return $},YM:function(){return I}});var i=n(86090),o=n(96215),r=n(59090),l=n(93505),a=n(41228),s=n(93225),d=n(76382),c=n(30378),u=n(88845),p=n(89250),h=n(93280),f=n(79573),g=n(31940),m=n(61949),v=n(60595),w=n(85893),y=n(67294),x=n(2767);var b=(0,y.forwardRef)(((e,t)=>(0,w.jsx)(x.Z,{ref:t,style:{width:52,height:52},viewBox:"0 0 64 64",...e,children:(0,w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42 48V38C50.8366 38 58 30.8366 58 22C58 13.1634 50.8366 6 42 6C33.1634 6 26 13.1634 26 22H16C12.6863 22 10 24.6863 10 28V48C10 51.3137 12.6863 54 16 54H36C39.3137 54 42 51.3137 42 48ZM54 22C54 28.6274 48.6274 34 42 34V28C42 24.6863 39.3137 22 36 22H30C30 15.3726 35.3726 10 42 10C48.6274 10 54 15.3726 54 22ZM36 50C37.1046 50 38 49.1046 38 48V28C38 26.8954 37.1046 26 36 26H16C14.8954 26 14 26.8954 14 28V48C14 49.1046 14.8954 50 16 50H36Z"})})));const C=[{value:o.YUT.Text,label:i.ZP.t("utils.tileTypes.textLabel"),icon:l.Z},{value:o.YUT.Image,label:i.ZP.t("utils.tileTypes.imageLabel"),icon:s.Z},{value:o.YUT.Video,label:i.ZP.t("utils.tileTypes.videoLabel"),icon:a.Z},{value:o.YUT.Table,label:i.ZP.t("utils.tileTypes.tableLabel"),icon:m.Z},{value:o.YUT.Drawing,label:i.ZP.t("utils.tileTypes.drawingLabel"),launchDarklyKey:r.TT.DRAWING_TILE,icon:b}],T=[{value:o.YUT.Giphy,label:"GIPHY",icon:g.Z},{value:o.YUT.Figma,label:"Figma",icon:d.Z},{value:o.YUT.Airtable,label:"Airtable",icon:c.Z},{value:o.YUT.Twitter,label:"Twitter",icon:p.Z},{value:o.YUT.Miro,label:"Miro",icon:f.Z},{value:o.YUT.Framer,label:"Framer",icon:h.Z},{value:o.YUT.Looker,label:"Looker",icon:v.Z},{value:o.YUT.Web,label:i.ZP.t("utils.tileTypes.webLabel"),icon:u.Z}],I=[...C,...T],$=e=>{let t=e;return e===o.YUT.ImageGenerative&&(t=o.YUT.Image),I.filter((e=>Object.values(e).includes(t)))},k=[o.YUT.Image,o.YUT.Giphy,o.YUT.ImageGenerative],E=[o.YUT.Figma,o.YUT.Airtable,o.YUT.Web,o.YUT.Framer,o.YUT.Miro,o.YUT.Looker],R=[o.YUT.Twitter,...E],S=[o.YUT.Giphy,...R]},40960:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});class i{constructor(){this.timeout=null,this.timeoutMs=0,this.callback=()=>{},this.stop=()=>{this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},this.start=(e,t)=>{this.stop(),this.timeoutMs=t,this.callback=e,this.timeout=setTimeout(e,t)},this.refresh=()=>{this.stop(),this.start(this.callback,this.timeoutMs)}}}},89605:function(e,t,n){"use strict";n.d(t,{Oo:function(){return l},Z2:function(){return i},iy:function(){return r},yh:function(){return o}});const i={duration:.45,ease:[.4,0,.1,1]},o={type:"spring",stiffness:500,damping:60,mass:1},r={type:"spring",stiffness:450,damping:50},l={type:"tween",ease:"easeInOut",duration:0}},17625:function(e,t,n){"use strict";n.d(t,{M:function(){return o},j:function(){return r}});var i=n(96215);function o(e,t){var n;return(null===(n=e)||void 0===n?void 0:n.mediaStatus)!==i.Jpv.Ready||!t}function r(e,t){const n=new URL(e);return n.searchParams.set("time",Math.round(t).toString()),n.searchParams.set("width","800"),n.searchParams.set("height","800"),n.href}},1759:function(e,t,n){"use strict";n.d(t,{b:function(){return i},z:function(){return o}});const i=e=>new Promise((t=>{const n=document.createElement("canvas");n.width=e.videoWidth,n.height=e.videoHeight,n.getContext("2d").drawImage(e,0,0,e.videoWidth,e.videoHeight),n.toBlob((e=>{t(e)}),"image/jpeg")})),o=(e,t,n)=>{e.analyzeData((()=>t.byteLength),(()=>t),(e=>{e.media.track.forEach((e=>{if("Video"===e["@type"]){const t=e.CodecID;n("hvc1"===t)}}))}))}},83850:function(){}}]);
